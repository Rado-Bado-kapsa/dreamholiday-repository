/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/themes/gavias_lozin/js/listing.js. */
(function(e){window.map_init=function(mode='multi'){if(e('.listing-main-map').length==0)return;var n=[];e('.listing-items .listing-block').each(function(){var s=e(this).find('.data-lat').html(),o=e(this).find('.data-lon').html(),l=e(this).find('.data-html').html(),a='',i='';e(this).find('.listing-category .data-icon').each(function(){if(e(this).html()){a=e(this).html()}});e(this).find('.listing-category .data-category-color').each(function(){if(e(this).html()){i=e(this).html()}});var t=[s,o,l,a,i];n.push(t)});if(mode!='single'){if(drupalSettings.listing_setting.map_center_latitude&&drupalSettings.listing_setting.map_center_longitude){latlng=L.latLng(drupalSettings.listing_setting.map_center_latitude,drupalSettings.listing_setting.map_center_longitude)}};if(n[0]){var p=n[0];latlng=L.latLng(p[0],p[1])}
else{latlng=L.latLng('42.7247484','-78.0127572')};var g=drupalSettings.listing_setting.map_zoom,i=L.map('listing-main-map',{}).setView(latlng,g);i.scrollWheelZoom.disable();e('#listing-main-map').bind('mousewheel DOMMouseScroll',function(a){a.stopPropagation();if(a.ctrlKey==!0){a.preventDefault();i.scrollWheelZoom.enable();e('#listing-main-map').removeClass('map-scroll');setTimeout(function(){i.scrollWheelZoom.disable()},1000)}
else{i.scrollWheelZoom.disable();e('#listing-main-map').addClass('map-scroll')}});e(window).bind('mousewheel DOMMouseScroll',function(a){e('#map').removeClass('map-scroll')});var l=drupalSettings.listing_setting.map_source,d=drupalSettings.listing_setting.mapbox_access_token,c=drupalSettings.listing_setting.mapbox_id_style;if(l=='mapbox'){L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',{attribution:'',maxZoom:18,id:c,accessToken:d,}).addTo(i)};if(l=='google'){var o=[];if(drupalSettings.listing_setting.google_map_style=='gray'){o=[{'featureType':'administrative','elementType':'labels.text.fill','stylers':[{'color':'#444444'}]},{'featureType':'landscape','elementType':'all','stylers':[{'color':'#f2f2f2'}]},{'featureType':'poi','elementType':'all','stylers':[{'visibility':'off'}]},{'featureType':'road','elementType':'all','stylers':[{'saturation':-100},{'lightness':45}]},{'featureType':'road.highway','elementType':'all','stylers':[{'visibility':'simplified'}]},{'featureType':'road.arterial','elementType':'labels.icon','stylers':[{'visibility':'off'}]},{'featureType':'transit','elementType':'all','stylers':[{'visibility':'off'}]},{'featureType':'water','elementType':'all','stylers':[{'color':'#cae5f0'},{'visibility':'on'}]}]};var h=L.gridLayer.googleMutant({type:'roadmap',maxZoom:18,styles:o,gestureHandling:'greedy'}).addTo(i)};var t=L.markerClusterGroup(),s=[],m='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="54px" height="54px" viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve"><path class="pin-st0" d="M27,54C27,54,27,54,27,54c0.7,0,1.3-0.3,1.7-0.8C41.1,38,47,29.2,47,20.3C47,9.1,38,0,27,0S7,9.1,7,20.3c0,8.7,5.6,17.2,18.3,32.9C25.7,53.7,26.3,54,27,54z"></path><path class="pin-st1" d="M27,1C16.5,1,8,9.6,8,20.1c0,8.2,5.4,16.2,17.4,31.1c0.4,0.5,1,0.8,1.6,0.8c0,0,0,0,0,0c0.6,0,1.2-0.3,1.6-0.8C40.4,36.9,46,28.6,46,20.1C46,9.6,37.5,1,27,1z M27,36c-8.8,0-16-7.2-16-16S18.2,4,27,4c8.8,0,16,7.2,16,16S35.8,36,27,36z"></path></svg>';function f(){for(var a=0;a<n.length;a++){var e=n[a],o=e[2],l=e[4],p=new L.DivIcon({iconSize:[54,54],iconAnchor:[27,54],popupAnchor:[0,-26],className:'gva-icon-map color-'+l,html:'<span class="icon-map">'+m+'<span class="icon-cat"><i class="'+e[3]+'"></i></span></span>'});var i=L.marker(L.latLng(e[0],e[1]),{icon:p}).bindPopup(o,{'maxWidth':'500','className':'custom'});t.addLayer(i);s.push(i)};navigator.geolocation.getCurrentPosition(function(e){var a=L.marker(L.latLng(e.coords.latitude,e.coords.longitude));t.addLayer(a);s.push(a)})};f();i.addLayer(t);e('.gva-reset-map').on('click',function(e){e.preventDefault();i.setView(latlng,drupalSettings.listing_setting.map_zoom)});e('.gva-current-map').on('click',function(e){e.preventDefault();navigator.geolocation.getCurrentPosition(function(e){var a=new L.LatLng(e.coords.latitude,e.coords.longitude);i.setView(a,drupalSettings.listing_setting.map_zoom)})});e('.listing-block .show-in-map a').on('click',function(a){a.preventDefault();var n=e(this).parents('.listing-item-wrapper').data('marker'),i=s[n];t.zoomToShowLayer(i,function(){i.openPopup()})});e('.listing-item-wrapper').each(function(a){e(this).hover(function(){if(e('#hover-show-map').is(':checked')){var i=e(this).data('marker'),a=s[i];t.zoomToShowLayer(a,function(){a.openPopup()})}})});e('a.gva-open-map').on('click',function(a){a.preventDefault();e(this).parents('.map-layout-wrapper').find('.main-map-wrapper').removeClass('d-none d-md-none d-sm-none');e(this).parents('.map-layout-wrapper').find('.main-listing-wrapper').addClass('d-none d-md-none d-sm-none');e(this).parent('.control-open-map-listtings').find('a.gva-open-map').addClass('d-none');e(this).parent('.control-open-map-listtings').find('a.gva-open-listings').removeClass('d-none');e(this).parents('.map-action-mobile').addClass('map-open');i._onResize()});e('a.gva-open-listings').on('click',function(a){a.preventDefault();e(this).parents('.map-layout-wrapper').find('.main-map-wrapper').addClass('d-none d-md-none d-sm-none');e(this).parents('.map-layout-wrapper').find('.main-listing-wrapper').removeClass('d-none d-md-none d-sm-none');e(this).parent('.control-open-map-listtings').find('a.gva-open-listings').addClass('d-none');e(this).parent('.control-open-map-listtings').find('a.gva-open-map').removeClass('d-none');e(this).parents('.map-action-mobile').removeClass('map-open')});e(document).ready(function(){window.map_action=function(){e('.map-action .control-search a, .map-action-mobile .control-search a').on('click',function(a){a.preventDefault();var i=e(this);if(i.hasClass('open-mode')){i.parents('.gva-view').find('.views-exposed-form').first().removeClass('open');i.removeClass('open-mode')}
else{i.parents('.gva-view').find('.views-exposed-form').first().addClass('open');i.addClass('open-mode')}});e('a.close-exposed-form').on('click',function(a){a.preventDefault();e(this).parents('.views-exposed-form').removeClass('open');e('.map-action .control-search a, .map-action-mobile .control-search a').removeClass('open-mode')});if(e('.mode-filter-fixed .views-exposed-form').length){const ps=new PerfectScrollbar('.mode-filter-fixed .views-exposed-form')}};e('.views-exposed-form .js-form-type-checkbox').each(function(){if(!e(this).hasClass('pretty')){e(this).addClass('pretty p-default p-round');e(this).find('label').wrap('<div class="state p-success-o"></div>')}});map_action();e('.listing-nav a[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var a=e(this.hash);a=a.length?a:e('[name='+this.hash.slice(1)+']');if(a.length){e('html, body').animate({scrollTop:a.offset().top-150},1500);return!1}}});function a(){if(e('body').hasClass('boxed')){if(e('body.boxed .listings-map-1 .main-listing-wrapper').length){if(e(window).width()>992){var a=e('body.boxed .listings-map-1 .map-layout-wrapper').width();e('body.boxed .listings-map-1 .main-map-wrapper').width(a*0.6);e('body.boxed .listings-map-1 .main-map-wrapper').css({'right':'auto','left':e('body.boxed .listings-map-1 .main-listing-wrapper').offset().left+e('.listings-map-1 .main-listing-wrapper').width()+40})}
else{e('body.boxed .listings-map-1 .main-map-wrapper').css({'width':'100%','left':'0'})}}}
else{e('body.boxed .listings-map-1 .main-map-wrapper').css({'width':'52%','left':'auto','right':'0'})}};function i(){if(e('body').hasClass('boxed')){if(e('body.boxed .listings-map-2 .main-listing-wrapper').length){if(e(window).width()>992){var a=e('body.boxed .listings-map-2 .map-layout-wrapper').width();e('body.boxed .listings-map-2 .main-map-wrapper').width(a*0.5);e('body.boxed .listings-map-2 .main-map-wrapper').css({'right':'auto','left':e('body.boxed .listings-map-2 .main-listing-wrapper').offset().left+e('.listings-map-2 .main-listing-wrapper').width()+40})}
else{e('body.boxed .listings-map-2 .main-map-wrapper').css({'width':'100%','left':'0'})}}}
else{e('body.boxed .listings-map-2 .main-map-wrapper').css({'width':'50%','left':'auto','right':'0'})}};function t(){if(e('body').hasClass('boxed')){if(e('body.boxed .listing-taxonomy-page .main-listing-wrapper').length){if(e(window).width()>992){var a=e('body.boxed .listing-taxonomy-page .map-layout-wrapper').width();e('body.boxed .listing-taxonomy-page .main-map-wrapper').width(a*0.5);e('body.boxed .listing-taxonomy-page .main-map-wrapper').css({'right':'auto','left':e('body.boxed .listing-taxonomy-page .main-listing-wrapper').offset().left+e('.listing-taxonomy-page .main-listing-wrapper').width()+40})}
else{e('body.boxed .listing-taxonomy-page .main-map-wrapper').css({'width':'100%','left':'0'})}}}
else{e('.listing-taxonomy-page .main-map-wrapper').css({'width':'50%','left':'auto','right':'0'})}};a();i();t();e(window).on('debouncedresize',function(e){a();i();t()})});var r=e('header#header').height();e('.main-map-wrapper').css('top',r);e(window).on('scroll',function(){var a=e(document).scrollTop();if(a>20){if(e('body').hasClass('header-is-fixed')){e('.main-map-wrapper').addClass('margin-top-0')}
else{e('.main-map-wrapper').removeClass('margin-top-0')};if(e('body').hasClass('header-no-sticky')){e('.main-map-wrapper').css('top',0)}}})};jQuery(document).ajaxComplete(function(a,t,i){if(i.data.indexOf('view_name=listing_content')!=-1){e('.views-exposed-form .js-form-type-checkbox').each(function(){if(!e(this).hasClass('pretty')){e(this).addClass('pretty p-default p-round');e(this).find('label').wrap('<div class="state p-success-o"></div>')}});e('.listing-block').each(function(){e(this).magnificPopup({delegate:'a.image-popup',type:'image',gallery:{enabled:!0},})});e('.popup-video').magnificPopup({type:'iframe',fixedContentPos:!1})}})})(jQuery);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/themes/gavias_lozin/js/listing.js. */