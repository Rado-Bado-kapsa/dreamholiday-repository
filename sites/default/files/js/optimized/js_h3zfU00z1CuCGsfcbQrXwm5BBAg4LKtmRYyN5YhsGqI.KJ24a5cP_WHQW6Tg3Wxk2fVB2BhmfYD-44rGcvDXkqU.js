/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/core/misc/tabledrag.js. */
;var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(t){return typeof t}:function(t){return t&&typeof Symbol==='function'&&t.constructor===Symbol&&t!==Symbol.prototype?'symbol':typeof t};(function(t,e,i){var n=JSON.parse(localStorage.getItem('Drupal.tableDrag.showWeight'));e.behaviors.tableDrag={attach:function(n,i){function r(t,n){if(t.length){e.tableDrag[n]=new e.tableDrag(t[0],i.tableDrag[n])}};Object.keys(i.tableDrag||{}).forEach(function(e){r(t(n).find('#'+e).once('tabledrag'),e)})}};e.tableDrag=function(i,r){var d=this,o=this,h=t(i);this.$table=t(i);this.table=i;this.tableSettings=r;this.dragObject=null;this.rowObject=null;this.oldRowElement=null;this.oldY=null;this.changed=!1;this.maxDepth=0;this.rtl=t(this.table).css('direction')==='rtl'?-1:1;this.striping=t(this.table).data('striping')===1;this.scrollSettings={amount:4,interval:50,trigger:70};this.scrollInterval=null;this.scrollY=0;this.windowHeight=0;this.indentEnabled=!1;Object.keys(r||{}).forEach(function(t){Object.keys(r[t]||{}).forEach(function(e){if(r[t][e].relationship==='parent'){d.indentEnabled=!0};if(r[t][e].limit>0){d.maxDepth=r[t][e].limit}})});if(this.indentEnabled){this.indentCount=1;var a=e.theme('tableDragIndentation'),l=t('<tr></tr>').addClass('draggable').appendTo(i),f=t('<td></td>').appendTo(l).prepend(a).prepend(a),s=f.find('.js-indentation');this.indentAmount=s.get(1).offsetLeft-s.get(0).offsetLeft;l.remove()};h.find('> tr.draggable, > tbody > tr.draggable').each(function(){o.makeDraggable(this)});h.before(t('<button type="button" class="link tabledrag-toggle-weight"></button>').on('click',t.proxy(function(t){t.preventDefault();this.toggleColumns()},this)).wrap('<div class="tabledrag-toggle-weight-wrapper"></div>').parent());o.initColumns();t(document).on('touchmove',function(t){return o.dragRow(t.originalEvent.touches[0],o)});t(document).on('touchend',function(t){return o.dropRow(t.originalEvent.touches[0],o)});t(document).on('mousemove pointermove',function(t){return o.dragRow(t,o)});t(document).on('mouseup pointerup',function(t){return o.dropRow(t,o)});t(window).on('storage',t.proxy(function(t){if(t.originalEvent.key==='Drupal.tableDrag.showWeight'){n=JSON.parse(t.originalEvent.newValue);this.displayColumns(n)}},this))};e.tableDrag.prototype.initColumns=function(){var t=this,i=this.$table,r=void 0,e=void 0,o=void 0;Object.keys(this.tableSettings||{}).forEach(function(n){Object.keys(t.tableSettings[n]).some(function(o){var a=i.find('.'+t.tableSettings[n][o].target).eq(0);if(a.length&&t.tableSettings[n][o].hidden){r=t.tableSettings[n][o].hidden;e=a.closest('td');return!0};return!1});if(r&&e[0]){o=e.parent().find('> td').index(e.get(0))+1;i.find('> thead > tr, > tbody > tr, > tr').each(t.addColspanClass(o))}});this.displayColumns(n)};e.tableDrag.prototype.addColspanClass=function(e){return function(){var o=t(this),i=e,r=o.children(),n=void 0;r.each(function(t){if(t<i&&this.colSpan&&this.colSpan>1){i-=this.colSpan-1}});if(i>0){n=r.filter(':nth-child('+i+')');if(n[0].colSpan&&n[0].colSpan>1){n.addClass('tabledrag-has-colspan')}
else{n.addClass('tabledrag-hide')}}}};e.tableDrag.prototype.displayColumns=function(e){if(e){this.showColumns()}
else{this.hideColumns()};t('table').findOnce('tabledrag').trigger('columnschange',!!e)};e.tableDrag.prototype.toggleColumns=function(){n=!n;this.displayColumns(n);if(n){localStorage.setItem('Drupal.tableDrag.showWeight',n)}
else{localStorage.removeItem('Drupal.tableDrag.showWeight')}};e.tableDrag.prototype.hideColumns=function(){var n=t('table').findOnce('tabledrag');n.find('.tabledrag-hide').css('display','none');n.find('.tabledrag-handle').css('display','');n.find('.tabledrag-has-colspan').each(function(){this.colSpan=this.colSpan-1});t('.tabledrag-toggle-weight').text(e.t('Show row weights'))};e.tableDrag.prototype.showColumns=function(){var n=t('table').findOnce('tabledrag');n.find('.tabledrag-hide').css('display','');n.find('.tabledrag-handle').css('display','none');n.find('.tabledrag-has-colspan').each(function(){this.colSpan=this.colSpan+1});t('.tabledrag-toggle-weight').text(e.t('Hide row weights'))};e.tableDrag.prototype.rowSettings=function(e,n){var r=t(n).find('.'+e),i=this.tableSettings[e];return Object.keys(i).map(function(t){var n=i[t].target,e=void 0;if(r.is('.'+n)){e={};Object.keys(i[t]).forEach(function(n){e[n]=i[t][n]})};return e}).filter(function(t){return t})[0]};e.tableDrag.prototype.makeDraggable=function(n){var i=this,o=t(n);o.find('td:first-of-type').find('a').addClass('menu-item__link');var r=t('<a href="#" class="tabledrag-handle"><div class="handle">&nbsp;</div></a>').attr('title',e.t('Drag to re-order')),a=o.find('td:first-of-type').find('.js-indentation').eq(-1);if(a.length){a.after(r);i.indentCount=Math.max(o.find('.js-indentation').length,i.indentCount)}
else{o.find('td').eq(0).prepend(r)};r.on('mousedown touchstart pointerdown',function(t){t.preventDefault();if(t.originalEvent.type==='touchstart'){t=t.originalEvent.touches[0]};i.dragStart(t,i,n)});r.on('click',function(t){t.preventDefault()});r.on('focus',function(){i.safeBlur=!0});r.on('blur',function(t){if(i.rowObject&&i.safeBlur){i.dropRow(t,i)}});r.on('keydown',function(e){if(e.keyCode!==9&&!i.rowObject){i.rowObject=new i.row(n,'keyboard',i.indentEnabled,i.maxDepth,!0)};var d=!1,s=void 0;switch(e.keyCode){case 37:case 63234:d=!0;i.rowObject.indent(-1*i.rtl);break;case 38:case 63232:{var a=t(i.rowObject.element).prev('tr').eq(0),o=a.get(0);while(o&&a.is(':hidden')){a=t(o).prev('tr').eq(0);o=a.get(0)};if(o){i.safeBlur=!1;i.rowObject.direction='up';d=!0;if(t(n).is('.tabledrag-root')){s=0;while(o&&a.find('.js-indentation').length){a=t(o).prev('tr').eq(0);o=a.get(0);s+=a.is(':hidden')?0:o.offsetHeight};if(o){i.rowObject.swap('before',o);window.scrollBy(0,-s)}}
else if(i.table.tBodies[0].rows[0]!==o||a.is('.draggable')){i.rowObject.swap('before',o);i.rowObject.interval=null;i.rowObject.indent(0);window.scrollBy(0,-parseInt(n.offsetHeight,10))};r.trigger('focus')};break};case 39:case 63235:d=!0;i.rowObject.indent(i.rtl);break;case 40:case 63233:{var h=t(i.rowObject.group).eq(-1).next('tr').eq(0),l=h.get(0);while(l&&h.is(':hidden')){h=t(l).next('tr').eq(0);l=h.get(0)};if(l){i.safeBlur=!1;i.rowObject.direction='down';d=!0;if(t(n).is('.tabledrag-root')){s=0;var f=new i.row(l,'keyboard',i.indentEnabled,i.maxDepth,!1);if(f){t(f.group).each(function(){s+=t(this).is(':hidden')?0:this.offsetHeight});var c=t(f.group).eq(-1).get(0);i.rowObject.swap('after',c);window.scrollBy(0,parseInt(s,10))}}
else{i.rowObject.swap('after',l);i.rowObject.interval=null;i.rowObject.indent(0);window.scrollBy(0,parseInt(n.offsetHeight,10))};r.trigger('focus')};break}};if(i.rowObject&&i.rowObject.changed===!0){t(n).addClass('drag');if(i.oldRowElement){t(i.oldRowElement).removeClass('drag-previous')};i.oldRowElement=n;if(i.striping===!0){i.restripeTable()};i.onDrag()};if(d){return!1}});r.on('keypress',function(t){switch(t.keyCode){case 37:case 38:case 39:case 40:return!1}})};e.tableDrag.prototype.dragStart=function(e,n,i){n.dragObject={};n.dragObject.initOffset=n.getPointerOffset(i,e);n.dragObject.initPointerCoords=n.pointerCoords(e);if(n.indentEnabled){n.dragObject.indentPointerPos=n.dragObject.initPointerCoords};if(n.rowObject){t(n.rowObject.element).find('a.tabledrag-handle').trigger('blur')};n.rowObject=new n.row(i,'pointer',n.indentEnabled,n.maxDepth,!0);n.table.topY=t(n.table).offset().top;n.table.bottomY=n.table.topY+n.table.offsetHeight;t(i).addClass('drag');t('body').addClass('drag');if(n.oldRowElement){t(n.oldRowElement).removeClass('drag-previous')};n.oldY=n.pointerCoords(e).y};e.tableDrag.prototype.dragRow=function(t,e){if(e.dragObject){e.currentPointerCoords=e.pointerCoords(t);var n=e.currentPointerCoords.y-e.dragObject.initOffset.y,s=e.currentPointerCoords.x-e.dragObject.initOffset.x;if(n!==e.oldY){e.rowObject.direction=n>e.oldY?'down':'up';e.oldY=n;var r=e.checkScroll(e.currentPointerCoords.y);clearInterval(e.scrollInterval);if(r>0&&e.rowObject.direction==='down'||r<0&&e.rowObject.direction==='up'){e.setScroll(r)};var i=e.findDropTargetRow(s,n);if(i){if(e.rowObject.direction==='down'){e.rowObject.swap('after',i,e)}
else{e.rowObject.swap('before',i,e)};if(e.striping===!0){e.restripeTable()}}};if(e.indentEnabled){var o=e.currentPointerCoords.x-e.dragObject.indentPointerPos.x,a=Math.round(o/e.indentAmount),l=e.rowObject.indent(a);e.dragObject.indentPointerPos.x+=e.indentAmount*l*e.rtl;e.indentCount=Math.max(e.indentCount,e.rowObject.indents)};return!1}};e.tableDrag.prototype.dropRow=function(n,i){var r=void 0,o=void 0;if(i.rowObject!==null){r=i.rowObject.element;o=t(r);if(i.rowObject.changed===!0){i.updateFields(r);Object.keys(i.tableSettings||{}).forEach(function(t){var e=i.rowSettings(t,r);if(e.relationship==='group'){Object.keys(i.rowObject.children||{}).forEach(function(e){i.updateField(i.rowObject.children[e],t)})}});i.rowObject.markChanged();if(i.changed===!1){t(e.theme('tableDragChangedWarning')).insertBefore(i.table).hide().fadeIn('slow');i.changed=!0}};if(i.indentEnabled){i.rowObject.removeIndentClasses()};if(i.oldRowElement){t(i.oldRowElement).removeClass('drag-previous')};o.removeClass('drag').addClass('drag-previous');i.oldRowElement=r;i.onDrop();i.rowObject=null};if(i.dragObject!==null){i.dragObject=null;t('body').removeClass('drag');clearInterval(i.scrollInterval)}};e.tableDrag.prototype.pointerCoords=function(t){if(t.pageX||t.pageY){return{x:t.pageX,y:t.pageY}};return{x:t.clientX+document.body.scrollLeft-document.body.clientLeft,y:t.clientY+document.body.scrollTop-document.body.clientTop}};e.tableDrag.prototype.getPointerOffset=function(e,n){var i=t(e).offset(),r=this.pointerCoords(n);return{x:r.x-i.left,y:r.y-i.top}};e.tableDrag.prototype.findDropTargetRow=function(e,n){var i=this,a=t(this.table.tBodies[0].rows).not(':hidden'),l=function(e){var r=a[e],o=t(r),s=o.offset().top,l=void 0;if(r.offsetHeight===0){l=parseInt(r.firstChild.offsetHeight,10)/2}
else{l=parseInt(r.offsetHeight,10)/2};if(n>s-l&&n<s+l){if(i.indentEnabled){if(Object.keys(i.rowObject.group).some(function(t){return i.rowObject.group[t]===r})){return{v:null}}}
else if(r===i.rowObject.element){return{v:null}};if(!i.rowObject.isValidSwap(r)){return{v:null}}
while(o.is(':hidden')&&o.prev('tr').is(':hidden')){o=o.prev('tr:first-of-type');r=o.get(0)};return{v:r}}};for(var o=0;o<a.length;o++){var r=l(o);if((typeof r==='undefined'?'undefined':_typeof(r))==='object')return r.v};return null};e.tableDrag.prototype.updateFields=function(t){var e=this;Object.keys(this.tableSettings||{}).forEach(function(n){e.updateField(t,n)})};e.tableDrag.prototype.updateField=function(e,n){var o=this.rowSettings(n,e),a=t(e),r=void 0,i=void 0,l=void 0,b=void 0;if(o.relationship==='self'||o.relationship==='group'){r=e}
else if(o.relationship==='sibling'){i=a.prev('tr:first-of-type');l=i.get(0);var f=a.next('tr:first-of-type'),p=f.get(0);r=e;if(i.is('.draggable')&&i.find('.'+n).length){if(this.indentEnabled){if(i.find('.js-indentations').length===a.find('.js-indentations').length){r=l}}
else{r=l}}
else if(f.is('.draggable')&&f.find('.'+n).length){if(this.indentEnabled){if(f.find('.js-indentations').length===a.find('.js-indentations').length){r=p}}
else{r=p}}}
else if(o.relationship==='parent'){i=a.prev('tr');l=i;while(i.length&&i.find('.js-indentation').length>=this.rowObject.indents){i=i.prev('tr');l=i};if(i.length){r=i.get(0)}
else{r=t(this.table).find('tr.draggable:first-of-type').get(0);if(r===this.rowObject.element){r=t(this.rowObject.group[this.rowObject.group.length-1]).next('tr.draggable').get(0)};b=!0}};this.copyDragClasses(r,e,n);o=this.rowSettings(n,e);if(b){o.relationship='sibling';o.source=o.target};var h='.'+o.target,s=a.find(h).get(0);if(s){var v='.'+o.source,g=t(v,r).get(0);switch(o.action){case'depth':s.value=t(g).closest('tr').find('.js-indentation').length;break;case'match':s.value=g.value;break;case'order':{var c=this.rowObject.findSiblings(o);if(t(s).is('select')){var d=[];t(s).find('option').each(function(){d.push(this.value)});var w=d[d.length-1];t(c).find(h).each(function(){if(d.length>0){this.value=d.shift()}
else{this.value=w}})}
else{var u=parseInt(t(c[0]).find(h).val(),10)||0;t(c).find(h).each(function(){this.value=u;u++})};break}}}};e.tableDrag.prototype.copyDragClasses=function(e,n,i){var r=t(e).find('.'+i),o=t(n).find('.'+i);if(r.length&&o.length){o[0].className=r[0].className}};e.tableDrag.prototype.checkScroll=function(t){var r=document.documentElement,a=document.body,o=window.innerHeight||(r.clientHeight&&r.clientWidth!==0?r.clientHeight:a.offsetHeight);this.windowHeight=o;var i=void 0;if(document.all){i=!r.scrollTop?a.scrollTop:r.scrollTop}
else{i=window.pageYOffset?window.pageYOffset:window.scrollY};this.scrollY=i;var n=this.scrollSettings.trigger,e=0;if(t-i>o-n){e=n/(o+i-t);e=e>0&&e<n?e:n;return e*this.scrollSettings.amount};if(t-i<n){e=n/(t-i);e=e>0&&e<n?e:n;return-e*this.scrollSettings.amount}};e.tableDrag.prototype.setScroll=function(t){var e=this;this.scrollInterval=setInterval(function(){e.checkScroll(e.currentPointerCoords.y);var n=e.scrollY>e.table.topY,i=e.scrollY+e.windowHeight<e.table.bottomY;if(t>0&&i||t<0&&n){window.scrollBy(0,t)}},this.scrollSettings.interval)};e.tableDrag.prototype.restripeTable=function(){t(this.table).find('> tbody > tr.draggable, > tr.draggable').filter(':visible').filter(':odd').removeClass('odd').addClass('even').end().filter(':even').removeClass('even').addClass('odd')};e.tableDrag.prototype.onDrag=function(){return null};e.tableDrag.prototype.onDrop=function(){return null};e.tableDrag.prototype.row=function(e,n,i,a,l){var o=t(e);this.element=e;this.method=n;this.group=[e];this.groupDepth=o.find('.js-indentation').length;this.changed=!1;this.table=o.closest('table')[0];this.indentEnabled=i;this.maxDepth=a;this.direction='';if(this.indentEnabled){this.indents=o.find('.js-indentation').length;this.children=this.findChildren(l);this.group=t.merge(this.group,this.children);for(var r=0;r<this.group.length;r++){this.groupDepth=Math.max(t(this.group[r]).find('.js-indentation').length,this.groupDepth)}}};e.tableDrag.prototype.row.prototype.findChildren=function(e){var i=this.indents,n=t(this.element,this.table).next('tr.draggable'),r=[],o=0;function a(e,n){var r=t(n);if(o===1&&e===i){r.addClass('tree-child-first')};if(e===i){r.addClass('tree-child')}
else if(e>i){r.addClass('tree-child-horizontal')}}
while(n.length){if(n.find('.js-indentation').length>i){o++;r.push(n[0]);if(e){n.find('.js-indentation').each(a)}}
else{break};n=n.next('tr.draggable')};if(e&&r.length){t(r[r.length-1]).find('.js-indentation:nth-child('+(i+1)+')').addClass('tree-child-last')};return r};e.tableDrag.prototype.row.prototype.isValidSwap=function(e){var r=t(e);if(this.indentEnabled){var n=void 0,i=void 0;if(this.direction==='down'){n=e;i=r.next('tr').get(0)}
else{n=r.prev('tr').get(0);i=e};this.interval=this.validIndentInterval(n,i);if(this.interval.min>this.interval.max){return!1}};if(this.table.tBodies[0].rows[0]===e&&r.is(':not(.draggable)')){return!1};return!0};e.tableDrag.prototype.row.prototype.swap=function(n,r){this.group.forEach(function(t){e.detachBehaviors(t,i,'move')});t(r)[n](this.group);this.group.forEach(function(t){e.attachBehaviors(t,i)});this.changed=!0;this.onSwap(r)};e.tableDrag.prototype.row.prototype.validIndentInterval=function(e,n){var r=t(e),i=void 0,o=n?t(n).find('.js-indentation').length:0;if(!e||r.is(':not(.draggable)')||t(this.element).is('.tabledrag-root')){i=0}
else{i=r.find('.js-indentation').length+(r.is('.tabledrag-leaf')?0:1);if(this.maxDepth){i=Math.min(i,this.maxDepth-(this.groupDepth-this.indents))}};return{min:o,max:i}};e.tableDrag.prototype.row.prototype.indent=function(n){var r=t(this.group);if(!this.interval){var a=t(this.element).prev('tr').get(0),l=r.eq(-1).next('tr').get(0);this.interval=this.validIndentInterval(a,l)};var i=this.indents+n;i=Math.max(i,this.interval.min);i=Math.min(i,this.interval.max);n=i-this.indents;for(var o=1;o<=Math.abs(n);o++){if(n<0){r.find('.js-indentation:first-of-type').remove();this.indents--}
else{r.find('td:first-of-type').prepend(e.theme('tableDragIndentation'));this.indents++}};if(n){this.changed=!0;this.groupDepth+=n;this.onIndent()};return n};e.tableDrag.prototype.row.prototype.findSiblings=function(e){var r=[],o=['prev','next'],l=this.indents,a=void 0;for(var i=0;i<o.length;i++){var n=t(this.element)[o[i]]();while(n.length){if(n.find('.'+e.target)){if(this.indentEnabled){a=n.find('.js-indentation').length};if(!this.indentEnabled||a===l){r.push(n[0])}
else if(a<l){break}}
else{break};n=n[o[i]]()};if(o[i]==='prev'){r.reverse();r.push(this.element)}};return r};e.tableDrag.prototype.row.prototype.removeIndentClasses=function(){var e=this;Object.keys(this.children||{}).forEach(function(n){t(e.children[n]).find('.js-indentation').removeClass('tree-child').removeClass('tree-child-first').removeClass('tree-child-last').removeClass('tree-child-horizontal')})};e.tableDrag.prototype.row.prototype.markChanged=function(){var i=e.theme('tableDragChangedMarker'),n=t(this.element).find('td:first-of-type');if(n.find('abbr.tabledrag-changed').length===0){n.append(i)}};e.tableDrag.prototype.row.prototype.onIndent=function(){return null};e.tableDrag.prototype.row.prototype.onSwap=function(t){return null};t.extend(e.theme,{tableDragChangedMarker:function(){return'<abbr class="warning tabledrag-changed" title="'+e.t('Changed')+'">*</abbr>'},tableDragIndentation:function(){return'<div class="js-indentation indentation">&nbsp;</div>'},tableDragChangedWarning:function(){return'<div class="tabledrag-changed-warning messages messages--warning" role="alert">'+e.theme('tableDragChangedMarker')+' '+e.t('You have unsaved changes.')+'</div>'}})})(jQuery,Drupal,drupalSettings);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/core/misc/tabledrag.js. */