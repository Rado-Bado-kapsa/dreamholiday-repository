/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/modules/imce/js/imce.js. */
(function(t,r){'use strict';var e=window.imce={conf:{},local:{},events:{},shortcuts:{fm:{},tree:{},content:{}},toolbarButtons:{},tree:{},selection:[],messageQueue:[],sorters:{}};t(document).ready(function(){var o=window.drupalSettings,n=o&&o.imce,i=document.body;if(n&&!e.activeFolder&&t(i).hasClass('imce-page')){if(!n.ajax_url){n.ajax_url=r.url(o.path.currentPath)};e.init(n,i)}});e.init=function(n,o){n=t.extend(e.conf,n);if(!n.ajax_url||!n.folders||!n.root_url){return};e.parentEl=o;try{t.extend(e.local,JSON.parse(localStorage.getItem('imce.local')))}catch(s){e.delayError(s)};e.trigger('preinit');e.checkIntegration();e.initUI();e.initTree();e.addShortcut('ENTER',e.eTreeEnter,'tree');e.addShortcut('UP',e.eTreeUp,'tree');e.addShortcut('DOWN',e.eTreeDown,'tree');e.addShortcut('LEFT',e.eTreeLR,'tree');e.addShortcut('RIGHT',e.eTreeLR,'tree');e.addShortcut('ENTER',e.eContentEnter,'content');e.addShortcut('UP',e.eContentArrow,'content');e.addShortcut('DOWN',e.eContentArrow,'content');e.addShortcut('LEFT',e.eContentArrow,'content');e.addShortcut('RIGHT',e.eContentArrow,'content');e.addShortcut('Ctrl+A',e.eContentCtrlA,'content');e.addTbb('refresh',{title:r.t('Refresh'),permission:'browse_files|browse_subfolders',handler:e.eFmRefresh,shortcut:'F5',icon:'refresh'});e.bind('activateFolder',e.defaultActivateFolder);e.trigger('init');e.createSendtoTbb();o.appendChild(e.fmEl);t(window).bind('beforeunload',e.eWinBeforeunload).bind('resize',e.eWinResize);e.eWinResize();e.contentEl.focus();e.ajaxProcessMessages(n);var i=n.active_path,a=i&&e.addFolder(i);if(!a){for(i in n.folders){if(a=e.getFolder(i)){break}}};if(a){a.open()};e.trigger('postinit')};e.initUI=function(){var t=e.fmEl,n=e.createEl;if(t){return t};t=e.fmEl=n('<div id="imce-fm"></div>');t.onkeydown=e.eFmKeydown;t.tabIndex=0;t.appendChild(e.toolbarEl=n('<div id="imce-toolbar" aria-label="Operations" role="toolbar"></div>'));t.appendChild(e.bodyEl=n('<div id="imce-body"></div>'));t=e.treeEl=n('<div id="imce-tree"></div>');t.onkeydown=e.eTreeKeydown;t.onmousedown=e.eTreeMousedown;t.ontouchstart=e.eTreeTouchstart;t.tabIndex=0;e.bodyEl.appendChild(t);t=e.treeResizerEl=n('<div id="imce-tree-resizer"></div>');t.onmousedown=e.eTreeResizerMousedown;t.ontouchstart=e.eTreeResizerTouchstart;e.bodyEl.appendChild(t);t=e.contentEl=n('<div id="imce-content"></div>');if(e.conf.thumbnail_grid_style){t.className='thumbnail-grid'};t.onmousedown=e.eContentMousedown;t.ontouchstart=e.eContentTouchstart;t.onkeydown=e.eContentKeydown;t.onscroll=e.eContentScroll;t.tabIndex=0;e.bodyEl.appendChild(t);t=e.contentHeaderEl=e.createEl('<div class="imce-content-header"><div class="imce-item"><div class="imce-item-date" data-sort="date">'+r.t('Date')+'</div><div class="imce-item-height" data-sort="height">'+r.t('Height')+'</div><div class="imce-item-width" data-sort="width">'+r.t('Width')+'</div><div class="imce-item-size" data-sort="size">'+r.t('Size')+'</div><div class="imce-item-icon imce-ficon" data-sort="ext"></div><div class="imce-item-name" data-sort="name">'+r.t('Name')+'</div></div></div>');t.onclick=e.eContentHeaderClick;e.contentEl.appendChild(t);t=e.contentStatusEl=e.createEl('<div class="imce-content-status"></div>');e.contentEl.appendChild(t);t=e.bodyResizerEl=n('<div id="imce-body-resizer"></div>');t.onmousedown=e.eBodyResizerMousedown;t.ontouchstart=e.eBodyResizerTouchstart;e.fmEl.appendChild(t);e.fmEl.appendChild(e.previewEl=n('<div id="imce-preview"></div>'));return t};e.initTree=function(){var t,o=e.getConf('folders'),s=e.getConf('scheme'),i=new e.Folder(s?s+'://':'<'+r.t('root')+'>');i.setPath('.');i.branchEl.className+=' root';e.treeEl.appendChild(i.branchEl);var n=[];for(t in o){if(e.owns(o,t)){n.push(t)}};n.sort();for(var a=0;t=n[a];a++){e.addFolder(t,o[t])}};e.getFolder=function(t){if(e.owns(e.tree,t)){return e.tree[t]}};e.getItem=function(t){var n,r=e.splitPath(t);if(r){if(n=e.getFolder(r[0])){return n.getItem(r[1])}}};e.addFolder=function(t,r){var o,i,n=e.getFolder(t);if(n){if(r){n.setConf(r)};return n};if(o=e.splitPath(t)){if(i=e.addFolder(o[0])){n=new e.Folder(o[1],r);i.appendItem(n);return n}}};e.addTbb=function(t,r){return e.getTbb(t)||new e.Tbb(t,r)};e.getTbb=function(t){return e.toolbarButtons[t]};e.getConf=function(t,r){var n,o=e.conf;if(!t){return o};n=o[t];return n==null?r:n};e.getSelection=function(){return e.selection.slice(0)};e.countSelection=function(){return this.selection.length};e.groupSelection=function(){return e.groupItems(e.selection)};e.selectAll=function(){var t=e.activeFolder;if(t){t.selectAll()}};e.deselectAll=function(){var t,r=e.getSelection();for(t in r){if(e.owns(r,t)){r[t].deselect()}}};e.getLastSelected=function(){var t=e.selection,r=t.length;if(r){return t[r-1]}};e.selectItem=function(t){if(!t.selected){var r=e.selection,n=r.length;r.push(t);t.setState('selected');if(n<2){e.updatePreview()}}};e.deselectItem=function(r){if(r.selected){var n=e.selection,o=t.inArray(r,n);r.unsetState('selected');if(o!==-1){n.splice(o,1);if(n.length<2){e.updatePreview()}}}};e.loadItemUuids=function(t,r){var a,n,i=[],o=[];for(a in t){n=t[a];if(n&&n.isFile){if(n.uuid){o.push(n)}
else{i.push(n)}}};if(!i.length){if(r){r(o)};return o};return e.ajaxItems('uuid',i,{customComplete:function(t,n){var a,s,i=this.response;if(i&&i.uuids){for(a in i.uuids){if(s=e.getItem(a)){s.uuid=i.uuids[a];o.push(s)}}};if(r){r(o)}}})};e.checkIntegration=function(){var r=e.getQuery(),n,o,i=window.opener||window.parent;if(e.parentWin=i){if(n=e.resolveHandler(r.sendto,i)){e.sendtoHandler=n}
else if(o=r.urlField){if(o=i.document.getElementById(o)){e.sendtoHandler=function(r,n){try{e.parentWin.focus();(e.parentWin.jQuery||t)(o).val(r.getUrl()).blur().change().focus()}catch(i){e.delayError(i)};n.close()}}};if(n=e.resolveHandler(r.oninit,i)){e.bind('init',n)};if(e.sendtoHandler&&r.type){e.sendtoType=r.type}}};e.createSendtoTbb=function(t,n){if(e.sendtoHandler&&!e.getTbb('sendto')){return e.addTbb('sendto',{title:t||r.t('Select'),tooltip:n||r.t('Use the selected file.'),handler:function(){e.runSendtoHandler()},icon:'check'})}};e.runSendtoHandler=function(t){var o=e.sendtoHandler;if(o){var r,i=e.sendtoType==='image';t=t||e.getSelection();for(var n in t){if(e.owns(t,n)){r=t[n];if(i?r.isImageSource():r.isFile){return o(r,window)}}}}};e.defaultActivateFolder=function(t,r){var o,u,i,n,a,s=e.toolbarButtons;for(o in s){if(!e.owns(s,o)){continue};i=s[o];if(n=i.permission){n=n.split('|');a=!0;for(u in n){if(t.getPermission(n[u])){a=!1;break}};i.setDisabled(a)}}};e.updateHeader=function(){var r=e.activeFolder.activeSort,n=e.activeSort||{};var o=e.contentHeaderEl;if(r&&(r.key!==n.key||r.desc!==n.desc)){if(n.key){t('[data-sort="'+n.key+'"]',o).removeClass('sorted '+(n.desc?'desc':'asc'))};t('[data-sort="'+r.key+'"]',o).addClass('sorted '+(r.desc?'desc':'asc'));e.activeSort=r}};e.updatePreview=function(){clearTimeout(e.previewTimer);e.previewTimer=setTimeout(e.doUpdatePreview,100)};e.doUpdatePreview=function(){e.previewItem(e.countSelection()===1?e.getLastSelected():null)};e.previewItem=function(r){var n=e.previewingItem;if(e.previewingItem=r){t(e.previewEl).html(r.createPreviewEl());e.trigger('previewItem',r)}
else if(n){e.previewEl.innerHTML=''}};e.updateStatus=function(){clearTimeout(e.statusTimer);e.statusTimer=setTimeout(e.doUpdateStatus,100)};e.doUpdateStatus=function(){var r=e.activeFolder;if(r){t(e.contentStatusEl).html(r.formatStatus())}};e.getNameFilter=function(){var t=e.getConf('name_filters',[]);if(!e.getConf('allow_dot_files')){t.push('^\\.|\\.$')};return t.length?new RegExp(t.join('|')):!1};e.groupItems=function(t){var i,r,n,a,s,u,o={};for(i in t){if(!e.owns(t,i)){continue};r=t[i];n=r.parent.getPath();a=o[n]=e.owns(o,n)?o[n]:{};s=r.isFolder?'subfolders':'files';u=a[s]=a[s]||{};u[r.name]=r};return o};e.validatePermissions=function(t,r,n){var o,i,a,s=e.groupItems(t);for(o in s){if(!e.owns(s,o)){continue};i=e.getFolder(o);a=s[o];if(a.files&&(r==null||!i.getPermission(r))){return!1};if(a.subfolders&&(n==null||!i.getPermission(n))){return!1}};return!0};e.validatePredefinedPath=function(t){var n,o,i;for(n in t){if(!e.owns(t,n)){continue};o=t[n];if(o.isFolder){if(i=o.hasPredefinedPath()){e.setMessage(r.t('%path is a predefined path and can not be modified.',{'%path':i.getPath()}));return!1}}};return!0};e.validateCount=function(t){if(!t.length){e.setMessage(r.t('Please select a file.'));return!1};return!0};e.validateExtensions=function(t,r){for(var n in t){if(e.owns(t,n)&&!e.validateExtension(t[n].ext,r)){return!1}};return!0};e.validateExtension=function(n,o){if(!n||t.inArray(n.toLowerCase(),o.toLowerCase().split(/[\s,]+/))===-1){e.setMessage(r.t('Only files with the following extensions are allowed: %files-allowed.',{'%files-allowed':o}));return!1};return!0};e.validateFileName=function(t){if(!t||t==='.'||t==='..'||!t.length||t.length>240){return!1};var n=e.getNameFilter();if(n&&n.test(t)){e.setMessage(r.t('%filename is not allowed.',{'%filename':t}));return!1};if(/^\s|\s$|[\/\\:\*\?\x22<>\|\x00-\x1F]/.test(t)){e.setMessage(r.t('%filename contains invalid characters. Use only alphanumeric characters for better portability.',{'%filename':t}));return!1};return!0};e.validateDimensions=function(t,n,o){if(n<1||o<1){return!1};var i=e.getConf('maxwidth'),a=e.getConf('maxheight');if(i&&n>i||a&&o>a){e.setMessage(r.t('Image dimensions must be smaller than %dimensions pixels.',{'%dimensions':i+'x'+i}));return!1};return!0};e.validateImageTypes=function(t){var n=e.getFirstItem(t,'width',!1);if(n){e.setMessage(r.t('%name is not an image.',{'%name':n.name}));return!1};return!0};e.eFmKeydown=function(t){return e.eFireShortcut.call(this,t)};e.eFmRefresh=function(){e.activeFolder.load()};e.eTreeMousedown=function(e){this.focus()};e.eTreeTouchstart=function(e){this.focus()};e.eTreeKeydown=function(t){return e.eFireShortcut.call(this,t,'tree')};e.eTreeEnter=function(){e.activeFolder.open()};e.eTreeUp=function(t){var o=e.activeFolder,n,r;if(n=o.branchEl.previousSibling){if(r=n.Folder){while(r.expanded){if(n=r.subtreeEl.lastChild){r=n.Folder}}}}
else{r=o.parent};if(r){r.activate();e.scrollToEl(r.branchEl,e.treeEl)}};e.eTreeDown=function(t){var r=e.activeFolder,o,n;if(r.expanded&&(o=r.subtreeEl.firstChild)){n=o.Folder}
else{do{if(o=r.branchEl.nextSibling){n=o.Folder;break}}
while(r=r.parent);};if(n){n.activate();e.scrollToEl(n.branchEl,e.treeEl)}};e.eTreeLR=function(r){var n=e.activeFolder;if(r.keyCode===39^n.expanded){t(n.branchToggleEl).click()}};e.eTreeResizerMousedown=function(t){return e.eTreeResizerDown.call(this,e.eFix(t))};e.eTreeResizerTouchstart=function(t){return e.eCommonTouchstart(t,e.eTreeResizerDown,this)};e.eTreeResizerDown=function(r,n){this.startX=r.pageX;this.startW=t(e.treeEl).width();this.maxW=this.startW+t(e.contentEl).width();e.bindDragDrop(e.eTreeResizerDrag,null,null,n);return!1};e.eTreeResizerDrag=function(r){var n=e.treeResizerEl;t(e.treeEl).width(Math.min(n.maxW,Math.max(n.startW+r.pageX-n.startX,0)));r.preventDefault()};e.eContentMousedown=function(e){this.focus()};e.eContentTouchstart=function(e){this.focus()};e.eContentKeydown=function(t){return e.eFireShortcut.call(this,t,'content')};e.eContentScroll=function(t){e.updateContentPositions();setTimeout(e.updateContentPositions)};e.eContentHeaderClick=function(t){var r,i=e.eFix(t),o=e.activeFolder,n=o.activeSort||{};if(r=i.target.getAttribute('data-sort')){o.sortItems(r,r===n.key?!n.desc:n.desc)}};e.updateContentPositions=function(){var t=e.contentEl.scrollTop;e.contentHeaderEl.style.top=t+'px';e.contentStatusEl.style.bottom=-t+'px'};e.eContentEnter=function(t){var r=e.getLastSelected();if(r){r.dblClick()}};e.eContentCtrlA=function(t){e.selectAll()};e.eContentArrow=function(t){var r,o=0,i=e.activeFolder,n=t.keyCode;if(r=e.getLastSelected()){o=i.indexOf(r)+(n%2?n-38:e.countElPerRow(r.el)*(n-39))};if(r=i.getItemAt(o)){r.click(t);r.scrollIntoView()}};e.eBodyResizerMousedown=function(t){return e.eBodyResizerDown.call(this,e.eFix(t))};e.eBodyResizerTouchstart=function(t){return e.eCommonTouchstart(t,e.eBodyResizerDown,this)};e.eBodyResizerDown=function(r,n){this.startY=r.pageY;this.startH=t(e.bodyEl).height();this.maxH=this.startH+t(e.previewEl).height();e.bindDragDrop(e.eBodyResizerDrag,null,null,n);return!1};e.eBodyResizerDrag=function(r){var n=e.bodyResizerEl,o=Math.min(Math.max(n.startH+r.pageY-n.startY,0),n.maxH);t(e.bodyEl).height(o);t(e.previewEl).height(n.maxH-o);r.preventDefault()};e.eWinBeforeunload=function(t){var n={};if(n.activeSort=e.activeSort){e.trigger('storeLocalData',n);try{localStorage.setItem('imce.local',JSON.stringify(n))}catch(r){e.delayError(r)}}};e.eWinResize=function(r){var i,n=e.getWindowSize().height-e.fmEl.offsetHeight;if(n){var a=t(e.bodyEl),o=t(e.previewEl);if(o[0].offsetHeight){i=parseInt(n/2);n-=i;o.height(o.height()+i)};a.height(a.height()+n)}};e.bind=function(t,r){var o=e.events,n=o[t];if(!n){n=o[t]={}};n[''+r]=r};e.unbind=function(t,r){var n=e.events,o=n[t];if(o){if(1 in arguments){delete o[''+r]}
else{delete n[t]}}};e.trigger=function(t){var o,r,n=e.events[t],i=[];if(n){for(o in n){if(r=n[o]){if(r.apply){i.push(r.apply(e,Array.prototype.slice.call(arguments,1)))}}}};return i};e.addShortcut=function(t,r,n){var o;if(o=e.getAreaShortcuts(n)){o[t.toUpperCase()]=r}};e.getShortcut=function(t,r){var n;if(n=e.getAreaShortcuts(r)){return n[t.toUpperCase()]}};e.removeShortcut=function(t,r){var n;if(n=e.getAreaShortcuts(r)){delete n[t.toUpperCase()]}};e.fireShortcut=function(t,r){var n=e.getShortcut(t,r);if(n){if(n.click){n.click();return!0};if(n.apply){return n.apply(this,Array.prototype.slice.call(arguments,2))!==!1}}};e.getAreaShortcuts=function(t){if(!t){t='fm'};return e.shortcuts[t]};e.eBuildShortcut=function(t){var n,o=t.keyCode,r='';if(o&&(n=e.getKeySymbols(o))){if(t.ctrlKey){r+='CTRL+'};if(t.altKey){r+='ALT+'};if(t.shiftKey){r+='SHIFT+'};r+=n};return r};e.eFireShortcut=function(r,n){var o=r||window.event,i=e.eBuildShortcut(o);if(i){o=t.event.fix(o);if(e.fireShortcut.call(this,i,n,o)){o.stopPropagation();return!1}}};e.getKeySymbols=function(t){var r,n=e.keySymbols;if(!n){n=e.keySymbols={8:'BACKSPACE',9:'TAB',13:'ENTER',27:'ESC',32:'SPACE',37:'LEFT',38:'UP',39:'RIGHT',40:'DOWN',46:'DEL'};for(r=0;r<10;r++){n[48+r]=''+r};for(r=65;r<91;r++){n[r]=String.fromCharCode(r)};for(r=1;r<13;r++){n[111+r]='F'+r}};return(0 in arguments)?n[t]:n};e.ajax=function(r,n){return t.ajax(e.ajaxPrepare(r,n))};e.ajaxPrepare=function(r,n){var i,o=n&&n.activeFolder!=null?n.activeFolder:e.activeFolder,a={jsop:r,token:e.getConf('token')};if(o){if(i=o.getPath()){a.active_path=i}};return t.extend(!0,e.ajaxDefaults(),{data:a,activeFolder:o},n)};e.ajaxDefaults=function(){return{url:e.getConf('ajax_url'),type:'POST',dataType:'json',beforeSend:e.ajaxBeforeSend,success:e.ajaxSuccess,error:e.ajaxError,complete:e.ajaxComplete}};e.ajaxItems=function(r,n,o){return e.ajax(r,t.extend(!0,e.ajaxItemsOpt(n),o))};e.ajaxItemsOpt=function(t){return{data:{selection:e.getItemPaths(t)}}};e.ajaxBeforeSend=function(e,t){var r,n;if(r=t.customBeforeSend){if(r.apply(this,arguments)===!1){t.activeFolder=null;return!1}};if(n=t.activeFolder){n.setBusy(!0)}};e.ajaxSuccess=function(t,r){var o,n=this;n.response=t;e.ajaxProcessResponse(t);if(o=n.customSuccess){o.apply(n,arguments)}};e.ajaxComplete=function(e,t){var n,o,r=this;if(n=r.activeFolder){n.setBusy(!1)};if(o=r.customComplete){o.apply(r,arguments)};r.response=r.activeFolder=null};e.ajaxError=function(t,n,o){if(n!=='abort'){e.setMessage('<pre class="imce-ajax-error">'+r.checkPlain(e.ajaxErrorMessage(t,this.url))+'</pre>')}};e.ajaxProcessResponse=function(t){if(t){e.ajaxProcessRemoved(t);e.ajaxProcessAdded(t);e.ajaxProcessMessages(t)}};e.ajaxProcessAdded=function(t){var r,o,n;if(n=t.added){for(r in n){if(o=e.addFolder(r)){o.addContent(n[r],!0);e.contentEl.focus()}}}};e.ajaxProcessRemoved=function(t){var n,o,r=t.removed;if(r){for(n in r){if(o=e.getItem(r[n])){o.remove()}}}};e.ajaxProcessMessages=function(t){var o,r,n=t.messages;if(n){for(r in n){if(e.owns(n,r)){for(o in n[r]){if(n[r].hasOwnProperty(o)){e.setMessage(n[r][o],r)}}}}}};e.ajaxErrorMessage=function(e,t){var n=r.t('An AJAX HTTP error occurred.');n+='\n'+r.t('Path: !uri',{'!uri':t});n+='\n'+r.t('HTTP Result Code: !status',{'!status':e.status||0});n+='\n'+r.t('StatusText: !statusText',{'!statusText':e.statusText||'N/A'});n+='\n'+r.t('ResponseText: !responseText',{'!responseText':e.responseText||'N/A'});return n};e.getItemPaths=function(r){return t.map(r,e.getItemPath)};e.getItemPath=function(e){return e.getPath()};e.setMessage=function(t,r){if(!r){r='error'};var n=e.messageQueue,o=n.length,i=t+':'+r;if(o&&n[o-1].msgId===i){return!1};n[o]=e.createMessageEl(t,r);n[o].msgId=i;if(!e.pmqScheduled){e.pmqScheduled=setTimeout(e.processMessageQueue,100)};return!1};e.processMessageQueue=function(){var r=e.messageQueue;if(r.length){t(e.createMessagePopupEl()).html(r).fadeIn(200);r.length=0;t(document).bind('mousedown',e.eMPopDocMousedown);e.mPopCloseTimer=setTimeout(e.mPopClose,2500)}};e.mPopClose=function(){if(e.mPopHovering){e.mPopCloseTimerUp=1;return e.mPopCloseTimerUp};clearTimeout(e.mPopCloseTimer);e.mPopCloseTimerUp=0;t(document).unbind('mousedown',e.eMPopDocMousedown);t(e.messagePopupEl).fadeOut(400,e.processMessageQueueNext)};e.processMessageQueueNext=function(){e.pmqScheduled=0;if(e.messageQueue.length){e.pmqScheduled=setTimeout(e.processMessageQueue,250)}};e.eMPopMouseenter=function(t){e.mPopHovering=1;if(e.mPopCloseTimerUp){clearTimeout(e.mPopCloseTimer)}};e.eMPopMouseleave=function(t){e.mPopHovering=0;if(e.mPopCloseTimerUp){e.mPopCloseTimer=setTimeout(e.mPopClose,2000)}};e.eMPopDocMousedown=function(t){if(!e.mPopHovering){e.mPopClose()}};e.createMessageEl=function(t,r){var n=e.createEl('<div class="imce-message imce-ficon"><div class="imce-message-content"></div></div>');n.className+=' '+r;n.firstChild.innerHTML=t;return n};e.createMessagePopupEl=function(){var r=e.messagePopupEl;if(!r){r=e.messagePopupEl=e.createLayer('imce-message-popup',e.fmEl);t(r).hover(e.eMPopMouseenter,e.eMPopMouseleave)};return r};e.permissionInFolderConf=function(e,t){var r=t&&t.permissions;return!!(r&&((e in r)?r[e]:r.all))};e.hasPermission=function(t,r){var o,n=(r||e.conf).folders;if(n){for(o in n){if(e.permissionInFolderConf(t,n[o])){return!0}}};return!1};e.sortText=function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:1};e.sortNum=function(e,t){return(e||0)-(t||0)};e.sortNumericProperty=function(t,r,n){var o=(t.isFolder?-1:1);if(t.isFolder===r.isFolder){o=e.sortNum(t[n]||0,r[n]||0)};return o};e.sortBranchName=function(t,r){return e.sortText(t.name,r.name)};e.sorters.name=function(t,r){var n=(t.isFolder?-1:1);if(t.isFolder===r.isFolder){n=e.sortText(t.name,r.name)};return n};e.sorters.date=function(t,r){return e.sortNumericProperty(t,r,'date')};e.sorters.size=function(t,r){return e.sortNumericProperty(t,r,'size')};e.sorters.width=function(t,r){return e.sortNumericProperty(t,r,'width')};e.sorters.height=function(t,r){return e.sortNumericProperty(t,r,'height')};e.sorters.ext=function(t,r){var n=(t.isFolder?-1:1);if(t.isFolder===r.isFolder){n=(t.isFolder?0:e.sortText(t.ext||'',r.ext||''))};return n};e.splitPath=function(e){if(typeof e==='string'&&e!==''){var t=e.split('/'),r=t.pop(),n=t.join('/');if(r!==''){return[n===''?'.':n,r]}}};e.joinPaths=function(e,t){if(e==='.'){return t};if(t==='.'){return e};if(e.substr(-1)!=='/'){e+='/'};return e+t};e.getQuery=function(t){var i,n,o,a,r=e.query;if(!r){r=e.query={};if(a=location.search){o=a.substr(1).split('&');for(i in o){if(e.owns(o,i)){n=o[i].split('=');r[e.decode(n[0])]=n[1]?e.decode(n[1]):''}}}};return t?r[t]:r};e.decode=function(t){try{t=decodeURIComponent(t)}catch(r){e.delayError(r)};return t};e.delayError=function(e){setTimeout(function(){throw e})};e.formatDate=function(t,r){var n,o,i='';if(t){n=new Date(t*1000);o=e.prependZero;i=n.getFullYear()+'-'+o(n.getMonth()+1)+'-'+o(n.getDate());if(!r){i+=' '+o(n.getHours())+':'+o(n.getMinutes())}};return i};e.formatSize=function(t){if(t==null){return''};if(!t||t<100){return r.formatPlural(t,'1 byte','@count bytes',{'@count':t||0})};if(t<1048576){return r.t('@size KB',{'@size':e.round(t/1024,1)})};return r.t('@size MB',{'@size':e.round(t/1048576,1)})};e.formatItemsStatus=function(t,n){return r.t('!items (!size)',{'!items':r.formatPlural(t,'1 item','@count items'),'!size':e.formatSize(n)})};e.prependZero=function(e){return e<10?'0'+e:e};e.round=function(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r};e.getExt=function(e){var t=e.lastIndexOf('.');return t===-1?'':e.substr(t+1)};e.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};e.getFirstItem=function(t,r,n){var o,i;if(typeof n==='undefined'){n=!0};for(o in t){if(e.owns(t,o)){i=t[o];if(!r||(i[r]?n:!n)){return i}}}};e.resolveHandler=function(e,t){if(!e){return};var n,r=t||window,o=e.split('.'),i=o.length;for(n=0;n<i&&(r=r[o[n]]);n++){};return n===i&&r&&r.call&&r.apply?r:!1};e.createEl=function(t){var n,r=e._div;if(!r){r=e._div=document.createElement('div')};r.innerHTML=t;n=r.firstChild;r.removeChild(n);return n};e.createLayer=function(t,r){var n=e.createEl('<div class="imce-layer"></div>');if(t){n.className+=' '+t};if(r!==!1){(r||document.body).appendChild(n)};return n};e.removeEl=function(e){var t=e.parentNode;if(t){t.removeChild(e)}};e.getWindowSize=function(){return{width:window.innerWidth||document.documentElement.clientWidth,height:window.innerHeight||document.documentElement.clientHeight}};e.getWindowScroll=function(){if(typeof window.pageXOffset==='undefined'){var e=document.documentElement;return{left:e.scrollLeft,top:e.scrollTop}};return{left:window.pageXOffset,top:window.pageYOffset}};e.eFix=function(e){return t.event.fix(e||window.event)};e.scrollToEl=function(e,r,n,s){if(e.offsetWidth&&r.scrollHeight>r.clientHeight){var i=t(e).offset().top,u=i+e.offsetHeight,o=t(r).offset().top,a=o+r.offsetHeight;o+=n||0;a-=s||0;if(i<o){r.scrollTop-=o-i+10}
else if(a<u){r.scrollTop+=Math.min(u-a+10,i-o-10)}}};e.countElPerRow=function(e){return Math.max(1,parseInt(e.parentNode.clientWidth/t(e).outerWidth(!0)))};e.fixPosition=function(r){var n=t(r).offset(),o=e.getWindowSize(),i=e.getWindowScroll(),a=18,s=n.left-i.left+r.offsetWidth-o.width+a,u=n.top-i.top+r.offsetHeight-o.height+a;if(s>0){r.style.left=Math.max(0,n.left-s)+'px'};if(u>0){r.style.top=Math.max(0,n.top-u)+'px'}};e.bindDragDrop=function(r,n,o,i){var a={drag:r,drop:n,data:o,isTouch:i};t(document).bind(i?'touchmove':'mousemove',a,e.eDocDrag).bind(i?'touchend':'mouseup',a,e.eDocDrop)};e.eDocDrag=function(t){var r=t.data;if(r.drag){if(r.isTouch){t=e.eTouchFix(t,t.originalEvent.changedTouches[0])};return r.drag.call(this,t)}};e.eDocDrop=function(r){var n=r.data;t(document).unbind(n.isTouch?'touchmove':'mousemove',e.eDocDrag).unbind(n.isTouch?'touchend':'mouseup',e.eDocDrop);if(n.drop){if(n.isTouch){r=e.eTouchFix(r,r.originalEvent.changedTouches[0])};return n.drop.call(this,r)}};e.eTouchFix=function(e,r){e=t.event.fix(e);if(r&&typeof r.pageX!=='undefined'){e.pageX=r.pageX;e.pageY=r.pageY;e.clientX=r.clientX;e.clientY=r.clientY};return e};e.eCommonTouchstart=function(t,r,n){var i,o=t.changedTouches;if(o&&(i=o[0])&&!o[1]){if(r&&r.call){return r.call(n||this,e.eTouchFix(t,i),!0)};return!1}}})(jQuery,Drupal);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/modules/imce/js/imce.js. */