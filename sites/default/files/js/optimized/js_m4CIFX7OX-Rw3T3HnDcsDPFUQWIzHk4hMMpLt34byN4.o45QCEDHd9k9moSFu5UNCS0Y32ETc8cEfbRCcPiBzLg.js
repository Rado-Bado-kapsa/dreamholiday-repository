/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/modules/google_map_field/js/google-map-field-widget-renderer-setter.js. */
(function(e){var a,t;getMarker=function(t,a){var o=e('#edit-marker-icon').val(),l=e('#edit-marker').prop('checked'),i={position:t,optimized:!1,draggable:!0,visible:l,map:a};if(!!o){i.icon=o};return new google.maps.Marker(i)};googleMapFieldSetter=function(i){btns={};btns[Drupal.t('Insert map')]=function(){var t=marker.position,a=e('#edit-zoom').val(),o=e('#edit-type').val(),l=e('#edit-width').val(),r=e('#edit-height').val(),n=e('#edit-traffic').prop('checked')?'1':'0',d=e('#edit-marker').prop('checked')?'1':'0',p=e('#edit-marker-icon').val(),u=e('#edit-controls').prop('checked')?'1':'0',c=e('#edit-infowindow').val();e('input[data-lat-delta="'+i+'"]').prop('value',t.lat()).attr('value',t.lat());e('input[data-lon-delta="'+i+'"]').prop('value',t.lng()).attr('value',t.lng());e('input[data-zoom-delta="'+i+'"]').prop('value',a).attr('value',a);e('input[data-type-delta="'+i+'"]').prop('value',o).attr('value',o);e('input[data-width-delta="'+i+'"]').prop('value',l).attr('value',l);e('input[data-height-delta="'+i+'"]').prop('value',r).attr('value',r);e('input[data-traffic-delta="'+i+'"]').prop('value',n).attr('value',n);e('input[data-marker-delta="'+i+'"]').prop('value',d).attr('value',d);e('input[data-marker-icon-delta="'+i+'"]').prop('value',p).attr('value',p);e('input[data-controls-delta="'+i+'"]').prop('value',u).attr('value',u);e('input[data-infowindow-delta="'+i+'"]').prop('value',c).attr('value',c);googleMapFieldPreviews(i);e(this).dialog('close')};btns[Drupal.t('Cancel')]=function(){e(this).dialog('close')};var o='';o+='<div id="google_map_field_dialog">';o+='  <div>'+Drupal.t('Use the map below to drop a marker at the required location.')+'</div>';o+='  <div id="google_map_field_container">';o+='    <div id="google_map_map_container">';o+='      <div id="gmf_container"></div>';o+='      <div id="centre_on">';o+='        <label>'+Drupal.t('Enter an address/town/postcode, etc., to center the map on:')+'</label><input size="50" type="text" name="centre_map_on" id="centre_map_on" value=""/>';o+='        <button onclick="return doCentre();" type="button" role="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only button">'+Drupal.t('Find')+'</button>';o+='        <div id="map_error"></div>';o+='        <div id="centre_map_results"></div>';o+='      </div>';o+='      <div id="infowindow_container">';o+='        <label for="edit-infowindow">'+Drupal.t('InfoWindow Popup text: (optional)')+'</label>';o+='        <textarea class="form-textarea" id="edit-infowindow" name="infowindow" rows="3"></textarea>';o+='      </div>';o+='    </div>';o+='    <div id="google_map_field_options">';o+='      <label for="edit-zoom">'+Drupal.t('Map Zoom')+'</label>';o+='      <select class="form-select" id="edit-zoom" name="field_zoom"><option value="1">'+Drupal.t('1 (Min)')+'</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">'+Drupal.t('9 (Default)')+'</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option>option value="21">'+Drupal.t('21 (Max)')+'</option></select>';o+='      <label for="edit-type">'+Drupal.t('Map Type')+'</label>';o+='      <select class="form-select" id="edit-type" name="field_type"><option value="roadmap">'+Drupal.t('Map')+'</option><option value="satellite">'+Drupal.t('Satellite')+'</option><option value="hybrid">'+Drupal.t('Hybrid')+'</option><option value="terrain">'+Drupal.t('Terrain')+'</option></select>';o+='      <label for="edit-width">'+Drupal.t('Map Width')+'</label>';o+='      <input type="text" id="edit-width" size="5" maxlength="6" name="field-width" value="" />';o+='      <label for="edit-height">'+Drupal.t('Map Height')+'</label>';o+='      <input type="text" id="edit-height" size="5" maxlength="6" name="field-height" value="" />';o+='      <div class="form-checkbox">';o+='        <input type="checkbox" class="form-checkbox" id="edit-controls" name="field_controls" />';o+='        <label for="edit-controls">'+Drupal.t('Enable controls')+'</label>';o+='      </div>';o+='      <div class="form-checkbox">';o+='        <input type="checkbox" class="form-checkbox" id="edit-traffic" name="field_traffic" />';o+='        <label for="edit-traffic">'+Drupal.t('Traffic layer')+'</label>';o+='      </div>';o+='      <div class="form-checkbox">';o+='        <input type="checkbox" class="form-checkbox" id="edit-marker" name="field_marker" />';o+='        <label for="edit-marker">'+Drupal.t('Enable marker')+'</label>';o+='      </div>';o+='      <label for="edit-marker-icon">'+Drupal.t('Custom marker')+'</label>';o+='      <input type="text" size="10" id="edit-marker-icon" name="field_marker_icon" />';o+='      <p class="marker-text">Markers must be uploaded to your site first. Set an absolute or root-relative path here, eg /sites/default/files/marker.png.</p>';o+='    </div>';o+='  </div>';o+='</div>';e('body').append(o);a=e('#google_map_field_dialog').dialog({modal:!0,autoOpen:!1,width:750,height:640,closeOnEscape:!0,resizable:!1,draggable:!1,title:Drupal.t('Set Map Marker'),dialogClass:'jquery_ui_dialog-dialog',buttons:btns,close:function(t,a){e(this).dialog('destroy').remove()}});a.dialog('open');var p=new google.maps.TrafficLayer();e('#edit-zoom').change(function(){t.setZoom(googleMapFieldValidateZoom(e(this).val()))});e('#edit-type').change(function(){t.setMapTypeId(e(this).val())});e('#edit-controls').change(function(){t.setOptions({disableDefaultUI:!e(this).prop('checked')})});e('#edit-traffic').change(function(){if(e(this).prop('checked')){p.setMap(t)}
else{p.setMap(null)}});e('#edit-marker').change(function(){marker.setVisible(e(this).prop('checked'))});e('#edit-marker-icon').change(function(){marker.setIcon(e(this).val())});var n=e('input[data-lat-delta="'+i+'"]').attr('value'),d=e('input[data-lon-delta="'+i+'"]').attr('value'),r=e('input[data-zoom-delta="'+i+'"]').attr('value'),u=e('input[data-type-delta="'+i+'"]').attr('value'),c=e('input[data-width-delta="'+i+'"]').attr('value'),s=e('input[data-height-delta="'+i+'"]').attr('value'),v=e('input[data-traffic-delta="'+i+'"]').val()==='1',f=e('input[data-marker-delta="'+i+'"]').val()==='1',h=e('input[data-marker-icon-delta="'+i+'"]').attr('value'),m=e('input[data-controls-delta="'+i+'"]').val()==='1',k=e('input[data-infowindow-delta="'+i+'"]').attr('value');n=googleMapFieldValidateLat(n);d=googleMapFieldValidateLon(d);r=googleMapFieldValidateZoom(r);e('#edit-zoom').val(r);e('#edit-type').val(u);e('#edit-width').prop('value',c).attr('value',c);e('#edit-height').prop('value',s).attr('value',s);e('#edit-traffic').prop('checked',v);e('#edit-marker').prop('checked',f);e('#edit-marker-icon').val(h);e('#edit-controls').prop('checked',m);e('#edit-infowindow').val(k);var l=new google.maps.LatLng(n,d),g={zoom:parseInt(r),center:l,streetViewControl:!1,mapTypeId:u,disableDefaultUI:m?!1:!0,};t=new google.maps.Map(document.getElementById('gmf_container'),g);if(v){p.setMap(t)};google.maps.event.addListener(t,'zoom_changed',function(){e('#edit-zoom').val(t.getZoom())});marker=getMarker(l,t);google.maps.event.addListener(t,'click',function(e){l=e.latLng;t.panTo(l);marker.setMap(null);marker=getMarker(l,t)});google.maps.event.addListener(marker,'dragend',function(e){t.panTo(e.latLng)});return!1};doCentreLatLng=function(e,a){var o=new google.maps.LatLng(e,a);t.panTo(o);marker.setMap(null);marker=getMarker(o,t);google.maps.event.addListener(marker,'dragend',function(e){t.panTo(e.latLng)})};doCentre=function(){var t=e('#centre_map_on').val();if(t==''||t==null){e('#centre_map_on').css('border','1px solid red');e('#map_error').html(Drupal.t('Enter a value in the field provided.'));return!1}
else{e('#centre_map_on').css('border','1px solid lightgrey');e('#map_error').html('')};var a=new google.maps.Geocoder();a.geocode({'address':t},function(t,o){e('#centre_map_results').html('');if(o=='OK'){doCentreLatLng(t[0].geometry.location.lat(),t[0].geometry.location.lng());e('#centre_map_results').html(Drupal.formatPlural(t.length,'One result found.','@count results found: '));if(t.length>1){for(var a=0;a<t.length;a++){var i=t[a].geometry.location.lat(),l=t[a].geometry.location.lng(),r=e('<a onclick="return doCentreLatLng('+i+','+l+');">'+(a+1)+'</a>');e('#centre_map_results').append(r)}}}
else{e('#map_error').html(Drupal.t('Could not find location.'))}});return!1}})(jQuery);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/modules/google_map_field/js/google-map-field-widget-renderer-setter.js. */