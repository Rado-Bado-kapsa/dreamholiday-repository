/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/core/misc/machine-name.js. */
(function(e,a,n){a.behaviors.machineName={attach:function(n,t){var i=this,s=e(n),l=null,r=null;function c(e){var a=e.data;a.$wrapper.removeClass('visually-hidden');a.$target.trigger('focus');a.$suffix.hide();a.$source.off('.machineName')};function o(a){var t=a.data,n=t.options,s=e(a.target).val(),o=new RegExp(n.replace_pattern,'g'),c=s.toLowerCase().replace(o,n.replace).substr(0,n.maxlength);if(r&&r.readystate!==4){r.abort();r=null};if(l){clearTimeout(l);l=null};if(s.toLowerCase()!==c){l=setTimeout(function(){r=i.transliterate(s,n).done(function(e){i.showMachineName(e.substr(0,n.maxlength),t)})},300)}
else{i.showMachineName(c,t)}};Object.keys(t.machineName).forEach(function(n){var r=t.machineName[n],p=s.find(n).addClass('machine-name-source').once('machine-name'),l=s.find(r.target).addClass('machine-name-target'),f=s.find(r.suffix),u=l.closest('.js-form-item');if(!p.length||!l.length||!f.length||!u.length){return};if(l.hasClass('error')){return};r.maxlength=l.attr('maxlength');u.addClass('visually-hidden');var h=l.val(),d=e('<span class="machine-name-value">'+r.field_prefix+a.checkPlain(h)+r.field_suffix+'</span>');f.empty();if(r.label){f.append('<span class="machine-name-label">'+r.label+': </span>')};f.append(d);if(l.is(':disabled')){return};var m={$source:p,$target:l,$suffix:f,$wrapper:u,$preview:d,options:r};if(h===''&&p.val()!==''){i.transliterate(p.val(),r).done(function(e){i.showMachineName(e.substr(0,r.maxlength),m)})};var g=e('<span class="admin-link"><button type="button" class="link">'+a.t('Edit')+'</button></span>').on('click',m,c);f.append(g);if(l.val()===''){p.on('formUpdated.machineName',m,o).trigger('formUpdated.machineName')};l.on('invalid',m,c)})},showMachineName:function(e,n){var t=n.options;if(e!==''){if(e!==t.replace){n.$target.val(e);n.$preview.html(t.field_prefix+a.checkPlain(e)+t.field_suffix)};n.$suffix.show()}
else{n.$suffix.hide();n.$target.val(e);n.$preview.empty()}},transliterate:function(t,i){return e.get(a.url('machine_name/transliterate'),{text:t,langcode:n.langcode,replace_pattern:i.replace_pattern,replace_token:i.replace_token,replace:i.replace,lowercase:!0})}}})(jQuery,Drupal,drupalSettings);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/core/misc/machine-name.js. */