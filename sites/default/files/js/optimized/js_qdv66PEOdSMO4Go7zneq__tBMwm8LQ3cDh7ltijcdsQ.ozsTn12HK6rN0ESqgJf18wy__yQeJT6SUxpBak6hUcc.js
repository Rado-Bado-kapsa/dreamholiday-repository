/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/libraries/codemirror/lib/codemirror.js. */
(function(e,t){typeof exports==="object"&&typeof module!=="undefined"?module.exports=t():typeof define==="function"&&define.amd?define(t):(e=e||self,e.CodeMirror=t())}(this,(function(){"use strict";var S=navigator.userAgent,Vn=navigator.platform,q=/gecko\/\d/i.test(S),Un=/MSIE \d/.test(S),zn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(S),mt=/Edge\/(\d+)/.exec(S),l=Un||zn||mt,c=l&&(Un?document.documentMode||6:+(mt||zn)[1]),C=!mt&&/WebKit\//.test(S),Zl=C&&/Qt\/\d+\.\d+/.test(S),gi=!mt&&/Chrome\//.test(S),E=/Opera\//.test(S),En=/Apple Computer/.test(navigator.vendor),la=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(S),sa=/PhantomJS/.test(S),St=!mt&&/AppleWebKit/.test(S)&&/Mobile\/\w+/.test(S),vi=/Android/.test(S),Lt=St||vi||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(S),F=St||/Mac/.test(Vn),ya=/\bCrOS\b/.test(S),Ta=/win/i.test(Vn),Te=E&&S.match(/Version\/(\d*\.\d*)/);if(Te){Te=Number(Te[1])};if(Te&&Te>=15){E=!1;C=!0};var Qn=F&&(Zl||E&&(Te==null||Te<12.11)),xr=q||(l&&c>=9);function Ne(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")};var ve=function(e,t){var r=e.className,i=Ne(t).exec(r);if(i){var n=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(n?i[1]+n:"")}};function se(e){for(var t=e.childNodes.length;t>0;--t){e.removeChild(e.firstChild)};return e};function D(e,t){return se(e).appendChild(t)};function i(e,t,i,r){var n=document.createElement(e);if(i){n.className=i};if(r){n.style.cssText=r};if(typeof t=="string"){n.appendChild(document.createTextNode(t))}
else if(t){for(var o=0;o<t.length;++o){n.appendChild(t[o])}};return n};function We(e,t,r,n){var o=i(e,t,r,n);o.setAttribute("role","presentation");return o};var Me;if(document.createRange){Me=function(e,t,i,r){var n=document.createRange();n.setEnd(r||e,i);n.setStart(e,t);return n}}
else{Me=function(e,t,i){var n=document.body.createTextRange();try{n.moveToElementText(e.parentNode)}catch(r){return n};n.collapse(!0);n.moveEnd("character",i);n.moveStart("character",t);return n}};function ue(e,t){if(t.nodeType==3){t=t.parentNode};if(e.contains){return e.contains(t)};do{if(t.nodeType==11){t=t.host};if(t==e){return!0}}
while(t=t.parentNode)};function Q(){var t;try{t=document.activeElement}catch(e){t=document.body||null}
while(t&&t.shadowRoot&&t.shadowRoot.activeElement){t=t.shadowRoot.activeElement};return t};function ke(e,t){var i=e.className;if(!Ne(t).test(i)){e.className+=(i?" ":"")+t}};function wr(e,t){var as=e.split(" ");for(var i=0;i<as.length;i++){if(as[i]&&!Ne(as[i]).test(t)){t+=" "+as[i]}};return t};var wt=function(e){e.select()};if(St){wt=function(e){e.selectionStart=0;e.selectionEnd=e.value.length}}
else if(l){wt=function(e){try{e.select()}catch(t){}}};function yi(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}};function Le(e,t,i){if(!t){t={}};for(var r in e){if(e.hasOwnProperty(r)&&(i!==!1||!t.hasOwnProperty(r))){t[r]=e[r]}};return t};function H(e,t,i,r,n){if(t==null){t=e.search(/[^\s\u00a0]/);if(t==-1){t=e.length}};for(var l=r||0,s=n||0;;){var o=e.indexOf("\t",l);if(o<0||o>=t){return s+(t-l)};s+=o-l;s+=i-(s%i);l=o+1}};var ie=function(){this.id=null;this.f=null;this.time=0;this.handler=yi(this.onTimeout,this)};ie.prototype.onTimeout=function(e){e.id=0;if(e.time<=+new Date){e.f()}
else{setTimeout(e.handler,e.time-+new Date)}};ie.prototype.set=function(e,t){this.f=t;var i=+new Date+e;if(!this.id||i<this.time){clearTimeout(this.id);this.id=setTimeout(this.handler,e);this.time=i}};function x(e,t){for(var i=0;i<e.length;++i){if(e[i]==t){return i}};return-1};var Jn=30,Qt={toString:function(){return"CodeMirror.Pass"}};var j={scroll:!1},Cr={origin:"*mouse"},xt={origin:"+move"};function Wr(e,t,i){for(var n=0,o=0;;){var r=e.indexOf("\t",n);if(r==-1){r=e.length};var l=r-n;if(r==e.length||o+l>=t){return n+Math.min(l,t-o)};o+=r-n;o+=i-(o%i);n=r+1;if(o>=t){return n}}};var ei=[""];function br(e){while(ei.length<=e){ei.push(a(ei)+" ")};return ei[e]};function a(e){return e[e.length-1]};function mi(e,t){var r=[];for(var i=0;i<e.length;i++){r[i]=t(e[i],i)};return r};function Sa(e,t,i){var r=0,n=i(t);while(r<e.length&&i(e[r])<=n){r++};e.splice(r,0,t)};function Rr(){};function Er(e,t){var i;if(Object.create){i=Object.create(e)}
else{Rr.prototype=e;i=new Rr()};if(t){Le(t,i)};return i};var Zs=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function mr(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||Zs.test(e))};function bi(e,t){if(!t){return mr(e)};if(t.source.indexOf("\\w")>-1&&mr(e)){return!0};return t.test(e)};function un(e){for(var t in e){if(e.hasOwnProperty(t)&&e[t]){return!1}};return!0};var ea=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function or(e){return e.charCodeAt(0)>=768&&ea.test(e)};function pn(e,t,i){while((i<0?t>0:t<e.length)&&or(e.charAt(t))){t+=i};return t};function et(e,t,i){var o=t>i?-1:1;for(;;){if(t==i){return t};var n=(t+i)/2,r=o<0?Math.ceil(n):Math.floor(n);if(r==t){return e(r)?t:i};if(e(r)){i=r}
else{t=r+o}}};function ga(e,t,i,r){if(!e){return r(t,i,"ltr",0)};var l=!1;for(var o=0;o<e.length;++o){var n=e[o];if(n.from<i&&n.to>t||t==i&&n.to==t){r(Math.max(n.from,t),Math.min(n.to,i),n.level==1?"rtl":"ltr",o);l=!0}};if(!l){r(t,i,"ltr")}};var kt=null;function Qe(e,t,i){var o;kt=null;for(var n=0;n<e.length;++n){var r=e[n];if(r.from<t&&r.to>t){return n};if(r.to==t){if(r.from!=r.to&&i=="before"){o=n}
else{kt=n}};if(r.from==t){if(r.from!=r.to&&i!="before"){o=n}
else{kt=n}}};return o!=null?o:kt};var ta=(function(){var l="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function u(e){if(e<=0xf7){return l.charAt(e)}
else if(0x590<=e&&e<=0x5f4){return"R"}
else if(0x600<=e&&e<=0x6f9){return s.charAt(e-0x600)}
else if(0x6ee<=e&&e<=0x8ac){return"r"}
else if(0x2000<=e&&e<=0x200b){return"w"}
else if(e==0x200c){return"b"}
else{return"L"}};var o=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,t=/[stwN]/,i=/[LRr]/,r=/[Lb1n]/,n=/[1n]/;function e(e,t,i){this.level=e;this.from=t;this.to=i};return function(l,s){var x=s=="ltr"?"L":"R";if(l.length==0||s=="ltr"&&!o.test(l)){return!1};var h=l.length,f=[];for(var W=0;W<h;++W){f.push(u(l.charCodeAt(W)))};for(var M=0,P=x;M<h;++M){var E=f[M];if(E=="m"){f[M]=P}
else{P=E}};for(var L=0,R=x;L<h;++L){var N=f[L];if(N=="1"&&R=="r"){f[L]="n"}
else if(i.test(N)){R=N;if(N=="r"){f[L]="R"}}};for(var b=1,w=f[0];b<h-1;++b){var H=f[b];if(H=="+"&&w=="1"&&f[b+1]=="1"){f[b]="1"}
else if(H==","&&w==f[b+1]&&(w=="1"||w=="n")){f[b]=w};w=H};for(var g=0;g<h;++g){var z=f[g];if(z==","){f[g]="N"}
else if(z=="%"){var m=(void 0);for(m=g+1;m<h&&f[m]=="%";++m){};var V=(g&&f[g-1]=="!")||(m<h&&f[m]=="1")?"1":"N";for(var D=g;D<m;++D){f[D]=V};g=m-1}};for(var T=0,F=x;T<h;++T){var O=f[T];if(F=="L"&&O=="1"){f[T]="L"}
else if(i.test(O)){F=O}};for(var y=0;y<h;++y){if(t.test(f[y])){var v=(void 0);for(v=y+1;v<h&&t.test(f[v]);++v){};var B=(y?f[y-1]:x)=="L",G=(v<h?f[v]:x)=="L",j=B==G?(B?"L":"R"):x;for(var A=y;A<v;++A){f[A]=j};y=v-1}};var d=[],C;for(var c=0;c<h;){if(r.test(f[c])){var U=c;for(++c;c<h&&r.test(f[c]);++c){};d.push(new e(0,U,c))}
else{var S=c,k=d.length,I=s=="rtl"?1:0;for(++c;c<h&&f[c]!="L";++c){};for(var p=S;p<c;){if(n.test(f[p])){if(S<p){d.splice(k,0,new e(1,S,p));k+=I};var K=p;for(++p;p<c&&n.test(f[p]);++p){};d.splice(k,0,new e(2,K,p));k+=I;S=p}
else{++p}};if(S<c){d.splice(k,0,new e(1,S,c))}}};if(s=="ltr"){if(d[0].level==1&&(C=l.match(/^\s+/))){d[0].from=C[0].length;d.unshift(new e(0,0,C[0].length))};if(a(d).level==1&&(C=l.match(/\s+$/))){a(d).to-=C[0].length;d.push(new e(0,h-C[0].length,h))}};return s=="rtl"?d.reverse():d}})();function Y(e,t){var i=e.order;if(i==null){i=e.order=ta(e.text,t)};return i};var Ln=[],r=function(e,t,i){if(e.addEventListener){e.addEventListener(t,i,!1)}
else if(e.attachEvent){e.attachEvent("on"+t,i)}
else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Ln).concat(i)}};function vr(e,t){return e._handlers&&e._handlers[t]||Ln};function A(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i,!1)}
else if(e.detachEvent){e.detachEvent("on"+t,i)}
else{var o=e._handlers,r=o&&o[t];if(r){var n=x(r,i);if(n>-1){o[t]=r.slice(0,n).concat(r.slice(n+1))}}}};function g(e,t){var r=vr(e,t);if(!r.length){return};var n=Array.prototype.slice.call(arguments,2);for(var i=0;i<r.length;++i){r[i].apply(null,n)}};function y(e,t,i){if(typeof t=="string"){t={type:t,preventDefault:function(){this.defaultPrevented=!0}}};g(e,i||t.type,e,t);return gr(t)||t.codemirrorIgnore};function to(e){var i=e._handlers&&e._handlers.cursorActivity;if(!i){return};var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]);for(var t=0;t<i.length;++t){if(x(r,i[t])==-1){r.push(i[t])}}};function P(e,t){return vr(e,t).length>0};function Oe(e){e.prototype.on=function(e,t){r(this,e,t)};e.prototype.off=function(e,t){A(this,e,t)}};function M(e){if(e.preventDefault){e.preventDefault()}
else{e.returnValue=!1}};function en(e){if(e.stopPropagation){e.stopPropagation()}
else{e.cancelBubble=!0}};function gr(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1};function ut(e){M(e);en(e)};function pr(e){return e.target||e.srcElement};function rn(e){var t=e.which;if(t==null){if(e.button&1){t=1}
else if(e.button&2){t=3}
else if(e.button&4){t=2}};if(F&&e.ctrlKey&&t==1){t=3};return t};var ra=function(){if(l&&c<9){return!1};var e=i("div");return"draggable" in e||"dragDrop" in e}(),Sr;function vs(e){if(Sr==null){var t=i("span","\u200b");D(e,i("span",[t,document.createTextNode("x")]));if(e.firstChild.offsetHeight!=0){Sr=t.offsetWidth<=1&&t.offsetHeight>2&&!(l&&c<8)}};var r=Sr?i("span","\u200b"):i("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");r.setAttribute("cm-text","");return r};var Lr;function gs(e){if(Lr!=null){return Lr};var i=D(e,document.createTextNode("A\u062eA")),t=Me(i,0,1).getBoundingClientRect(),r=Me(i,1,2).getBoundingClientRect();se(e);if(!t||t.left==t.right){return!1};return Lr=(r.right-t.right<3)};var Tr="\n\nb".split(/\n/).length!=3?function(e){var i=0,o=[],l=e.length;while(i<=l){var t=e.indexOf("\n",i);if(t==-1){t=e.length};var r=e.slice(i,e.charAt(t-1)=="\r"?t-1:t),n=r.indexOf("\r");if(n!=-1){o.push(r.slice(0,n));i+=n+1}
else{o.push(r);i=t+1}};return o}:function(e){return e.split(/\r\n?|\n/)},bl=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var i;try{i=e.ownerDocument.selection.createRange()}catch(t){};if(!i||i.parentElement()!=e){return!1};return i.compareEndPoints("StartToEnd",i)!=0},Ql=(function(){var e=i("div");if("oncopy" in e){return!0};e.setAttribute("oncopy","return;");return typeof e.oncopy=="function"})(),kr=null;function ds(e){if(kr!=null){return kr};var t=D(e,i("span","x")),r=t.getBoundingClientRect(),n=Me(t,0,1).getBoundingClientRect();return kr=Math.abs(r.left-n.left)>1};var Mr={},ze={};function hs(e,t){if(arguments.length>2){t.dependencies=Array.prototype.slice.call(arguments,2)};Mr[e]=t};function cs(e,t){ze[e]=t};function xi(e){if(typeof e=="string"&&ze.hasOwnProperty(e)){e=ze[e]}
else if(e&&typeof e.name=="string"&&ze.hasOwnProperty(e.name)){var t=ze[e.name];if(typeof t=="string"){t={name:t}};e=Er(t,e);e.name=t.name}
else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e)){return xi("application/xml")}
else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e)){return xi("application/json")};if(typeof e=="string"){return{name:e}}
else{return e||{name:"null"}}};function dr(e,t){t=xi(t);var l=Mr[t.name];if(!l){return dr(e,"text/plain")};var i=l(e,t);if(qe.hasOwnProperty(t.name)){var n=qe[t.name];for(var r in n){if(!n.hasOwnProperty(r)){continue};if(i.hasOwnProperty(r)){i["_"+r]=i[r]};i[r]=n[r]}};i.name=t.name;if(t.helperType){i.helperType=t.helperType};if(t.modeProps){for(var o in t.modeProps){i[o]=t.modeProps[o]}};return i};var qe={};function ls(e,t){var i=qe.hasOwnProperty(e)?qe[e]:(qe[e]={});Le(t,i)};function me(e,t){if(t===!0){return t};if(e.copyState){return e.copyState(t)};var n={};for(var r in t){var i=t[r];if(i instanceof Array){i=i.concat([])};n[r]=i};return n};function hr(e,t){var i;while(e.innerMode){i=e.innerMode(t);if(!i||i.mode==e){break};t=i.state;e=i.mode};return i||{mode:e,state:t}};function tl(e,t,i){return e.startState?e.startState(t,i):!0};var p=function(e,t,i){this.pos=this.start=0;this.string=e;this.tabSize=t||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0;this.lineOracle=i};p.prototype.eol=function(){return this.pos>=this.string.length};p.prototype.sol=function(){return this.pos==this.lineStart};p.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};p.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};p.prototype.eat=function(e){var t=this.string.charAt(this.pos),i;if(typeof e=="string"){i=t==e}
else{i=t&&(e.test?e.test(t):e(t))};if(i){++this.pos;return t}};p.prototype.eatWhile=function(e){var t=this.pos;while(this.eat(e)){};return this.pos>t};p.prototype.eatSpace=function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos};return this.pos>e};p.prototype.skipToEnd=function(){this.pos=this.string.length};p.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1){this.pos=t;return!0}};p.prototype.backUp=function(e){this.pos-=e};p.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=H(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start};return this.lastColumnValue-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)};p.prototype.indentation=function(){return H(this.string,null,this.tabSize)-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)};p.prototype.match=function(e,t,i){if(typeof e=="string"){var n=function(e){return i?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(n(o)==n(e)){if(t!==!1){this.pos+=e.length};return!0}}
else{var r=this.string.slice(this.pos).match(e);if(r&&r.index>0){return null};if(r&&t!==!1){this.pos+=r[0].length};return r}};p.prototype.current=function(){return this.string.slice(this.start,this.pos)};p.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}};p.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)};p.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function t(e,t){t-=e.first;if(t<0||t>=e.size){throw new Error("There is no line "+(t+e.first)+" in the document.")};var i=e;while(!i.lines){for(var o=0;;++o){var r=i.children[o],n=r.chunkSize();if(t<n){i=r;break};t-=n}};return i.lines[t]};function de(e,t,i){var n=[],r=t.line;e.iter(t.line,i.line+1,function(e){var o=e.text;if(r==i.line){o=o.slice(0,i.ch)};if(r==t.line){o=o.slice(t.ch)};n.push(o);++r});return n};function cr(e,t,i){var r=[];e.iter(t,i,function(e){r.push(e.text)});return r};function K(e,t){var r=t-e.height;if(r){for(var i=e;i;i=i.parent){i.height+=r}}};function u(e){if(e.parent==null){return null};var i=e.parent,n=x(i.lines,e);for(var t=i.parent;t;i=t,t=t.parent){for(var r=0;;++r){if(t.children[r]==i){break};n+=t.children[r].chunkSize()}};return n+i.first};function Se(e,t){var o=e.first;outer:do{for(var n=0;n<e.children.length;++n){var r=e.children[n],s=r.height;if(t<s){e=r;continue;outer};t-=s;o+=r.chunkSize()};return o}
while(!e.lines)var i=0;for(;i<e.lines.length;++i){var a=e.lines[i],l=a.height;if(t<l){break};t-=l};return o+i};function Nt(e,t){return t>=e.first&&t<e.first+e.size};function fr(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))};function e(t,i,r){if(r===void 0)r=null;if(!(this instanceof e)){return new e(t,i,r)};this.line=t;this.ch=i;this.sticky=r};function o(e,t){return e.line-t.line||e.ch-t.ch};function ur(e,t){return e.sticky==t.sticky&&o(e,t)==0};function ar(t){return e(t.line,t.ch)};function Et(e,t){return o(e,t)<0?t:e};function Bt(e,t){return o(e,t)<0?e:t};function el(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))};function n(i,r){if(r.line<i.first){return e(i.first,0)};var n=i.first+i.size-1;if(r.line>n){return e(n,t(i,n).text.length)};return es(r,t(i,r.line).text.length)};function es(t,i){var r=t.ch;if(r==null||r>i){return e(t.line,i)}
else if(r<0){return e(t.line,0)}
else{return t}};function rl(e,t){var r=[];for(var i=0;i<t.length;i++){r[i]=n(e,t[i])};return r};var Zt=function(e,t){this.state=e;this.lookAhead=t},U=function(e,t,i,r){this.state=t;this.doc=e;this.line=i;this.maxLookAhead=r||0;this.baseTokens=null;this.baseTokenPos=1};U.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);if(t!=null&&e>this.maxLookAhead){this.maxLookAhead=e};return t};U.prototype.baseToken=function(e){if(!this.baseTokens){return null}
while(this.baseTokens[this.baseTokenPos]<=e){this.baseTokenPos+=2};var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}};U.prototype.nextLine=function(){this.line++;if(this.maxLookAhead>0){this.maxLookAhead--}};U.fromSaved=function(e,t,i){if(t instanceof Zt){return new U(e,me(e.mode,t.state),i,t.lookAhead)}
else{return new U(e,me(e.mode,t),i)}};U.prototype.save=function(e){var t=e!==!1?me(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Zt(t,this.maxLookAhead):t};function zo(e,t,i,r){var n=[e.state.modeGen],o={};po(e,t.text,e.doc.mode,i,function(e,t){return n.push(e,t)},o,r);var s=i.state,a=function(r){i.baseTokens=n;var a=e.state.overlays[r],l=1,u=0;i.state=!0;po(e,t.text,a.mode,i,function(e,t){var i=l;while(u<e){var r=n[l];if(r>e){n.splice(l,1,e,n[l+1],r)};l+=2;u=Math.min(e,r)};if(!t){return};if(a.opaque){n.splice(i,l-i,e,"overlay "+t);l=i+2}
else{for(;i<l;i+=2){var o=n[i+1];n[i+1]=(o?o+" ":"")+"overlay "+t}}},o);i.state=s;i.baseTokens=null;i.baseTokenPos=1};for(var l=0;l<e.state.overlays.length;++l)a(l);return{styles:n,classes:o.bgClass||o.textClass?o:null}};function xo(e,t,i){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=Wt(e,u(t)),n=t.text.length>e.options.maxHighlightLength&&me(e.doc.mode,r.state),o=zo(e,t,r);if(n){r.state=n};t.stateAfter=r.save(!n);t.styles=o.styles;if(o.classes){t.styleClasses=o.classes}
else if(t.styleClasses){t.styleClasses=null};if(i===e.doc.highlightFrontier){e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier)}};return t.styles};function Wt(e,i,r){var n=e.doc,a=e.display;if(!n.mode.startState){return new U(n,!0,i)};var l=Is(e,i,r),s=l>n.first&&t(n,l-1).stateAfter,o=s?U.fromSaved(n,s,l):new U(n,tl(n.mode),l);n.iter(l,i,function(t){sr(e,t.text,o);var r=o.line;t.stateAfter=r==i-1||r%5==0||r>=a.viewFrom&&r<a.viewTo?o.save():null;o.nextLine()});if(r){n.modeFrontier=o.line};return o};function sr(e,t,i,r){var o=e.doc.mode,n=new p(t,e.options.tabSize,i);n.start=n.pos=r||0;if(t==""){yo(o,i.state)}
while(!n.eol()){lr(o,n,i.state);n.start=n.pos}};function yo(e,t){if(e.blankLine){return e.blankLine(t)};if(!e.innerMode){return};var i=hr(e,t);if(i.mode.blankLine){return i.mode.blankLine(i.state)}};function lr(e,t,i,r){for(var n=0;n<10;n++){if(r){r[0]=hr(e,i).mode};var o=e.token(t,i);if(t.pos>t.start){return o}};throw new Error("Mode "+e.name+" failed to advance stream.")};var kn=function(e,t,i){this.start=e.start;this.end=e.pos;this.string=e.current();this.type=t||null;this.state=i};function vo(e,i,r,o){var a=e.doc,h=a.mode,f;i=n(a,i);var c=t(a,i.line),s=Wt(e,i.line,r),l=new p(c.text,e.options.tabSize,s),u;if(o){u=[]}
while((o||l.pos<i.ch)&&!l.eol()){l.start=l.pos;f=lr(h,l,s.state);if(o){u.push(new kn(l,f,me(a.mode,s.state)))}};return o?u:new kn(l,f,s.state)};function go(e,t){if(e){for(;;){var i=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break};e=e.slice(0,i.index)+e.slice(i.index+i[0].length);var r=i[1]?"bgClass":"textClass";if(t[r]==null){t[r]=i[2]}
else if(!(new RegExp("(?:^|\s)"+i[2]+"(?:$|\s)")).test(t[r])){t[r]+=" "+i[2]}}};return e};function po(e,t,i,r,n,l,u){var c=i.flattenSpans;if(c==null){c=e.options.flattenSpans};var s=0,f=null,o=new p(t,e.options.tabSize,r),a,d=e.options.addModeClass&&[null];if(t==""){go(yo(i,r.state),l)}
while(!o.eol()){if(o.pos>e.options.maxHighlightLength){c=!1;if(u){sr(e,t,r,o.pos)};o.pos=t.length;a=null}
else{a=go(lr(i,o,r.state,d),l)};if(d){var h=d[0].name;if(h){a="m-"+(a?h+" "+a:h)}};if(!c||f!=a){while(s<o.start){s=Math.min(o.start,s+5000);n(s,f)};f=a};o.start=o.pos}
while(s<o.pos){var g=Math.min(o.pos,s+5000);n(g,f);s=g}};function Is(e,i,r){var f,s,o=e.doc,c=r?-1:i-(e.doc.mode.innerMode?1000:100);for(var n=i;n>c;--n){if(n<=o.first){return o.first};var u=t(o,n-1),l=u.stateAfter;if(l&&(!r||n+(l instanceof Zt?l.lookAhead:0)<=o.modeFrontier)){return n};var a=H(u.text,null,e.options.tabSize);if(s==null||f>a){s=n-1;f=a}};return s};function Es(e,i){e.modeFrontier=Math.min(e.modeFrontier,i);if(e.highlightFrontier<i-10){return};var o=e.first;for(var r=i-1;r>o;r--){var n=t(e,r).stateAfter;if(n&&(!(n instanceof Zt)||r+n.lookAhead<i)){o=r+1;break}};e.highlightFrontier=Math.min(e.highlightFrontier,o)};var Jr=!1,ee=!1;function Ps(){Jr=!0};function Fs(){ee=!0};function Rt(e,t,i){this.marker=e;this.from=t;this.to=i};function Tt(e,t){if(e){for(var i=0;i<e.length;++i){var r=e[i];if(r.marker==t){return r}}}};function Hs(e,t){var r;for(var i=0;i<e.length;++i){if(e[i]!=t){(r||(r=[])).push(e[i])}};return r};function Ws(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t];t.marker.attachLine(e)};function Ds(e,t,i){var l;if(e){for(var o=0;o<e.length;++o){var r=e[o],n=r.marker,a=r.from==null||(n.inclusiveLeft?r.from<=t:r.from<t);if(a||r.from==t&&n.type=="bookmark"&&(!i||!r.marker.insertLeft)){var s=r.to==null||(n.inclusiveRight?r.to>=t:r.to>t);(l||(l=[])).push(new Rt(n,r.from,s?null:r.to))}}};return l};function As(e,t,i){var l;if(e){for(var o=0;o<e.length;++o){var r=e[o],n=r.marker,a=r.to==null||(n.inclusiveRight?r.to>=t:r.to>t);if(a||r.from==t&&n.type=="bookmark"&&(!i||r.marker.insertLeft)){var s=r.from==null||(n.inclusiveLeft?r.from<=t:r.from<t);(l||(l=[])).push(new Rt(n,s?null:r.from-t,r.to==null?null:r.to-t))}}};return l};function Dr(e,i){if(i.full){return null};var x=Nt(e,i.from.line)&&t(e,i.from.line).markedSpans,C=Nt(e,i.to.line)&&t(e,i.to.line).markedSpans;if(!x&&!C){return null};var v=i.from.ch,L=i.to.ch,y=o(i.from,i.to)==0,r=Ds(x,v,y),n=As(C,L,y),s=i.text.length==1,u=a(i.text).length+(s?v:0);if(r){for(var g=0;g<r.length;++g){var f=r[g];if(f.to==null){var d=Tt(n,f.marker);if(!d){f.to=v}
else if(s){f.to=d.to==null?null:d.to+u}}}};if(n){for(var h=0;h<n.length;++h){var l=n[h];if(l.to!=null){l.to+=u};if(l.from==null){var S=Tt(r,l.marker);if(!S){l.from=u;if(s){(r||(r=[])).push(l)}}}
else{l.from+=u;if(s){(r||(r=[])).push(l)}}}};if(r){r=Wo(r)};if(n&&n!=r){n=Wo(n)};var p=[r];if(!s){var b=i.text.length-2,m;if(b>0&&r){for(var c=0;c<r.length;++c){if(r[c].to==null){(m||(m=[])).push(new Rt(r[c].marker,null,null))}}};for(var w=0;w<b;++w){p.push(m)};p.push(n)};return p};function Wo(e){for(var i=0;i<e.length;++i){var t=e[i];if(t.from!=null&&t.from==t.to&&t.marker.clearWhenEmpty!==!1){e.splice(i--,1)}};if(!e.length){return null};return e};function ks(e,t,i){var r=null;e.iter(t.line,i.line+1,function(e){if(e.markedSpans){for(var i=0;i<e.markedSpans.length;++i){var t=e.markedSpans[i].marker;if(t.readOnly&&(!r||x(r,t)==-1)){(r||(r=[])).push(t)}}}});if(!r){return null};var a=[{from:t,to:i}];for(var c=0;c<r.length;++c){var f=r[c],l=f.find(0);for(var s=0;s<a.length;++s){var n=a[s];if(o(n.to,l.from)<0||o(n.from,l.to)>0){continue};var u=[s,1],h=o(n.from,l.from),d=o(n.to,l.to);if(h<0||!f.inclusiveLeft&&!h){u.push({from:n.from,to:l.from})};if(d>0||!f.inclusiveRight&&!d){u.push({from:l.to,to:n.to})};a.splice.apply(a,u);s+=u.length-3}};return a};function No(e){var i=e.markedSpans;if(!i){return};for(var t=0;t<i.length;++t){i[t].marker.detachLine(e)};e.markedSpans=null};function Mo(e,t){if(!t){return};for(var i=0;i<t.length;++i){t[i].marker.attachLine(e)};e.markedSpans=t};function Kt(e){return e.inclusiveLeft?-1:0};function Gt(e){return e.inclusiveRight?1:0};function yr(e,t){var s=e.lines.length-t.lines.length;if(s!=0){return s};var r=e.find(),n=t.find(),l=o(r.from,n.from)||Kt(e)-Kt(t);if(l){return-l};var i=o(r.to,n.to)||Gt(e)-Gt(t);if(i){return i};return t.id-e.id};function Lo(e,t){var o=ee&&e.markedSpans,r;if(o){for(var i=(void 0),n=0;n<o.length;++n){i=o[n];if(i.marker.collapsed&&(t?i.from:i.to)==null&&(!r||yr(r,i.marker)<0)){r=i.marker}}};return r};function So(e){return Lo(e,!0)};function zt(e){return Lo(e,!1)};function xs(e,t){var o=ee&&e.markedSpans,r;if(o){for(var n=0;n<o.length;++n){var i=o[n];if(i.marker.collapsed&&(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||yr(r,i.marker)<0)){r=i.marker}}};return r};function jo(e,i,r,n,l){var d=t(e,i),c=ee&&d.markedSpans;if(c){for(var f=0;f<c.length;++f){var a=c[f];if(!a.marker.collapsed){continue};var s=a.marker.find(0),u=o(s.from,r)||Kt(a.marker)-Kt(l),h=o(s.to,n)||Gt(a.marker)-Gt(l);if(u>=0&&h<=0||u<=0&&h>=0){continue};if(u<=0&&(a.marker.inclusiveRight&&l.inclusiveLeft?o(s.to,r)>=0:o(s.to,r)>0)||u>=0&&(a.marker.inclusiveRight&&l.inclusiveLeft?o(s.from,n)<=0:o(s.from,n)<0)){return!0}}}};function G(e){var t;while(t=So(e)){e=t.find(-1,!0).line};return e};function os(e){var t;while(t=zt(e)){e=t.find(1,!0).line};return e};function bs(e){var i,t;while(i=zt(e)){e=i.find(1,!0).line;(t||(t=[])).push(e)};return t};function Hr(e,i){var r=t(e,i),n=G(r);if(r==n){return i};return u(n)};function Gr(e,i){if(i>e.lastLine()){return i};var r=t(e,i),n;if(!ae(e,r)){return i}
while(n=zt(r)){r=n.find(1,!0).line};return u(r)+1};function ae(e,t){var n=ee&&t.markedSpans;if(n){for(var i=(void 0),r=0;r<n.length;++r){i=n[r];if(!i.marker.collapsed){continue};if(i.from==null){return!0};if(i.marker.widgetNode){continue};if(i.from==0&&i.marker.inclusiveLeft&&nr(e,t,i)){return!0}}}};function nr(e,t,i){if(i.to==null){var o=i.marker.find(1,!0);return nr(e,o.line,Tt(o.line.markedSpans,i.marker))};if(i.marker.inclusiveRight&&i.to==t.text.length){return!0};for(var r=(void 0),n=0;n<t.markedSpans.length;++n){r=t.markedSpans[n];if(r.marker.collapsed&&!r.marker.widgetNode&&r.from==i.to&&(r.to==null||r.to!=i.from)&&(r.marker.inclusiveLeft||i.marker.inclusiveRight)&&nr(e,t,r)){return!0}}};function J(e){e=G(e);var o=0,t=e.parent;for(var n=0;n<t.lines.length;++n){var s=t.lines[n];if(s==e){break}
else{o+=s.height}};for(var i=t.parent;i;t=i,i=t.parent){for(var r=0;r<i.children.length;++r){var l=i.children[r];if(l==t){break}
else{o+=l.height}}};return o};function pi(e){if(e.height==0){return 0};var i=e.text.length,r,t=e;while(r=So(t)){var o=r.find(0,!0);t=o.from.line;i+=o.from.ch-o.to.ch};t=e;while(r=zt(t)){var n=r.find(0,!0);i-=t.text.length-n.from.ch;t=n.to.line;i+=t.text.length-n.to.ch};return i};function Oi(e){var i=e.display,r=e.doc;i.maxLine=t(r,r.first);i.maxLineLength=pi(i.maxLine);i.maxLineChanged=!0;r.iter(function(e){var t=pi(e);if(t>i.maxLineLength){i.maxLineLength=t;i.maxLine=e}})};var Fe=function(e,t,i){this.text=e;Mo(this,t);this.height=i?i(this):1};Fe.prototype.lineNo=function(){return u(this)};Oe(Fe);function ul(e,t,i,r){e.text=t;if(e.stateAfter){e.stateAfter=null};if(e.styles){e.styles=null};if(e.order!=null){e.order=null};No(e);Mo(e,i);var n=r?r(e):1;if(n!=e.height){K(e,n)}};function Pl(e){e.parent=null;No(e)};var jl={},Tl={};function fo(e,t){if(!e||/^\s*$/.test(e)){return null};var i=t.addModeClass?Tl:jl;return i[e]||(i[e]=e.replace(/\S+/g,"cm-$&"))};function Wn(e,t){var s=We("span",null,null,C?"padding-right: .1px":null),i={pre:We("pre",[s],"CodeMirror-line"),content:s,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var n=0;n<=(t.rest?t.rest.length:0);n++){var r=n?t.rest[n-1]:t.line,l=(void 0);i.pos=0;i.addToken=oa;if(gs(e.display.measure)&&(l=Y(r,e.doc.direction))){i.addToken=ia(i.addToken,l)};i.map=[];var a=t!=e.display.externalMeasured&&u(r);Ys(r,i,xo(e,r,a));if(r.styleClasses){if(r.styleClasses.bgClass){i.bgClass=wr(r.styleClasses.bgClass,i.bgClass||"")};if(r.styleClasses.textClass){i.textClass=wr(r.styleClasses.textClass,i.textClass||"")}};if(i.map.length==0){i.map.push(0,0,i.content.appendChild(vs(e.display.measure)))};if(n==0){t.measure.map=i.map;t.measure.cache={}}
else{(t.measure.maps||(t.measure.maps=[])).push(i.map);(t.measure.caches||(t.measure.caches=[])).push({})}};if(C){var o=i.content.lastChild;if(/\bcm-tab\b/.test(o.className)||(o.querySelector&&o.querySelector(".cm-tab"))){i.content.className="cm-tab-wrap-hack"}};g(e,"renderLine",e,t.line,i.pre);if(i.pre.className){i.textClass=wr(i.pre.className,i.textClass||"")};return i};function yl(e){var t=i("span","\u2022","cm-invalidchar");t.title="\\u"+e.charCodeAt(0).toString(16);t.setAttribute("aria-label",t.title);return t};function oa(e,t,r,n,o,h,f){if(!t){return};var y=e.splitSpaces?na(t,e.trailingSpace):t,b=e.cm.state.specialChars,C=!1,s;if(!b.test(t)){e.col+=t.length;s=document.createTextNode(y);e.map.push(e.pos,e.pos+t.length,s);if(l&&c<9){C=!0};e.pos+=t.length}
else{s=document.createDocumentFragment();var p=0;while(!0){b.lastIndex=p;var a=b.exec(t),d=a?a.index-p:t.length-p;if(d){var m=document.createTextNode(y.slice(p,p+d));if(l&&c<9){s.appendChild(i("span",[m]))}
else{s.appendChild(m)};e.map.push(e.pos,e.pos+d,m);e.col+=d;e.pos+=d};if(!a){break};p+=d+1;var u=(void 0);if(a[0]=="\t"){var S=e.cm.options.tabSize,x=S-e.col%S;u=s.appendChild(i("span",br(x),"cm-tab"));u.setAttribute("role","presentation");u.setAttribute("cm-text","\t");e.col+=x}
else if(a[0]=="\r"||a[0]=="\n"){u=s.appendChild(i("span",a[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));u.setAttribute("cm-text",a[0]);e.col+=1}
else{u=e.cm.options.specialCharPlaceholder(a[0]);u.setAttribute("cm-text",a[0]);if(l&&c<9){s.appendChild(i("span",[u]))}
else{s.appendChild(u)};e.col+=1};e.map.push(e.pos,e.pos+1,u);e.pos++}};e.trailingSpace=y.charCodeAt(t.length-1)==32;if(r||n||o||C||h){var v=r||"";if(n){v+=n};if(o){v+=o};var w=i("span",[s],v,h);if(f){for(var g in f){if(f.hasOwnProperty(g)&&g!="style"&&g!="class"){w.setAttribute(g,f[g])}}};return e.content.appendChild(w)};e.content.appendChild(s)};function na(e,t){if(e.length>1&&!/  /.test(e)){return e};var n=t,o="";for(var i=0;i<e.length;i++){var r=e.charAt(i);if(r==" "&&n&&(i==e.length-1||e.charCodeAt(i+1)==32)){r="\u00a0"};o+=r;n=r==" "};return o};function ia(e,t){return function(i,r,n,o,l,s,u){n=n?n+" cm-force-border":"cm-force-border";var f=i.pos,h=f+r.length;for(;;){var a=(void 0);for(var c=0;c<t.length;c++){a=t[c];if(a.to>f&&a.from<=f){break}};if(a.to>=h){return e(i,r,n,o,l,s,u)};e(i,r.slice(0,a.to-f),n,o,null,s,u);o=null;r=r.slice(a.to-f);f=a.to}}};function jn(e,t,i,r){var n=!r&&i.widgetNode;if(n){e.map.push(e.pos,e.pos+t,n)};if(!r&&e.cm.display.input.needsContentAttribute){if(!n){n=e.content.appendChild(document.createElement("span"))};n.setAttribute("cm-marker",i.id)};if(n){e.cm.display.input.setUneditable(n);e.content.appendChild(n)};e.pos+=t;e.trailingSpace=!1};function Ys(e,t,i){var L=e.markedSpans,k=e.text,m=0;if(!L){for(var d=1;d<i.length;d+=2){t.addToken(t,k.slice(m,m=i[d]),fo(i[d+1],t.cm.options))};return};var w=k.length,r=0,M=1,a="",b,h,s=0,v,g,p,l,u;for(;;){if(s==r){v=g=p=h="";u=null;l=null;s=Infinity;var x=[],f=(void 0);for(var C=0;C<L.length;++C){var o=L[C],n=o.marker;if(n.type=="bookmark"&&o.from==r&&n.widgetNode){x.push(n)}
else if(o.from<=r&&(o.to==null||o.to>r||n.collapsed&&o.to==r&&o.from==r)){if(o.to!=null&&o.to!=r&&s>o.to){s=o.to;g=""};if(n.className){v+=" "+n.className};if(n.css){h=(h?h+";":"")+n.css};if(n.startStyle&&o.from==r){p+=" "+n.startStyle};if(n.endStyle&&o.to==s){(f||(f=[])).push(n.endStyle,o.to)};if(n.title){(u||(u={})).title=n.title};if(n.attributes){for(var O in n.attributes){(u||(u={}))[O]=n.attributes[O]}};if(n.collapsed&&(!l||yr(l.marker,n)<0)){l=o}}
else if(o.from>r&&s>o.from){s=o.from}};if(f){for(var y=0;y<f.length;y+=2){if(f[y+1]==s){g+=" "+f[y]}}};if(!l||l.from==r){for(var S=0;S<x.length;++S){jn(t,0,x[S])}};if(l&&(l.from||0)==r){jn(t,(l.to==null?w+1:l.to)-r,l.marker,l.from==null);if(l.to==null){return};if(l.to==r){l=!1}}};if(r>=w){break};var c=Math.min(w,s);while(!0){if(a){var T=r+a.length;if(!l){var N=T>c?a.slice(0,c-r):a;t.addToken(t,N,b?b+v:v,p,r+N.length==s?g:"",h,u)};if(T>=c){a=a.slice(c-r);r=c;break};r=T;p=""};a=k.slice(m,m=i[M++]);b=fo(i[M++],t.cm.options)}}};function Xr(e,t,i){this.line=t;this.rest=bs(t);this.size=this.rest?u(a(this.rest))-i+1:1;this.node=this.text=null;this.hidden=ae(e,t)};function jt(e,i,r){var l=[],s;for(var n=i;n<r;n=s){var o=new Xr(e.doc,t(e.doc,n),n);s=n+o.size;l.push(o)};return l};var Re=null;function xa(e){if(Re){Re.ops.push(e)}
else{e.ownsGroup=Re={ops:[e],delayedCallbacks:[]}}};function va(e){var n=e.delayedCallbacks,i=0;do{for(;i<n.length;i++){n[i].call(null)};for(var r=0;r<e.ops.length;r++){var t=e.ops[r];if(t.cursorActivityHandlers){while(t.cursorActivityCalled<t.cursorActivityHandlers.length){t.cursorActivityHandlers[t.cursorActivityCalled++].call(null,t.cm)}}}}
while(i<n.length)};function pa(e,t){var i=e.ownsGroup;if(!i){return};try{va(i)}finally{Re=null;t(i)}};var yt=null;function b(e,t){var n=vr(e,t);if(!n.length){return};var l=Array.prototype.slice.call(arguments,2),i;if(Re){i=Re.delayedCallbacks}
else if(yt){i=yt}
else{i=yt=[];setTimeout(Rs,0)};var o=function(e){i.push(function(){return n[e].apply(null,l)})};for(var r=0;r<n.length;++r)o(r)};function Rs(){var t=yt;yt=null;for(var e=0;e<t.length;++e){t[e]()}};function qo(e,t,i,r){for(var o=0;o<t.changes.length;o++){var n=t.changes[o];if(n=="text"){is(e,t)}
else if(n=="gutter"){Io(e,t,i,r)}
else if(n=="class"){Li(e,t)}
else if(n=="widget"){ms(e,t,r)}};t.changes=null};function at(e){if(e.node==e.text){e.node=i("div",null,null,"position: relative");if(e.text.parentNode){e.text.parentNode.replaceChild(e.node,e.text)};e.node.appendChild(e.text);if(l&&c<8){e.node.style.zIndex=2}};return e.node};function ns(e,t){var r=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(r){r+=" CodeMirror-linebackground"};if(t.background){if(r){t.background.className=r}
else{t.background.parentNode.removeChild(t.background);t.background=null}}
else if(r){var n=at(t);t.background=n.insertBefore(i("div",null,r),n.firstChild);e.display.input.setUneditable(t.background)}};function Zo(e,t){var i=e.display.externalMeasured;if(i&&i.line==t.line){e.display.externalMeasured=null;t.measure=i.measure;return i.built};return Wn(e,t)};function is(e,t){var r=t.text.className,i=Zo(e,t);if(t.text==t.node){t.node=i.pre};t.text.parentNode.replaceChild(i.pre,t.text);t.text=i.pre;if(i.bgClass!=t.bgClass||i.textClass!=t.textClass){t.bgClass=i.bgClass;t.textClass=i.textClass;Li(e,t)}
else if(r){t.text.className=r}};function Li(e,t){ns(e,t);if(t.line.wrapClass){at(t).className=t.line.wrapClass}
else if(t.node!=t.text){t.node.className=""};var i=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=i||""};function Io(e,t,r,n){if(t.gutter){t.node.removeChild(t.gutter);t.gutter=null};if(t.gutterBackground){t.node.removeChild(t.gutterBackground);t.gutterBackground=null};if(t.line.gutterClass){var c=at(t);t.gutterBackground=i("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,("left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+(n.gutterTotalWidth)+"px"));e.display.input.setUneditable(t.gutterBackground);c.insertBefore(t.gutterBackground,t.text)};var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var f=at(t),l=t.gutter=i("div",null,"CodeMirror-gutter-wrapper",("left: "+(e.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px"));e.display.input.setUneditable(l);f.insertBefore(l,t.text);if(t.line.gutterClass){l.className+=" "+t.line.gutterClass};if(e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])){t.lineNumber=l.appendChild(i("div",fr(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(n.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(e.display.lineNumInnerWidth)+"px")))};if(o){for(var a=0;a<e.display.gutterSpecs.length;++a){var s=e.display.gutterSpecs[a].className,u=o.hasOwnProperty(s)&&o[s];if(u){l.appendChild(i("div",[u],"CodeMirror-gutter-elt",("left: "+(n.gutterLeft[s])+"px; width: "+(n.gutterWidth[s])+"px")))}}}}};function ms(e,t,i){if(t.alignable){t.alignable=null};var o=Ne("CodeMirror-linewidget");for(var r=t.node.firstChild,n=(void 0);r;r=n){n=r.nextSibling;if(o.test(r.className)){t.node.removeChild(r)}};To(e,t,i)};function Ts(e,t,i,r){var n=Zo(e,t);t.text=t.node=n.pre;if(n.bgClass){t.bgClass=n.bgClass};if(n.textClass){t.textClass=n.textClass};Li(e,t);Io(e,t,i,r);To(e,t,r);return t.node};function To(e,t,i){Fr(e,t.line,t,i,!0);if(t.rest){for(var r=0;r<t.rest.length;r++){Fr(e,t.rest[r],t,i,!1)}}};function Fr(e,t,r,n,o){if(!t.widgets){return};var f=at(r);for(var a=0,u=t.widgets;a<u.length;++a){var l=u[a],s=i("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));if(!l.handleMouseEvents){s.setAttribute("cm-ignore-events","true")};Us(l,s,r,n);e.display.input.setUneditable(s);if(o&&l.above){f.insertBefore(s,r.gutter||r.text)}
else{f.appendChild(s)};b(l,"redraw")}};function Us(e,t,i,r){if(e.noHScroll){(i.alignable||(i.alignable=[])).push(t);var n=r.wrapperWidth;t.style.left=r.fixedPos+"px";if(!e.coverGutter){n-=r.gutterTotalWidth;t.style.paddingLeft=r.gutterTotalWidth+"px"};t.style.width=n+"px"};if(e.coverGutter){t.style.zIndex=5;t.style.position="relative";if(!e.noHScroll){t.style.marginLeft=-r.gutterTotalWidth+"px"}}};function ot(e){if(e.height!=null){return e.height};var t=e.doc.cm;if(!t){return 0};if(!ue(document.body,e.node)){var r="position: relative;";if(e.coverGutter){r+="margin-left: -"+t.display.gutters.offsetWidth+"px;"};if(e.noHScroll){r+="width: "+t.display.wrapper.clientWidth+"px;"};D(t.display.measure,i("div",[e.node],null,r))};return e.height=e.node.parentNode.offsetHeight};function X(e,t){for(var i=pr(t);i!=e.wrapper;i=i.parentNode){if(!i||(i.nodeType==1&&i.getAttribute("cm-ignore-events")=="true")||(i.parentNode==e.sizer&&i!=e.mover)){return!0}}};function It(e){return e.lineSpace.offsetTop};function rr(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight};function ko(e){if(e.cachedPaddingH){return e.cachedPaddingH};var r=D(e.measure,i("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(r):r.currentStyle,t={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};if(!isNaN(t.left)&&!isNaN(t.right)){e.cachedPaddingH=t};return t};function V(e){return Jn-e.display.nativeBarWidth};function Ce(e){return e.display.scroller.clientWidth-V(e)-e.display.barWidth};function Ti(e){return e.display.scroller.clientHeight-V(e)-e.display.barHeight};function Ss(e,t,i){var o=e.options.lineWrapping,u=o&&Ce(e);if(!t.measure.heights||o&&t.measure.width!=u){var a=t.measure.heights=[];if(o){t.measure.width=u;var n=t.text.firstChild.getClientRects();for(var r=0;r<n.length-1;r++){var l=n[r],s=n[r+1];if(Math.abs(l.bottom-s.bottom)>2){a.push((l.bottom+s.top)/2-i.top)}}};a.push(i.bottom-i.top)}};function Co(e,t,i){if(e.line==t){return{map:e.measure.map,cache:e.measure.cache}};for(var n=0;n<e.rest.length;n++){if(e.rest[n]==t){return{map:e.measure.maps[n],cache:e.measure.caches[n]}}};for(var r=0;r<e.rest.length;r++){if(u(e.rest[r])>i){return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}}};function Ls(e,t){t=G(t);var n=u(t),i=e.display.externalMeasured=new Xr(e.doc,t,n);i.lineN=n;var r=i.built=Wn(e,i);i.text=r.pre;D(e.display.lineMeasure,r.pre);return i};function Oo(e,t,i,r){return B(e,He(e,t),i,r)};function Ii(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo){return e.display.view[pe(e,t)]};var i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size){return i}};function He(e,t){var n=u(t),i=Ii(e,n);if(i&&!i.text){i=null}
else if(i&&i.changes){qo(e,i,n,Ki(e));e.curOp.forceUpdate=!0};if(!i){i=Ls(e,t)};var r=Co(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}};function B(e,t,i,r,n){if(t.before){i=-1};var l=i+(r||""),o;if(t.cache.hasOwnProperty(l)){o=t.cache[l]}
else{if(!t.rect){t.rect=t.view.text.getBoundingClientRect()};if(!t.hasHeights){Ss(e,t.view,t.rect);t.hasHeights=!0};o=ws(e,t,i,r);if(!o.bogus){t.cache[l]=o}};return{left:o.left,right:o.right,top:n?o.rtop:o.top,bottom:n?o.rbottom:o.bottom}};var Ir={left:0,right:0,top:0,bottom:0};function Ho(e,t,i){var a,n,u,s,l,o;for(var r=0;r<e.length;r+=3){l=e[r];o=e[r+1];if(t<l){n=0;u=1;s="left"}
else if(t<o){n=t-l;u=n+1}
else if(r==e.length-3||t==o&&e[r+3]>t){u=o-l;n=u-1;if(t>=o){s="right"}};if(n!=null){a=e[r+2];if(l==o&&i==(a.insertLeft?"left":"right")){s=i};if(i=="left"&&n==0){while(r&&e[r-2]==e[r-3]&&e[r-1].insertLeft){a=e[(r-=3)+2];s="left"}};if(i=="right"&&n==o-l){while(r<e.length-3&&e[r+3]==e[r+4]&&!e[r+5].insertLeft){a=e[(r+=3)+2];s="right"}};break}};return{node:a,start:n,end:u,collapse:s,coverStart:l,coverEnd:o}};function Ms(e,t){var i=Ir;if(t=="left"){for(var n=0;n<e.length;n++){if((i=e[n]).left!=i.right){break}}}
else{for(var r=e.length-1;r>=0;r--){if((i=e[r]).left!=i.right){break}}};return i};function ws(e,t,i,r){var s=Ho(t.map,i,r),u=s.node,o=s.start,f=s.end,p=s.collapse,n;if(u.nodeType==3){for(var b=0;b<4;b++){while(o&&or(t.line.text.charAt(s.coverStart+o))){--o}
while(s.coverStart+f<s.coverEnd&&or(t.line.text.charAt(s.coverStart+f))){++f};if(l&&c<9&&o==0&&f==s.coverEnd-s.coverStart){n=u.parentNode.getBoundingClientRect()}
else{n=Ms(Me(u,o,f).getClientRects(),r)};if(n.left||n.right||o==0){break};f=o;o=o-1;p="right"};if(l&&c<11){n=Ns(e.display.measure,n)}}
else{if(o>0){p=r="right"};var v;if(e.options.lineWrapping&&(v=u.getClientRects()).length>1){n=v[r=="right"?v.length-1:0]}
else{n=u.getBoundingClientRect()}};if(l&&c<9&&!o&&(!n||!n.left&&!n.right)){var h=u.parentNode.getClientRects()[0];if(h){n={left:h.left,right:h.left+je(e.display),top:h.top,bottom:h.bottom}}
else{n=Ir}};var m=n.top-t.rect.top,y=n.bottom-t.rect.top,x=(m+y)/2,g=t.view.measure.heights,a=0;for(;a<g.length-1;a++){if(x<g[a]){break}};var C=a?g[a-1]:0,w=g[a],d={left:(p=="right"?n.right:n.left)-t.rect.left,right:(p=="left"?n.left:n.right)-t.rect.left,top:C,bottom:w};if(!n.left&&!n.right){d.bogus=!0};if(!e.options.singleCursorHeightPerLine){d.rtop=m;d.rbottom=y};return d};function Ns(e,t){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!ds(e)){return t};var i=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*i,right:t.right*i,top:t.top*r,bottom:t.bottom*r}};function Eo(e){if(e.measure){e.measure.cache={};e.measure.heights=null;if(e.rest){for(var t=0;t<e.rest.length;t++){e.measure.caches[t]={}}}}};function Ao(e){e.display.externalMeasure=null;se(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++){Eo(e.display.view[t])}};function Mt(e){Ao(e);e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null;if(!e.options.lineWrapping){e.display.maxLineChanged=!0};e.display.lineNumChars=null};function wo(){if(gi&&vi){return-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft))};return window.pageXOffset||(document.documentElement||document.body).scrollLeft};function co(){if(gi&&vi){return-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop))};return window.pageYOffset||(document.documentElement||document.body).scrollTop};function er(e){var i=0;if(e.widgets){for(var t=0;t<e.widgets.length;++t){if(e.widgets[t].above){i+=ot(e.widgets[t])}}};return i};function Pt(e,t,i,r,n){if(!n){var a=er(t);i.top+=a;i.bottom+=a};if(r=="line"){return i};if(!r){r="local"};var o=J(t);if(r=="local"){o+=It(e.display)}
else{o-=e.display.viewOffset};if(r=="page"||r=="window"){var s=e.display.lineSpace.getBoundingClientRect();o+=s.top+(r=="window"?0:co());var l=s.left+(r=="window"?0:wo());i.left+=l;i.right+=l};i.top+=o;i.bottom+=o;return i};function oo(e,t,i){if(i=="div"){return t};var r=t.left,n=t.top;if(i=="page"){r-=wo();n-=co()}
else if(i=="local"||!i){var l=e.display.sizer.getBoundingClientRect();r+=l.left;n+=l.top};var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:n-o.top}};function Ji(e,i,r,n,o){if(!n){n=t(e.doc,i.line)};return Pt(e,n,Oo(e,n,i.ch,o),r)};function I(e,i,r,n,o,a){n=n||t(e.doc,i.line);if(!o){o=He(e,n)};function h(t,i){var l=B(e,o,t,i?"right":"left",a);if(i){l.left=l.right}
else{l.right=l.left};return Pt(e,n,l,r)};var u=Y(n,e.doc.direction),l=i.ch,s=i.sticky;if(l>=n.text.length){l=n.text.length;s="before"}
else if(l<=0){l=0;s="after"};if(!u){return h(s=="before"?l-1:l,s=="before")};function d(e,t,i){var r=u[t],n=r.level==1;return h(i?e-1:e,n!=i)};var p=Qe(u,l,s),f=kt,c=d(l,p,s=="before");if(f!=null){c.other=d(l,f,s!="before")};return c};function ao(e,i){var r=0;i=n(e.doc,i);if(!e.options.lineWrapping){r=je(e.display)*i.ch};var o=t(e.doc,i.line),l=J(o)+It(e.display);return{left:r,right:r,top:l,bottom:l+o.height}};function qi(t,i,r,n,o){var l=e(t,i,r);l.xRel=o;if(n){l.outside=n};return l};function Yi(e,i,r){var n=e.doc;r+=e.display.viewOffset;if(r<0){return qi(n.first,0,null,-1,-1)};var o=Se(n,r),f=n.first+n.size-1;if(o>f){return qi(n.first+n.size-1,t(n,f).text.length,null,1,1)};if(i<0){i=0};var a=t(n,o);for(;;){var l=Os(e,a,o,i,r),u=xs(a,l.ch+(l.xRel>0||l.outside>0?1:0));if(!u){return l};var s=u.find(1);if(s.line==o){return s};a=t(n,o=s.line)}};function ro(e,t,i,r){r-=er(t);var n=t.text.length,o=et(function(t){return B(e,i,t-1).bottom<=r},n,0);n=et(function(t){return B(e,i,t).top>r},o,n);return{begin:o,end:n}};function Ro(e,t,i,r){if(!i){i=He(e,t)};var n=Pt(e,t,B(e,i,r),"line").top;return ro(e,t,i,n)};function ir(e,t,i,r){return e.bottom<=i?!1:e.top>i?!0:(r?e.left:e.right)>t};function Os(t,i,r,n,o){o-=J(i);var c=He(t,i),p=er(i),g=0,v=i.text.length,s=!0,x=Y(i,t.doc.direction);if(x){var u=(t.options.lineWrapping?us:ys)(t,i,r,c,x,n,o);s=u.level!=1;g=s?u.from:u.to-1;v=s?u.to:u.from-1};var b=null,a=null,l=et(function(e){var i=B(t,c,e);i.top+=p;i.bottom+=p;if(!ir(i,n,o,!1)){return!1};if(i.top<=o&&i.left<=n){b=e;a=i};return!0},g,v),d,f,w=!1;if(a){var m=n-a.left<a.right-n,y=m==s;l=b+(y?0:1);f=y?"after":"before";d=m?a.left:a.right}
else{if(!s&&(l==v||l==g)){l++};f=l==0?"after":l==i.text.length?"before":(B(t,c,l-(s?1:0)).bottom+p<=o)==s?"after":"before";var h=I(t,e(r,l,f),"line",i,c);d=h.left;w=o<h.top?-1:o>=h.bottom?1:0};l=pn(i.text,l,1);return qi(r,l,f,w,n-d)};function ys(t,i,r,n,o,l,s){var u=et(function(a){var u=o[a],f=u.level!=1;return ir(I(t,e(r,f?u.to:u.from,f?"before":"after"),"line",i,n),l,s,!0)},0,o.length-1),a=o[u];if(u>0){var f=a.level!=1,c=I(t,e(r,f?a.from:a.to,f?"after":"before"),"line",i,n);if(ir(c,l,s,!0)&&c.top>s){a=o[u-1]}};return a};function us(e,t,i,r,n,l,u){var g=ro(e,t,r,u),f=g.begin,a=g.end;if(/\s/.test(t.text.charAt(a-1))){a--};var o=null,p=null;for(var c=0;c<n.length;c++){var s=n[c];if(s.from>=a||s.to<=f){continue};var v=s.level!=1,h=B(e,r,v?Math.min(a,s.to)-1:Math.max(f,s.from)).right,d=h<l?l-h+1e9:h-l;if(!o||p>d){o=s;p=d}};if(!o){o=n[n.length-1]};if(o.from<f){o={from:f,to:o.to,level:o.level}};if(o.to>a){o={from:o.from,to:a,level:o.level}};return o};var xe;function Ue(e){if(e.cachedTextHeight!=null){return e.cachedTextHeight};if(xe==null){xe=i("pre",null,"CodeMirror-line-like");for(var r=0;r<49;++r){xe.appendChild(document.createTextNode("x"));xe.appendChild(i("br"))};xe.appendChild(document.createTextNode("x"))};D(e.measure,xe);var t=xe.offsetHeight/50;if(t>3){e.cachedTextHeight=t};se(e.measure);return t||1};function je(e){if(e.cachedCharWidth!=null){return e.cachedCharWidth};var n=i("span","xxxxxxxxxx"),o=i("pre",[n],"CodeMirror-line-like");D(e.measure,o);var r=n.getBoundingClientRect(),t=(r.right-r.left)/10;if(t>2){e.cachedCharWidth=t};return t||10};function Ki(e){var i=e.display,o={},l={};var s=i.gutters.clientLeft;for(var t=i.gutters.firstChild,n=0;t;t=t.nextSibling,++n){var r=e.display.gutterSpecs[n].className;o[r]=t.offsetLeft+t.clientLeft+s;l[r]=t.clientWidth};return{fixedPos:Vi(i),gutterTotalWidth:i.gutters.offsetWidth,gutterLeft:o,gutterWidth:l,wrapperWidth:i.wrapper.clientWidth}};function Vi(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left};function mo(e){var t=Ue(e.display),i=e.options.lineWrapping,r=i&&Math.max(5,e.display.scroller.clientWidth/je(e.display)-3);return function(n){if(ae(e.doc,n)){return 0};var l=0;if(n.widgets){for(var o=0;o<n.widgets.length;o++){if(n.widgets[o].height){l+=n.widgets[o].height}}};if(i){return l+(Math.ceil(n.text.length/r)||1)*t}
else{return l+t}}};function Ui(e){var t=e.doc,i=mo(e);t.iter(function(e){var t=i(e);if(t!=e.height){K(e,t)}})};function he(i,r,n,o){var d=i.display;if(!n&&pr(r).getAttribute("cm-not-content")=="true"){return null};var u,f,c=d.lineSpace.getBoundingClientRect();try{u=r.clientX-c.left;f=r.clientY-c.top}catch(l){return null};var s=Yi(i,u,f),a;if(o&&s.xRel>0&&(a=t(i.doc,s.line).text).length==s.ch){var h=H(a,a.length,i.options.tabSize)-a.length;s=e(s.line,Math.max(0,Math.round((u-ko(i.display).left)/je(i.display))-h))};return s};function pe(e,t){if(t>=e.display.viewTo){return null};t-=e.display.viewFrom;if(t<0){return null};var r=e.display.view;for(var i=0;i<r.length;i++){t-=r[i].size;if(t<0){return i}}};function k(e,t,i,r){if(t==null){t=e.doc.first};if(i==null){i=e.doc.first+e.doc.size};if(!r){r=0};var n=e.display;if(r&&i<n.viewTo&&(n.updateLineNumbers==null||n.updateLineNumbers>t)){n.updateLineNumbers=t};e.curOp.viewChanged=!0;if(t>=n.viewTo){if(ee&&Hr(e.doc,t)<n.viewTo){ne(e)}}
else if(i<=n.viewFrom){if(ee&&Gr(e.doc,i+r)>n.viewFrom){ne(e)}
else{n.viewFrom+=r;n.viewTo+=r}}
else if(t<=n.viewFrom&&i>=n.viewTo){ne(e)}
else if(t<=n.viewFrom){var u=Ut(e,i,i+r,1);if(u){n.view=n.view.slice(u.index);n.viewFrom=u.lineN;n.viewTo+=r}
else{ne(e)}}
else if(i>=n.viewTo){var a=Ut(e,t,t,-1);if(a){n.view=n.view.slice(0,a.index);n.viewTo=a.lineN}
else{ne(e)}}
else{var l=Ut(e,t,t,-1),s=Ut(e,i,i+r,1);if(l&&s){n.view=n.view.slice(0,l.index).concat(jt(e,l.lineN,s.lineN)).concat(n.view.slice(s.index));n.viewTo+=r}
else{ne(e)}};var o=n.externalMeasured;if(o){if(i<o.lineN){o.lineN+=r}
else if(t<o.lineN+o.size){n.externalMeasured=null}}};function te(e,t,i){e.curOp.viewChanged=!0;var r=e.display,n=e.display.externalMeasured;if(n&&t>=n.lineN&&t<n.lineN+n.size){r.externalMeasured=null};if(t<r.viewFrom||t>=r.viewTo){return};var o=r.view[pe(e,t)];if(o.node==null){return};var l=o.changes||(o.changes=[]);if(x(l,i)==-1){l.push(i)}};function ne(e){e.display.viewFrom=e.display.viewTo=e.doc.first;e.display.view=[];e.display.viewOffset=0};function Ut(e,t,i,r){var n=pe(e,t),s,o=e.display.view;if(!ee||i==e.doc.first+e.doc.size){return{index:n,lineN:i}};var l=e.display.viewFrom;for(var a=0;a<n;a++){l+=o[a].size};if(l!=t){if(r>0){if(n==o.length-1){return null};s=(l+o[n].size)-t;n++}
else{s=l-t};t+=s;i+=s}
while(Hr(e.doc,i)!=i){if(n==(r<0?0:o.length-1)){return null};i+=r*o[n-(r<0?1:0)].size;n+=r};return{index:n,lineN:i}};function ts(e,t,i){var r=e.display,n=r.view;if(n.length==0||t>=r.viewTo||i<=r.viewFrom){r.view=jt(e,t,i);r.viewFrom=t}
else{if(r.viewFrom>t){r.view=jt(e,t,r.viewFrom).concat(r.view)}
else if(r.viewFrom<t){r.view=r.view.slice(pe(e,t))};r.viewFrom=t;if(r.viewTo<i){r.view=r.view.concat(jt(e,r.viewTo,i))}
else if(r.viewTo>i){r.view=r.view.slice(0,pe(e,i))}};r.viewTo=i};function Jo(e){var r=e.display.view,n=0;for(var i=0;i<r.length;i++){var t=r[i];if(!t.hidden&&(!t.node||t.changes)){++n}};return n};function Ht(e){e.display.input.showSelection(e.display.input.prepareSelection())};function Go(e,t){if(t===void 0)t=!0;var n=e.doc,o={};var s=o.cursors=document.createDocumentFragment(),a=o.selection=document.createDocumentFragment();for(var r=0;r<n.sel.ranges.length;r++){if(!t&&r==n.sel.primIndex){continue};var i=n.sel.ranges[r];if(i.from().line>=e.display.viewTo||i.to().line<e.display.viewFrom){continue};var l=i.empty();if(l||e.options.showCursorWhenSelecting){nl(e,i.head,s)};if(!l){rs(e,i,a)}};return o};function nl(e,t,r){var n=I(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),l=r.appendChild(i("div","\u00a0","CodeMirror-cursor"));l.style.left=n.left+"px";l.style.top=n.top+"px";l.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px";if(n.other){var o=r.appendChild(i("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="";o.style.left=n.other.left+"px";o.style.top=n.other.top+"px";o.style.height=(n.other.bottom-n.other.top)*.85+"px"}};function Vt(e,t){return e.top-t.top||e.left-t.left};function rs(r,n,o){var b=r.display,p=r.doc,m=document.createDocumentFragment(),y=ko(r.display),a=y.left,c=Math.max(b.sizerWidth,Ce(r)-b.sizer.offsetLeft)-y.right,l=p.direction=="ltr";function u(e,t,r,n){if(t<0){t=0};t=Math.round(t);n=Math.round(n);m.appendChild(i("div",null,"CodeMirror-selected",("position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(r==null?c-e:r)+"px;\n                             height: "+(n-t)+"px")))};function v(i,n,o){var h=t(p,i),m=h.text.length,s,f;function v(t,n){return Ji(r,e(i,t),"div",h,n)};function d(e,t,i){var n=Ro(r,h,null,e),o=(t=="ltr")==(i=="after")?"left":"right",l=i=="after"?n.begin:n.end-(/\s/.test(h.text.charAt(n.end-1))?2:1);return v(l,o)[o]};var g=Y(h,p.direction);ga(g,n||0,o==null?m:o,function(e,t,i,r){var y=i=="ltr",h=v(e,y?"left":"right"),p=v(t-1,y?"right":"left"),C=n==null&&e==0,x=o==null&&t==m,S=r==0,L=!g||r==g.length-1;if(p.top-h.top<=3){var O=(l?C:x)&&S,A=(l?x:C)&&L,M=O?a:(y?h:p).left,N=A?c:(y?p:h).right;u(M,h.top,N-M,h.bottom)}
else{var b,T,w,k;if(y){b=l&&C&&S?a:h.left;T=l?c:d(e,i,"before");w=l?a:d(t,i,"after");k=l&&x&&L?c:p.right}
else{b=!l?a:d(e,i,"before");T=!l&&C&&S?c:h.right;w=!l&&x&&L?a:p.left;k=!l?c:d(t,i,"after")};u(b,h.top,T-b,h.bottom);if(h.bottom<p.top){u(a,h.bottom,null,p.top)};u(w,p.top,k-w,p.bottom)};if(!s||Vt(h,s)<0){s=h};if(Vt(p,s)<0){s=p};if(!f||Vt(h,f)<0){f=h};if(Vt(p,f)<0){f=p}});return{start:s,end:f}};var h=n.from(),d=n.to();if(h.line==d.line){v(h.line,h.ch,d.ch)}
else{var w=t(p,h.line),x=t(p,d.line),g=G(w)==G(x),s=v(h.line,h.ch,g?w.text.length+1:null).end,f=v(d.line,g?0:null,d.ch).start;if(g){if(s.top<f.top-2){u(s.right,s.top,null,s.bottom);u(a,f.top,f.left,f.bottom)}
else{u(s.right,s.top,f.left-s.right,s.bottom)}};if(s.bottom<f.top){u(a,s.bottom,null,f.top)}};o.appendChild(m)};function Xi(e){if(!e.state.focused){return};var t=e.display;clearInterval(t.blinker);var i=!0;t.cursorDiv.style.visibility="";if(e.options.cursorBlinkRate>0){t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(i=!i)?"":"hidden"},e.options.cursorBlinkRate)}
else if(e.options.cursorBlinkRate<0){t.cursorDiv.style.visibility="hidden"}};function Qo(e){if(!e.state.focused){e.display.input.focus();Si(e)}};function Ko(e){e.state.delayingBlurEvent=!0;setTimeout(function(){if(e.state.delayingBlurEvent){e.state.delayingBlurEvent=!1;gt(e)}},100)};function Si(e,t){if(e.state.delayingBlurEvent){e.state.delayingBlurEvent=!1};if(e.options.readOnly=="nocursor"){return};if(!e.state.focused){g(e,"focus",e,t);e.state.focused=!0;ke(e.display.wrapper,"CodeMirror-focused");if(!e.curOp&&e.display.selForContextMenu!=e.doc.sel){e.display.input.reset();if(C){setTimeout(function(){return e.display.input.reset(!0)},20)}};e.display.input.receivedFocus()};Xi(e)};function gt(e,t){if(e.state.delayingBlurEvent){return};if(e.state.focused){g(e,"blur",e,t);e.state.focused=!1;ve(e.display.wrapper,"CodeMirror-focused")};clearInterval(e.display.blinker);setTimeout(function(){if(!e.state.focused){e.display.shift=!1}},150)};function Xt(e){var a=e.display,d=a.lineDiv.offsetTop;for(var s=0;s<a.view.length;s++){var t=a.view[s],p=e.options.lineWrapping,i=(void 0),o=0;if(t.hidden){continue};if(l&&c<8){var h=t.node.offsetTop+t.node.offsetHeight;i=h-d;d=h}
else{var n=t.node.getBoundingClientRect();i=n.bottom-n.top;if(!p&&t.text.firstChild){o=t.text.firstChild.getBoundingClientRect().right-n.left-1}};var f=t.line.height-i;if(f>.005||f<-.005){K(t.line,i);Vo(t.line);if(t.rest){for(var r=0;r<t.rest.length;r++){Vo(t.rest[r])}}};if(o>e.display.sizerWidth){var u=Math.ceil(o/je(e.display));if(u>e.display.maxLineLength){e.display.maxLineLength=u;e.display.maxLine=t.line;e.display.maxLineChanged=!0}}}};function Vo(e){if(e.widgets){for(var t=0;t<e.widgets.length;++t){var i=e.widgets[t],r=i.node.parentNode;if(r){i.height=r.offsetHeight}}}};function qt(e,i,r){var l=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;l=Math.floor(l-It(e));var u=r&&r.bottom!=null?r.bottom:l+e.wrapper.clientHeight,n=Se(i,l),o=Se(i,u);if(r&&r.ensure){var s=r.ensure.from.line,a=r.ensure.to.line;if(s<n){n=s;o=Se(i,J(t(i,s))+e.wrapper.clientHeight)}
else if(Math.min(a,i.lastLine())>=o){n=Se(i,J(t(i,a))-e.wrapper.clientHeight);o=a}};return{from:n,to:Math.max(o,n+1)}};function Jl(e,t){if(y(e,"scrollCursorIntoView")){return};var o=e.display,l=o.sizer.getBoundingClientRect(),r=null;if(t.top+l.top<0){r=!0}
else if(t.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)){r=!1};if(r!=null&&!sa){var n=i("div","\u200b",null,("position: absolute;\n                         top: "+(t.top-o.viewOffset-It(e.display))+"px;\n                         height: "+(t.bottom-t.top+V(e)+o.barHeight)+"px;\n                         left: "+(t.left)+"px; width: "+(Math.max(2,t.right-t.left))+"px;"));e.display.lineSpace.appendChild(n);n.scrollIntoView(r);e.display.lineSpace.removeChild(n)}};function ss(t,i,r,n){if(n==null){n=0};var u;if(!t.options.lineWrapping&&i==r){i=i.ch?e(i.line,i.sticky=="before"?i.ch-1:i.ch,"after"):i;r=i.sticky=="before"?e(i.line,i.ch+1,"before"):i};for(var f=0;f<5;f++){var a=!1,o=I(t,i),s=!r||r==i?o:I(t,r);u={left:Math.min(o.left,s.left),top:Math.min(o.top,s.top)-n,right:Math.max(o.left,s.left),bottom:Math.max(o.bottom,s.bottom)+n};var l=ji(t,u),c=t.doc.scrollTop,h=t.doc.scrollLeft;if(l.scrollTop!=null){ht(t,l.scrollTop);if(Math.abs(t.doc.scrollTop-c)>1){a=!0}};if(l.scrollLeft!=null){ge(t,l.scrollLeft);if(Math.abs(t.doc.scrollLeft-h)>1){a=!0}};if(!a){break}};return u};function fs(e,t){var i=ji(e,t);if(i.scrollTop!=null){ht(e,i.scrollTop)};if(i.scrollLeft!=null){ge(e,i.scrollLeft)}};function ji(e,t){var o=e.display,c=Ue(e.display);if(t.top<0){t.top=0};var s=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:o.scroller.scrollTop,n=Ti(e),i={};if(t.bottom-t.top>n){t.bottom=t.top+n};var f=e.doc.height+rr(o),h=t.top<c,d=t.bottom>f-c;if(t.top<s){i.scrollTop=h?0:t.top}
else if(t.bottom>s+n){var u=Math.min(t.top,(d?f:t.bottom)-n);if(u!=s){i.scrollTop=u}};var a=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:o.scroller.scrollLeft,r=Ce(e)-(e.options.fixedGutter?o.gutters.offsetWidth:0),l=t.right-t.left>r;if(l){t.right=t.left+r};if(t.left<10){i.scrollLeft=0}
else if(t.left<a){i.scrollLeft=Math.max(0,t.left-(l?0:10))}
else if(t.right>r+a-3){i.scrollLeft=t.right+(l?0:10)-r};return i};function Ni(e,t){if(t==null){return};wi(e);e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+t};function De(e){wi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}};function pt(e,t,i){if(t!=null||i!=null){wi(e)};if(t!=null){e.curOp.scrollLeft=t};if(i!=null){e.curOp.scrollTop=i}};function ps(e,t){wi(e);e.curOp.scrollToPos=t};function wi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var i=ao(e,t.from),r=ao(e,t.to);eo(e,i,r,t.margin)}};function eo(e,t,i,r){var n=ji(e,{left:Math.min(t.left,i.left),top:Math.min(t.top,i.top)-r,right:Math.max(t.right,i.right),bottom:Math.max(t.bottom,i.bottom)+r});pt(e,n.scrollLeft,n.scrollTop)};function ht(e,t){if(Math.abs(e.doc.scrollTop-t)<2){return};if(!q){Di(e,{top:t})};tn(e,t,!0);if(q){Di(e)};vt(e,100)};function tn(e,t,i){t=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t));if(e.display.scroller.scrollTop==t&&!i){return};e.doc.scrollTop=t;e.display.scrollbars.setScrollTop(t);if(e.display.scroller.scrollTop!=t){e.display.scroller.scrollTop=t}};function ge(e,t,i,r){t=Math.max(0,Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth));if((i?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!r){return};e.doc.scrollLeft=t;zr(e);if(e.display.scroller.scrollLeft!=t){e.display.scroller.scrollLeft=t};e.display.scrollbars.setScrollLeft(t)};function ft(e){var t=e.display,i=t.gutters.offsetWidth,r=Math.round(e.doc.height+rr(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?i:0,docHeight:r,scrollHeight:r+V(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:i}};var we=function(e,t,n){this.cm=n;var o=this.vert=i("div",[i("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=i("div",[i("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");o.tabIndex=s.tabIndex=-1;e(o);e(s);r(o,"scroll",function(){if(o.clientHeight){t(o.scrollTop,"vertical")}});r(s,"scroll",function(){if(s.clientWidth){t(s.scrollLeft,"horizontal")}});this.checkedZeroWidth=!1;if(l&&c<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};we.prototype.update=function(e){var i=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,t=e.nativeBarWidth;if(r){this.vert.style.display="block";this.vert.style.bottom=i?t+"px":"0";var o=e.viewHeight-(i?t:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+o)+"px"}
else{this.vert.style.display="";this.vert.firstChild.style.height="0"};if(i){this.horiz.style.display="block";this.horiz.style.right=r?t+"px":"0";this.horiz.style.left=e.barLeft+"px";var n=e.viewWidth-e.barLeft-(r?t:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+n)+"px"}
else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"};if(!this.checkedZeroWidth&&e.clientHeight>0){if(t==0){this.zeroWidthHack()};this.checkedZeroWidth=!0};return{right:r?t:0,bottom:i?t:0}};we.prototype.setScrollLeft=function(e){if(this.horiz.scrollLeft!=e){this.horiz.scrollLeft=e};if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")}};we.prototype.setScrollTop=function(e){if(this.vert.scrollTop!=e){this.vert.scrollTop=e};if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert,"vert")}};we.prototype.zeroWidthHack=function(){var e=F&&!la?"12px":"18px";this.horiz.style.height=this.vert.style.width=e;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new ie;this.disableVert=new ie};we.prototype.enableZeroWidthBar=function(e,t,i){e.style.pointerEvents="auto";function r(){var n=e.getBoundingClientRect(),o=i=="vert"?document.elementFromPoint(n.right-1,(n.top+n.bottom)/2):document.elementFromPoint((n.right+n.left)/2,n.bottom-1);if(o!=e){e.style.pointerEvents="none"}
else{t.set(1000,r)}};t.set(1000,r)};we.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz);e.removeChild(this.vert)};var tt=function(){};tt.prototype.update=function(){return{bottom:0,right:0}};tt.prototype.setScrollLeft=function(){};tt.prototype.setScrollTop=function(){};tt.prototype.clear=function(){};function Ae(e,t){if(!t){t=ft(e)};var i=e.display.barWidth,n=e.display.barHeight;ln(e,t);for(var r=0;r<4&&i!=e.display.barWidth||n!=e.display.barHeight;r++){if(i!=e.display.barWidth&&e.options.lineWrapping){Xt(e)};ln(e,ft(e));i=e.display.barWidth;n=e.display.barHeight}};function ln(e,t){var i=e.display,r=i.scrollbars.update(t);i.sizer.style.paddingRight=(i.barWidth=r.right)+"px";i.sizer.style.paddingBottom=(i.barHeight=r.bottom)+"px";i.heightForcer.style.borderBottom=r.bottom+"px solid transparent";if(r.right&&r.bottom){i.scrollbarFiller.style.display="block";i.scrollbarFiller.style.height=r.bottom+"px";i.scrollbarFiller.style.width=r.right+"px"}
else{i.scrollbarFiller.style.display=""};if(r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter){i.gutterFiller.style.display="block";i.gutterFiller.style.height=r.bottom+"px";i.gutterFiller.style.width=t.gutterWidth+"px"}
else{i.gutterFiller.style.display=""}};var Ur={"native":we,"null":tt};function sn(e){if(e.display.scrollbars){e.display.scrollbars.clear();if(e.display.scrollbars.addClass){ve(e.display.wrapper,e.display.scrollbars.addClass)}};e.display.scrollbars=new Ur[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller);r(t,"mousedown",function(){if(e.state.focused){setTimeout(function(){return e.display.input.focus()},0)}});t.setAttribute("cm-not-content","true")},function(t,i){if(i=="horizontal"){ge(e,t)}
else{ht(e,t)}},e);if(e.display.scrollbars.addClass){ke(e.display.wrapper,e.display.scrollbars.addClass)}};var Ol=0;function ye(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ol};xa(e.curOp)};function be(e){var t=e.curOp;if(t){pa(t,function(e){for(var t=0;t<e.ops.length;t++){e.ops[t].cm.curOp=null};zs(e)})}};function zs(e){var t=e.ops;for(var l=0;l<t.length;l++){aa(t[l])};for(var o=0;o<t.length;o++){fa(t[o])};for(var n=0;n<t.length;n++){ca(t[n])};for(var r=0;r<t.length;r++){ha(t[r])};for(var i=0;i<t.length;i++){da(t[i])}};function aa(e){var t=e.cm,i=t.display;ma(t);if(e.updateMaxLine){Oi(t)};e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<i.viewFrom||e.scrollToPos.to.line>=i.viewTo)||i.maxLineChanged&&t.options.lineWrapping;e.update=e.mustUpdate&&new li(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)};function fa(e){e.updatedDisplay=e.mustUpdate&&Ai(e.cm,e.update)};function ca(e){var t=e.cm,i=t.display;if(e.updatedDisplay){Xt(t)};e.barMeasure=ft(t);if(i.maxLineChanged&&!t.options.lineWrapping){e.adjustWidthTo=Oo(t,i.maxLine,i.maxLine.text.length).left+3;t.display.sizerWidth=e.adjustWidthTo;e.barMeasure.scrollWidth=Math.max(i.scroller.clientWidth,i.sizer.offsetLeft+e.adjustWidthTo+V(t)+t.display.barWidth);e.maxScrollLeft=Math.max(0,i.sizer.offsetLeft+e.adjustWidthTo-Ce(t))};if(e.updatedDisplay||e.selectionChanged){e.preparedSelection=i.input.prepareSelection()}};function ha(e){var t=e.cm;if(e.adjustWidthTo!=null){t.display.sizer.style.minWidth=e.adjustWidthTo+"px";if(e.maxScrollLeft<t.doc.scrollLeft){ge(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0)};t.display.maxLineChanged=!1};var i=e.focus&&e.focus==Q();if(e.preparedSelection){t.display.input.showSelection(e.preparedSelection,i)};if(e.updatedDisplay||e.startHeight!=t.doc.height){Ae(t,e.barMeasure)};if(e.updatedDisplay){tr(t,e.barMeasure)};if(e.selectionChanged){Xi(t)};if(t.state.focused&&e.updateInput){t.display.input.reset(e.typing)};if(i){Qo(e.cm)}};function da(e){var t=e.cm,s=t.display,a=t.doc;if(e.updatedDisplay){Zr(t,e.update)};if(s.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)){s.wheelStartX=s.wheelStartY=null};if(e.scrollTop!=null){tn(t,e.scrollTop,e.forceScroll)};if(e.scrollLeft!=null){ge(t,e.scrollLeft,!0,!0)};if(e.scrollToPos){var u=ss(t,n(a,e.scrollToPos.from),n(a,e.scrollToPos.to),e.scrollToPos.margin);Jl(t,u)};var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o){for(var r=0;r<o.length;++r){if(!o[r].lines.length){g(o[r],"hide")}}};if(l){for(var i=0;i<l.length;++i){if(l[i].lines.length){g(l[i],"unhide")}}};if(s.wrapper.offsetHeight){a.scrollTop=t.display.scroller.scrollTop};if(e.changeObjs){g(t,"changes",t,e.changeObjs)};if(e.update){e.update.finish()}};function N(e,t){if(e.curOp){return t()};ye(e);try{return t()}finally{be(e)}};function v(e,t){return function(){if(e.curOp){return t.apply(e,arguments)};ye(e);try{return t.apply(e,arguments)}finally{be(e)}}};function L(e){return function(){if(this.curOp){return e.apply(this,arguments)};ye(this);try{return e.apply(this,arguments)}finally{be(this)}}};function m(e){return function(){var t=this.cm;if(!t||t.curOp){return e.apply(this,arguments)};ye(t);try{return e.apply(this,arguments)}finally{be(t)}}};function vt(e,t){if(e.doc.highlightFrontier<e.display.viewTo){e.state.highlight.set(t,yi(ua,e))}};function ua(e){var i=e.doc;if(i.highlightFrontier>=e.display.viewTo){return};var n=+new Date+e.options.workTime,t=Wt(e,i.highlightFrontier),r=[];i.iter(t.line,Math.min(i.first+i.size,e.display.viewTo+500),function(o){if(t.line>=e.display.viewFrom){var u=o.styles,c=o.text.length>e.options.maxHighlightLength?me(i.mode,t.state):null,h=zo(e,o,t,!0);if(c){t.state=c};o.styles=h.styles;var s=o.styleClasses,l=h.classes;if(l){o.styleClasses=l}
else if(s){o.styleClasses=null};var f=!u||u.length!=o.styles.length||s!=l&&(!s||!l||s.bgClass!=l.bgClass||s.textClass!=l.textClass);for(var a=0;!f&&a<u.length;++a){f=u[a]!=o.styles[a]};if(f){r.push(t.line)};o.stateAfter=t.save();t.nextLine()}
else{if(o.text.length<=e.options.maxHighlightLength){sr(e,o.text,t)};o.stateAfter=t.line%5==0?t.save():null;t.nextLine()};if(+new Date>n){vt(e,e.options.workDelay);return!0}});i.highlightFrontier=t.line;i.modeFrontier=Math.max(i.modeFrontier,t.line);if(r.length){N(e,function(){for(var t=0;t<r.length;t++){te(e,r[t],"text")}})}};var li=function(e,t,i){var r=e.display;this.viewport=t;this.visible=qt(r,e.doc,t);this.editorIsHidden=!r.wrapper.offsetWidth;this.wrapperHeight=r.wrapper.clientHeight;this.wrapperWidth=r.wrapper.clientWidth;this.oldDisplayWidth=Ce(e);this.force=i;this.dims=Ki(e);this.events=[]};li.prototype.signal=function(e,t){if(P(e,t)){this.events.push(arguments)}};li.prototype.finish=function(){for(var e=0;e<this.events.length;e++){g.apply(null,this.events[e])}};function ma(e){var t=e.display;if(!t.scrollbarsClipped&&t.scroller.offsetWidth){t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth;t.heightForcer.style.height=V(e)+"px";t.sizer.style.marginBottom=-t.nativeBarWidth+"px";t.sizer.style.borderRightWidth=V(e)+"px";t.scrollbarsClipped=!0}};function ba(e){if(e.hasFocus()){return null};var r=Q();if(!r||!ue(e.display.lineDiv,r)){return null};var i={activeElt:r};if(window.getSelection){var t=window.getSelection();if(t.anchorNode&&t.extend&&ue(e.display.lineDiv,t.anchorNode)){i.anchorNode=t.anchorNode;i.anchorOffset=t.anchorOffset;i.focusNode=t.focusNode;i.focusOffset=t.focusOffset}};return i};function wa(e){if(!e||!e.activeElt||e.activeElt==Q()){return};e.activeElt.focus();if(e.anchorNode&&ue(document.body,e.anchorNode)&&ue(document.body,e.focusNode)){var t=window.getSelection(),i=document.createRange();i.setEnd(e.anchorNode,e.anchorOffset);i.collapse(!1);t.removeAllRanges();t.addRange(i);t.extend(e.focusNode,e.focusOffset)}};function Ai(e,i){var r=e.display,l=e.doc;if(i.editorIsHidden){ne(e);return!1};if(!i.force&&i.visible.from>=r.viewFrom&&i.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&Jo(e)==0){return!1};if(Br(e)){ne(e);i.dims=Ki(e)};var u=l.first+l.size,n=Math.max(i.visible.from-e.options.viewportMargin,l.first),o=Math.min(u,i.visible.to+e.options.viewportMargin);if(r.viewFrom<n&&n-r.viewFrom<20){n=Math.max(l.first,r.viewFrom)};if(r.viewTo>o&&r.viewTo-o<20){o=Math.min(u,r.viewTo)};if(ee){n=Hr(e.doc,n);o=Gr(e.doc,o)};var a=n!=r.viewFrom||o!=r.viewTo||r.lastWrapHeight!=i.wrapperHeight||r.lastWrapWidth!=i.wrapperWidth;ts(e,n,o);r.viewOffset=J(t(e.doc,r.viewFrom));e.display.mover.style.top=r.viewOffset+"px";var s=Jo(e);if(!a&&s==0&&!i.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)){return!1};var f=ba(e);if(s>4){r.lineDiv.style.display="none"};Ca(e,r.updateLineNumbers,i.dims);if(s>4){r.lineDiv.style.display=""};r.renderedView=r.view;wa(f);se(r.cursorDiv);se(r.selectionDiv);r.gutters.style.height=r.sizer.style.minHeight=0;if(a){r.lastWrapHeight=i.wrapperHeight;r.lastWrapWidth=i.wrapperWidth;vt(e,400)};r.updateLineNumbers=null;return!0};function Zr(e,t){var i=t.viewport;for(var r=!0;;r=!1){if(!r||!e.options.lineWrapping||t.oldDisplayWidth==Ce(e)){if(i&&i.top!=null){i={top:Math.min(e.doc.height+rr(e.display)-Ti(e),i.top)}};t.visible=qt(e.display,e.doc,i);if(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo){break}}
else if(r){t.visible=qt(e.display,e.doc,i)};if(!Ai(e,t)){break};Xt(e);var n=ft(e);Ht(e);Ae(e,n);tr(e,n);t.force=!1};t.signal(e,"update",e);if(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo){t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo);e.display.reportedViewFrom=e.display.viewFrom;e.display.reportedViewTo=e.display.viewTo}};function Di(e,t){var i=new li(e,t);if(Ai(e,i)){Xt(e);Zr(e,i);var r=ft(e);Ht(e);Ae(e,r);tr(e,r);i.finish()}};function Ca(e,t,i){var s=e.display,d=e.options.lineNumbers,a=s.lineDiv,n=a.firstChild;function c(t){var i=t.nextSibling;if(C&&F&&e.display.currentWheelTarget==t){t.style.display="none"}
else{t.parentNode.removeChild(t)};return i};var f=s.view,o=s.viewFrom;for(var l=0;l<f.length;l++){var r=f[l];if(r.hidden);else if(!r.node||r.node.parentNode!=a){var h=Ts(e,r,o,i);a.insertBefore(h,n)}
else{while(n!=r.node){n=c(n)};var u=d&&t!=null&&t<=o&&r.lineNumber;if(r.changes){if(x(r.changes,"gutter")>-1){u=!1};qo(e,r,o,i)};if(u){se(r.lineNumber);r.lineNumber.appendChild(document.createTextNode(fr(e.options,o)))};n=r.node.nextSibling};o+=r.size}
while(n){n=c(n)}};function Ei(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"};function tr(e,t){e.display.sizer.style.minHeight=t.docHeight+"px";e.display.heightForcer.style.top=t.docHeight+"px";e.display.gutters.style.height=(t.docHeight+e.display.barHeight+V(e))+"px"};function zr(e){var i=e.display,r=i.view;if(!i.alignWidgets&&(!i.gutters.firstChild||!e.options.fixedGutter)){return};var s=Vi(i)-i.scroller.scrollLeft+e.doc.scrollLeft,a=i.gutters.offsetWidth,l=s+"px";for(var t=0;t<r.length;t++){if(!r[t].hidden){if(e.options.fixedGutter){if(r[t].gutter){r[t].gutter.style.left=l};if(r[t].gutterBackground){r[t].gutterBackground.style.left=l}};var o=r[t].alignable;if(o){for(var n=0;n<o.length;n++){o[n].style.left=l}}}};if(e.options.fixedGutter){i.gutters.style.left=(s+a)+"px"}};function Br(e){if(!e.options.lineNumbers){return!1};var s=e.doc,r=fr(e.options,s.first+s.size-1),t=e.display;if(r.length!=t.lineNumChars){var n=t.measure.appendChild(i("div",[i("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=n.firstChild.offsetWidth,l=n.offsetWidth-o;t.lineGutter.style.width="";t.lineNumInnerWidth=Math.max(o,t.lineGutter.offsetWidth-l)+1;t.lineNumWidth=t.lineNumInnerWidth+l;t.lineNumChars=t.lineNumInnerWidth?r.length:-1;t.lineGutter.style.width=t.lineNumWidth+"px";Ei(e.display);return!0};return!1};function Qi(e,t){var n=[],l=!1;for(var r=0;r<e.length;r++){var i=e[r],o=null;if(typeof i!="string"){o=i.style;i=i.className};if(i=="CodeMirror-linenumbers"){if(!t){continue}
else{l=!0}};n.push({className:i,style:o})};if(t&&!l){n.push({className:"CodeMirror-linenumbers",style:null})};return n};function Pr(e){var n=e.gutters,o=e.gutterSpecs;se(n);e.lineGutter=null;for(var r=0;r<o.length;++r){var l=o[r],s=l.className,a=l.style,t=n.appendChild(i("div",null,"CodeMirror-gutter "+s));if(a){t.style.cssText=a};if(s=="CodeMirror-linenumbers"){e.lineGutter=t;t.style.width=(e.lineNumWidth||1)+"px"}};n.style.display=o.length?"":"none";Ei(e)};function Dt(e){Pr(e.display);k(e);zr(e)};function La(e,t,r,n){var o=this;this.input=r;o.scrollbarFiller=i("div",null,"CodeMirror-scrollbar-filler");o.scrollbarFiller.setAttribute("cm-not-content","true");o.gutterFiller=i("div",null,"CodeMirror-gutter-filler");o.gutterFiller.setAttribute("cm-not-content","true");o.lineDiv=We("div",null,"CodeMirror-code");o.selectionDiv=i("div",null,null,"position: relative; z-index: 1");o.cursorDiv=i("div",null,"CodeMirror-cursors");o.measure=i("div",null,"CodeMirror-measure");o.lineMeasure=i("div",null,"CodeMirror-measure");o.lineSpace=We("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var s=We("div",[o.lineSpace],"CodeMirror-lines");o.mover=i("div",[s],null,"position: relative");o.sizer=i("div",[o.mover],"CodeMirror-sizer");o.sizerWidth=null;o.heightForcer=i("div",null,null,"position: absolute; height: "+Jn+"px; width: 1px;");o.gutters=i("div",null,"CodeMirror-gutters");o.lineGutter=null;o.scroller=i("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll");o.scroller.setAttribute("tabIndex","-1");o.wrapper=i("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror");if(l&&c<8){o.gutters.style.zIndex=-1;o.scroller.style.paddingRight=0};if(!C&&!(q&&Lt)){o.scroller.draggable=!0};if(e){if(e.appendChild){e.appendChild(o.wrapper)}
else{e(o.wrapper)}};o.viewFrom=o.viewTo=t.first;o.reportedViewFrom=o.reportedViewTo=t.first;o.view=[];o.renderedView=null;o.externalMeasured=null;o.viewOffset=0;o.lastWrapHeight=o.lastWrapWidth=0;o.updateLineNumbers=null;o.nativeBarWidth=o.barHeight=o.barWidth=0;o.scrollbarsClipped=!1;o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null;o.alignWidgets=!1;o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null;o.maxLine=null;o.maxLineLength=0;o.maxLineChanged=!1;o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null;o.shift=!1;o.selForContextMenu=null;o.activeTouch=null;o.gutterSpecs=Qi(n.gutters,n.lineNumbers);Pr(o);r.init(o)};var si=0,W=null;if(l){W=-.53}
else if(q){W=15}
else if(gi){W=-.7}
else if(En){W=-1/3};function Vr(e){var i=e.wheelDeltaX,t=e.wheelDeltaY;if(i==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){i=e.detail};if(t==null&&e.detail&&e.axis==e.VERTICAL_AXIS){t=e.detail}
else if(t==null){t=e.wheelDelta};return{x:i,y:t}};function ka(e){var t=Vr(e);t.x*=W;t.y*=W;return t};function jr(e,t){var d=Vr(t),l=d.x,n=d.y,i=e.display,r=i.scroller,p=r.scrollWidth>r.clientWidth,c=r.scrollHeight>r.clientHeight;if(!(l&&p||n&&c)){return};if(n&&F&&C){outer:for(var o=t.target,h=i.view;o!=r;o=o.parentNode){for(var f=0;f<h.length;f++){if(h[f].node==o){e.display.currentWheelTarget=o;break outer}}}};if(l&&!q&&!E&&W!=null){if(n&&c){ht(e,Math.max(0,r.scrollTop+n*W))};ge(e,Math.max(0,r.scrollLeft+l*W));if(!n||(n&&c)){M(t)};i.wheelStartX=null;return};if(n&&W!=null){var a=n*W,s=e.doc.scrollTop,u=s+i.wrapper.clientHeight;if(a<0){s=Math.max(0,s+a-50)}
else{u=Math.min(e.doc.height,u+a+50)};Di(e,{top:s,bottom:u})};if(si<20){if(i.wheelStartX==null){i.wheelStartX=r.scrollLeft;i.wheelStartY=r.scrollTop;i.wheelDX=l;i.wheelDY=n;setTimeout(function(){if(i.wheelStartX==null){return};var e=r.scrollLeft-i.wheelStartX,t=r.scrollTop-i.wheelStartY,n=(t&&i.wheelDY&&t/i.wheelDY)||(e&&i.wheelDX&&e/i.wheelDX);i.wheelStartX=i.wheelStartY=null;if(!n){return};W=(W*si+n)/(si+1);++si},200)}
else{i.wheelDX+=l;i.wheelDY+=n}}};var O=function(e,t){this.ranges=e;this.primIndex=t};O.prototype.primary=function(){return this.ranges[this.primIndex]};O.prototype.equals=function(e){if(e==this){return!0};if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length){return!1};for(var t=0;t<this.ranges.length;t++){var i=this.ranges[t],r=e.ranges[t];if(!ur(i.anchor,r.anchor)||!ur(i.head,r.head)){return!1}};return!0};O.prototype.deepCopy=function(){var t=[];for(var e=0;e<this.ranges.length;e++){t[e]=new s(ar(this.ranges[e].anchor),ar(this.ranges[e].head))};return new O(t,this.primIndex)};O.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++){if(!this.ranges[e].empty()){return!0}};return!1};O.prototype.contains=function(e,t){if(!t){t=e};for(var i=0;i<this.ranges.length;i++){var r=this.ranges[i];if(o(t,r.from())>=0&&o(e,r.to())<=0){return i}};return-1};var s=function(e,t){this.anchor=e;this.head=t};s.prototype.from=function(){return Bt(this.anchor,this.head)};s.prototype.to=function(){return Et(this.anchor,this.head)};s.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function R(e,t,i){var h=e&&e.options.selectionsMayTouch,d=t[i];t.sort(function(e,t){return o(e.from(),t.from())});i=x(t,d);for(var l=1;l<t.length;l++){var r=t[l],n=t[l-1],c=o(n.to(),r.from());if(h&&!r.empty()?c>0:c>=0){var a=Bt(n.from(),r.from()),u=Et(n.to(),r.to()),f=n.empty()?r.from()==r.head:n.from()==n.head;if(l<=i){--i};t.splice(--l,2,new s(f?u:a,f?a:u))}};return new O(t,i)};function oe(e,t){return new O([new s(e,t||e)],0)};function re(t){if(!t.text){return t.to};return e(t.from.line+t.text.length-1,a(t.text).length+(t.text.length==1?t.from.ch:0))};function vn(t,i){if(o(t,i.from)<0){return t};if(o(t,i.to)<=0){return re(i)};var n=t.line+i.text.length-(i.to.line-i.from.line)-1,r=t.ch;if(t.line==i.to.line){r+=re(i).ch-i.to.ch};return e(n,r)};function Gi(e,t){var n=[];for(var i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new s(vn(r.anchor,t),vn(r.head,t)))};return R(e.cm,n,e.sel.primIndex)};function mn(t,i,r){if(t.line==i.line){return e(r.line,t.ch-i.ch+r.ch)}
else{return e(r.line+(t.line-i.line),t.ch)}};function Qs(t,i,r){var c=[],a=e(t.first,0),h=a;for(var n=0;n<i.length;n++){var u=i[n],l=mn(u.from,a,h),f=mn(re(u),a,h);a=u.to;h=f;if(r=="around"){var d=t.sel.ranges[n],p=o(d.head,d.anchor)<0;c[n]=new s(p?f:l,p?l:f)}
else{c[n]=new s(l,l)}};return new O(c,t.sel.primIndex)};function Bi(e){e.doc.mode=dr(e.options,e.doc.modeOption);Ct(e)};function Ct(e){e.doc.iter(function(e){if(e.stateAfter){e.stateAfter=null};if(e.styles){e.styles=null}});e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first;vt(e,100);e.state.modeGen++;if(e.curOp){k(e)}};function Rn(e,t){return t.from.ch==0&&t.to.ch==0&&a(t.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)};function Pi(e,i,r,n){function d(e){return r?r[e]:null};function c(e,t,r){ul(e,t,r,n);b(e,"change",e,i)};function g(e,t){var r=[];for(var i=e;i<t;++i){r.push(new Fe(o[i],d(i),n))};return r};var l=i.from,u=i.to,o=i.text,s=t(e,l.line),f=t(e,u.line),v=a(o),p=d(o.length-1),h=u.line-l.line;if(i.full){e.insert(0,g(0,o.length));e.remove(o.length,e.size-o.length)}
else if(Rn(e,i)){var y=g(0,o.length-1);c(f,f.text,p);if(h){e.remove(l.line,h)};if(y.length){e.insert(l.line,y)}}
else if(s==f){if(o.length==1){c(s,s.text.slice(0,l.ch)+v+s.text.slice(u.ch),p)}
else{var m=g(1,o.length-1);m.push(new Fe(v+s.text.slice(u.ch),p,n));c(s,s.text.slice(0,l.ch)+o[0],d(0));e.insert(l.line+1,m)}}
else if(o.length==1){c(s,s.text.slice(0,l.ch)+o[0]+f.text.slice(u.ch),d(0));e.remove(l.line+1,h)}
else{c(s,s.text.slice(0,l.ch)+o[0],d(0));c(f,v+f.text.slice(u.ch),p);var w=g(1,o.length-1);if(h>1){e.remove(l.line+1,h-1)};e.insert(l.line+1,w)};b(e,"change",e,i)};function le(e,t,i){function r(e,n,o){if(e.linked){for(var a=0;a<e.linked.length;++a){var l=e.linked[a];if(l.doc==n){continue};var s=o&&l.sharedHist;if(i&&!s){continue};t(l.doc,s);r(l.doc,e,s)}}};r(e,null,!0)};function Bn(e,t){if(t.cm){throw new Error("This document is already in use.")};e.doc=t;t.cm=e;Ui(e);Bi(e);Gn(e);if(!e.options.lineWrapping){Oi(e)};e.options.mode=t.modeOption;k(e)};function Gn(e){(e.doc.direction=="rtl"?ke:ve)(e.display.lineDiv,"CodeMirror-rtl")};function Vs(e){N(e,function(){Gn(e);k(e)})};function oi(e){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=e||1};function zi(e,t){var i={from:ar(t.from),to:re(t),text:de(e,t.from,t.to)};qn(e,i,t.from.line,t.to.line+1);le(e,function(e){return qn(e,i,t.from.line,t.to.line+1)},!0);return i};function In(e){while(e.length){var t=a(e);if(t.ranges){e.pop()}
else{break}}};function Ks(e,t){if(t){In(e.done);return a(e.done)}
else if(e.done.length&&!a(e.done).ranges){return a(e.done)}
else if(e.done.length>1&&!e.done[e.done.length-2].ranges){e.done.pop();return a(e.done)}};function Kn(e,t,i,r){var n=e.history;n.undone.length=0;var f=+new Date,l,s;if((n.lastOp==r||n.lastOrigin==t.origin&&t.origin&&((t.origin.charAt(0)=="+"&&n.lastModTime>f-(e.cm?e.cm.options.historyEventDelay:500))||t.origin.charAt(0)=="*"))&&(l=Ks(n,n.lastOp==r))){s=a(l.changes);if(o(t.from,t.to)==0&&o(t.from,s.to)==0){s.to=re(t)}
else{l.changes.push(zi(e,t))}}
else{var u=a(n.done);if(!u||!u.ranges){di(e.sel,n.done)};l={changes:[zi(e,t)],generation:n.generation};n.done.push(l);while(n.done.length>n.undoDepth){n.done.shift();if(!n.done[0].ranges){n.done.shift()}}};n.done.push(i);n.generation=++n.maxGeneration;n.lastModTime=n.lastSelTime=f;n.lastOp=n.lastSelOp=r;n.lastOrigin=n.lastSelOrigin=t.origin;if(!s){g(e,"historyAdded")}};function js(e,t,i,r){var n=t.charAt(0);return n=="*"||n=="+"&&i.ranges.length==r.ranges.length&&i.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)};function Xs(e,t,i,r){var n=e.history,o=r&&r.origin;if(i==n.lastSelOp||(o&&n.lastSelOrigin==o&&(n.lastModTime==n.lastSelTime&&n.lastOrigin==o||js(e,o,a(n.done),t)))){n.done[n.done.length-1]=t}
else{di(t,n.done)};n.lastSelTime=+new Date;n.lastSelOrigin=o;n.lastSelOp=i;if(r&&r.clearRedo!==!1){In(n.undone)}};function di(e,t){var i=a(t);if(!(i&&i.ranges&&i.equals(e))){t.push(e)}};function qn(e,t,i,r){var n=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,i),Math.min(e.first+e.size,r),function(i){if(i.markedSpans){(n||(n=t["spans_"+e.id]={}))[o]=i.markedSpans};++o})};function qs(e){if(!e){return null};var t;for(var i=0;i<e.length;++i){if(e[i].marker.explicitlyCleared){if(!t){t=e.slice(0,i)}}
else if(t){t.push(e[i])}};return!t?e:t.length?t:null};function Gs(e,t){var n=t["spans_"+e.id];if(!n){return null};var r=[];for(var i=0;i<t.text.length;++i){r.push(qs(n[i]))};return r};function Zn(e,t){var i=Gs(e,t),a=Dr(e,t);if(!i){return a};if(!a){return i};for(var n=0;n<i.length;++n){var o=i[n],r=a[n];if(o&&r){spans:for(var s=0;s<r.length;++s){var u=r[s];for(var l=0;l<o.length;++l){if(o[l].marker==u.marker){continue;spans}};o.push(u)}}
else if(r){i[n]=r}};return i};function Ye(e,t,i){var f=[];for(var u=0;u<e.length;++u){var o=e[u];if(o.ranges){f.push(i?O.prototype.deepCopy.call(o):o);continue};var h=o.changes,s=[];f.push({changes:s});for(var l=0;l<h.length;++l){var r=h[l],c=(void 0);s.push({from:r.from,to:r.to,text:r.text});if(t){for(var n in r){if(c=n.match(/^spans_(\d+)$/)){if(x(t,Number(c[1]))>-1){a(s)[n]=r[n];delete r[n]}}}}}};return f};function Ri(e,t,i,r){if(r){var n=e.anchor;if(i){var l=o(t,n)<0;if(l!=(o(i,n)<0)){n=t;t=i}
else if(l!=(o(t,i)<0)){t=i}};return new s(n,t)}
else{return new s(i||t,t)}};function Jt(e,t,i,r,n){if(n==null){n=e.cm&&(e.cm.display.shift||e.extend)};w(e,new O([Ri(e.sel.primary(),t,i,n)],0),r)};function Pn(e,t,i){var n=[],l=e.cm&&(e.cm.display.shift||e.extend);for(var r=0;r<e.sel.ranges.length;r++){n[r]=Ri(e.sel.ranges[r],t[r],null,l)};var o=R(e.cm,n,e.sel.primIndex);w(e,o,i)};function Zi(e,t,i,r){var n=e.sel.ranges.slice(0);n[t]=i;w(e,R(e.cm,n,e.sel.primIndex),r)};function Mn(e,t,i,r){w(e,oe(t,i),r)};function Js(e,t,i){var r={ranges:t.ranges,update:function(t){this.ranges=[];for(var i=0;i<t.length;i++){this.ranges[i]=new s(n(e,t[i].anchor),n(e,t[i].head))}},origin:i&&i.origin};g(e,"beforeSelectionChange",e,r);if(e.cm){g(e.cm,"beforeSelectionChange",e.cm,r)};if(r.ranges!=t.ranges){return R(e.cm,r.ranges,r.ranges.length-1)}
else{return t}};function Fn(e,t,i){var r=e.history.done,n=a(r);if(n&&n.ranges){r[r.length-1]=t;ti(e,t,i)}
else{w(e,t,i)}};function w(e,t,i){ti(e,t,i);Xs(e,e.sel,e.cm?e.cm.curOp.id:NaN,i)};function ti(e,t,i){if(P(e,"beforeSelectionChange")||e.cm&&P(e.cm,"beforeSelectionChange")){t=Js(e,t,i)};var r=i&&i.bias||(o(t.primary().head,e.sel.primary().head)<0?-1:1);xn(e,Sn(e,t,r,!0));if(!(i&&i.scroll===!1)&&e.cm){De(e.cm)}};function xn(e,t){if(t.equals(e.sel)){return};e.sel=t;if(e.cm){e.cm.curOp.updateInput=1;e.cm.curOp.selectionChanged=!0;to(e.cm)};b(e,"cursorActivity",e)};function Cn(e){xn(e,Sn(e,e.sel,null,!1))};function Sn(e,t,i,r){var o;for(var n=0;n<t.ranges.length;n++){var l=t.ranges[n],a=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[n],u=ii(e,l.anchor,a&&a.anchor,i,r),f=ii(e,l.head,a&&a.head,i,r);if(o||u!=l.anchor||f!=l.head){if(!o){o=t.ranges.slice(0,n)};o[n]=new s(u,f)}};return o?R(e.cm,o,t.primIndex):t};function Pe(e,i,r,n,l){var f=t(e,i.line);if(f.markedSpans){for(var h=0;h<f.markedSpans.length;++h){var u=f.markedSpans[h],s=u.marker,p=("selectLeft" in s)?!s.selectLeft:s.inclusiveLeft,v=("selectRight" in s)?!s.selectRight:s.inclusiveRight;if((u.from==null||(p?u.from<=i.ch:u.from<i.ch))&&(u.to==null||(v?u.to>=i.ch:u.to>i.ch))){if(l){g(s,"beforeCursorEnter");if(s.explicitlyCleared){if(!f.markedSpans){break}
else{--h;continue}}};if(!s.atomic){continue};if(r){var a=s.find(n<0?1:-1),d=(void 0);if(n<0?v:p){a=bn(e,a,-n,a&&a.line==i.line?f:null)};if(a&&a.line==i.line&&(d=o(a,r))&&(n<0?d<0:d>0)){return Pe(e,a,i,n,l)}};var c=s.find(n<0?-1:1);if(n<0?p:v){c=bn(e,c,n,c.line==i.line?f:null)};return c?Pe(e,c,i,n,l):null}}};return i};function ii(t,i,r,n,o){var l=n||1,s=Pe(t,i,r,l,o)||(!o&&Pe(t,i,r,l,!0))||Pe(t,i,r,-l,o)||(!o&&Pe(t,i,r,-l,!0));if(!s){t.cantEdit=!0;return e(t.first,0)};return s};function bn(i,r,o,l){if(o<0&&r.ch==0){if(r.line>i.first){return n(i,e(r.line-1))}
else{return null}}
else if(o>0&&r.ch==(l||t(i,r.line)).text.length){if(r.line<i.first+i.size-1){return e(r.line+1,0)}
else{return null}}
else{return new e(r.line,r.ch+o)}};function Tn(t){t.setSelection(e(t.firstLine(),0),e(t.lastLine()),j)};function Nn(e,t,i){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};if(i){r.update=function(t,i,o,l){if(t){r.from=n(e,t)};if(i){r.to=n(e,i)};if(o){r.text=o};if(l!==undefined){r.origin=l}}};g(e,"beforeChange",e,r);if(e.cm){g(e.cm,"beforeChange",e.cm,r)};if(r.canceled){if(e.cm){e.cm.curOp.updateInput=2};return null};return{from:r.from,to:r.to,text:r.text,origin:r.origin}};function Ge(e,t,i){if(e.cm){if(!e.cm.curOp){return v(e.cm,Ge)(e,t,i)};if(e.cm.state.suppressEdits){return}};if(P(e,"beforeChange")||e.cm&&P(e.cm,"beforeChange")){t=Nn(e,t,!0);if(!t){return}};var n=Jr&&!i&&ks(e,t.from,t.to);if(n){for(var r=n.length-1;r>=0;--r){On(e,{from:n[r].from,to:n[r].to,text:r?[""]:t.text,origin:t.origin})}}
else{On(e,t)}};function On(e,t){if(t.text.length==1&&t.text[0]==""&&o(t.from,t.to)==0){return};var r=Gi(e,t);Kn(e,t,r,e.cm?e.cm.curOp.id:NaN);Ot(e,t,r,Dr(e,t));var i=[];le(e,function(e,r){if(!r&&x(i,e.history)==-1){an(e.history,t);i.push(e.history)};Ot(e,t,null,Dr(e,t))})};function ri(e,t,i){var d=e.cm&&e.cm.state.suppressEdits;if(d&&!i){return};var n=e.history,r,h=e.sel,o=t=="undo"?n.done:n.undone,u=t=="undo"?n.undone:n.done,l=0;for(;l<o.length;l++){r=o[l];if(i?r.ranges&&!r.equals(e.sel):!r.ranges){break}};if(l==o.length){return};n.lastOrigin=n.lastSelOrigin=null;for(;;){r=o.pop();if(r.ranges){di(r,u);if(i&&!r.equals(e.sel)){w(e,r,{clearRedo:!1});return};h=r}
else if(d){o.push(r);return}
else{break}};var c=[];di(h,u);u.push({changes:c,generation:n.generation});n.generation=r.generation||++n.maxGeneration;var p=P(e,"beforeChange")||e.cm&&P(e.cm,"beforeChange"),g=function(i){var n=r.changes[i];n.origin=t;if(p&&!Nn(e,n,!1)){o.length=0;return{}};c.push(zi(e,n));var s=i?Gi(e,n):a(o);Ot(e,n,s,Zn(e,n));if(!i&&e.cm){e.cm.scrollIntoView({from:n.from,to:re(n)})};var l=[];le(e,function(e,t){if(!t&&x(l,e.history)==-1){an(e.history,n);l.push(e.history)};Ot(e,n,null,Zn(e,n))})};for(var s=r.changes.length-1;s>=0;--s){var f=g(s);if(f)return f.v}};function Dn(t,i){if(i==0){return};t.first+=i;t.sel=new O(mi(t.sel.ranges,function(t){return new s(e(t.anchor.line+i,t.anchor.ch),e(t.head.line+i,t.head.ch))}),t.sel.primIndex);if(t.cm){k(t.cm,t.first,t.first-i,i);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++){te(t.cm,r,"gutter")}}};function Ot(i,r,n,o){if(i.cm&&!i.cm.curOp){return v(i.cm,Ot)(i,r,n,o)};if(r.to.line<i.first){Dn(i,r.text.length-1-(r.to.line-r.from.line));return};if(r.from.line>i.lastLine()){return};if(r.from.line<i.first){var s=r.text.length-1-(i.first-r.from.line);Dn(i,s);r={from:e(i.first,0),to:e(r.to.line+s,r.to.ch),text:[a(r.text)],origin:r.origin}};var l=i.lastLine();if(r.to.line>l){r={from:r.from,to:e(l,t(i,l).text.length),text:[r.text[0]],origin:r.origin}};r.removed=de(i,r.from,r.to);if(!n){n=Gi(i,r)};if(i.cm){Bs(i.cm,r,o)}
else{Pi(i,r,o)};ti(i,n,j);if(i.cantEdit&&ii(i,e(i.firstLine(),0))){i.cantEdit=!1}};function Bs(e,i,r){var o=e.doc,l=e.display,n=i.from,s=i.to,a=!1,f=n.line;if(!e.options.lineWrapping){f=u(G(t(o,n.line)));o.iter(f,s.line+1,function(e){if(e==l.maxLine){a=!0;return!0}})};if(o.sel.contains(i.from,i.to)>-1){to(e)};Pi(o,i,r,mo(e));if(!e.options.lineWrapping){o.iter(f,n.line+i.text.length,function(e){var t=pi(e);if(t>l.maxLineLength){l.maxLine=e;l.maxLineLength=t;l.maxLineChanged=!0;a=!1}});if(a){e.curOp.updateMaxLine=!0}};Es(o,n.line);vt(e,400);var p=i.text.length-(s.line-n.line)-1;if(i.full){k(e)}
else if(n.line==s.line&&i.text.length==1&&!Rn(e.doc,i)){te(e,n.line,"text")}
else{k(e,n.line,s.line+1,p)};var h=P(e,"changes"),d=P(e,"change");if(d||h){var c={from:n,to:s,text:i.text,removed:i.removed,origin:i.origin};if(d){b(e,"change",e,c)};if(h){(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(c)}};e.display.selForContextMenu=null};function Be(e,t,i,r,n){var l;if(!r){r=i};if(o(r,i)<0){(l=[r,i],i=l[0],r=l[1])};if(typeof t=="string"){t=e.splitLines(t)};Ge(e,{from:i,to:r,text:t,origin:n})};function Hn(e,t,i,r){if(i<e.line){e.line+=r}
else if(t<e.line){e.line=t;e.ch=0}};function io(t,i,r,n){for(var s=0;s<t.length;++s){var o=t[s],f=!0;if(o.ranges){if(!o.copied){o=t[s]=o.deepCopy();o.copied=!0};for(var a=0;a<o.ranges.length;a++){Hn(o.ranges[a].anchor,i,r,n);Hn(o.ranges[a].head,i,r,n)};continue};for(var u=0;u<o.changes.length;++u){var l=o.changes[u];if(r<l.from.line){l.from=e(l.from.line+n,l.from.ch);l.to=e(l.to.line+n,l.to.ch)}
else if(i<=l.to.line){f=!1;break}};if(!f){t.splice(0,s+1);s=0}}};function an(e,t){var i=t.from.line,r=t.to.line,n=t.text.length-(r-i)-1;io(e.done,i,r,n);io(e.undone,i,r,n)};function bt(e,i,r,n){var o=i,l=i;if(typeof i=="number"){l=t(e,el(e,i))}
else{o=u(i)};if(o==null){return null};if(n(l,o)&&e.cm){te(e.cm,o,r)};return l};function At(e){this.lines=e;this.parent=null;var i=0;for(var t=0;t<e.length;++t){e[t].parent=this;i+=e[t].height};this.height=i};At.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var r=e,n=e+t;r<n;++r){var i=this.lines[r];this.height-=i.height;Pl(i);b(i,"delete")};this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,i){this.height+=i;this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0;r<t.length;++r){t[r].parent=this}},iterN:function(e,t,i){for(var r=e+t;e<r;++e){if(i(this.lines[e])){return!0}}}};function Ft(e){this.children=e;var r=0,n=0;for(var i=0;i<e.length;++i){var t=e[i];r+=t.chunkSize();n+=t.height;t.parent=this};this.size=r;this.height=n;this.parent=null};Ft.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),s=i.height;i.removeInner(e,o);this.height-=s-i.height;if(r==o){this.children.splice(n--,1);i.parent=null};if((t-=o)==0){break};e=0}
else{e-=r}};if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof At))){var l=[];this.collapse(l);this.children=[new At(l)];this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t){this.children[t].collapse(e)}},insertInner:function(e,t,i){this.size+=t.length;this.height+=i;for(var n=0;n<this.children.length;++n){var r=this.children[n],a=r.chunkSize();if(e<=a){r.insertInner(e,t,i);if(r.lines&&r.lines.length>50){var s=r.lines.length%25+25;for(var l=s;l<r.lines.length;){var o=new At(r.lines.slice(l,l+=25));r.height-=o.height;this.children.splice(++n,0,o);o.parent=this};r.lines=r.lines.slice(0,s);this.maybeSpill()};break};e-=a}},maybeSpill:function(){if(this.children.length<=10){return};var e=this;do{var n=e.children.splice(e.children.length-5,5),t=new Ft(n);if(!e.parent){var i=new Ft(e.children);i.parent=e;e.children=[i,t];e=i}
else{e.size-=t.size;e.height-=t.height;var r=x(e.parent.children,e);e.parent.children.splice(r+1,0,t)};t.parent=e.parent}
while(e.children.length>10)e.parent.maybeSpill()},iterN:function(e,t,i){for(var n=0;n<this.children.length;++n){var l=this.children[n],r=l.chunkSize();if(e<r){var o=Math.min(t,r-e);if(l.iterN(e,o,i)){return!0};if((t-=o)==0){break};e=0}
else{e-=r}}}};var Je=function(e,t,i){if(i){for(var r in i){if(i.hasOwnProperty(r)){this[r]=i[r]}}};this.doc=e;this.node=t};Je.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,i=this.line,n=u(i);if(n==null||!t){return};for(var r=0;r<t.length;++r){if(t[r]==this){t.splice(r--,1)}};if(!t.length){i.widgets=null};var o=ot(this);K(i,Math.max(0,i.height-o));if(e){N(e,function(){An(e,i,-o);te(e,n,"widget")});b(e,"lineWidgetCleared",e,this,n)}};Je.prototype.changed=function(){var r=this,n=this.height,e=this.doc.cm,t=this.line;this.height=null;var i=ot(this)-n;if(!i){return};if(!ae(this.doc,t)){K(t,t.height+i)};if(e){N(e,function(){e.curOp.forceUpdate=!0;An(e,t,i);b(e,"lineWidgetChanged",e,r,u(t))})}};Oe(Je);function An(e,t,i){if(J(t)<((e.curOp&&e.curOp.scrollTop)||e.doc.scrollTop)){Ni(e,i)}};function pl(e,t,i,r){var n=new Je(e,i,r),o=e.cm;if(o&&n.noHScroll){o.display.alignWidgets=!0};bt(e,t,"widget",function(t){var i=t.widgets||(t.widgets=[]);if(n.insertAt==null){i.push(n)}
else{i.splice(Math.min(i.length-1,Math.max(0,n.insertAt)),0,n)};n.line=t;if(o&&!ae(e,t)){var r=J(t)<e.scrollTop;K(t,t.height+ot(n));if(r){Ni(o,n.height)};o.curOp.forceUpdate=!0};return!0});if(o){b(o,"lineWidgetAdded",o,n,typeof t=="number"?t:u(t))};return n};var dn=0,fe=function(e,t){this.lines=[];this.type=t;this.doc=e;this.id=++dn};fe.prototype.clear=function(){if(this.explicitlyCleared){return};var e=this.doc.cm,c=e&&!e.curOp;if(c){ye(e)};if(P(this,"clear")){var s=this.find();if(s){b(this,"clear",s.from,s.to)}};var r=null,l=null;for(var o=0;o<this.lines.length;++o){var t=this.lines[o],i=Tt(t.markedSpans,this);if(e&&!this.collapsed){te(e,u(t),"text")}
else if(e){if(i.to!=null){l=u(t)};if(i.from!=null){r=u(t)}};t.markedSpans=Hs(t.markedSpans,i);if(i.from==null&&this.collapsed&&!ae(this.doc,t)&&e){K(t,Ue(e.display))}};if(e&&this.collapsed&&!e.options.lineWrapping){for(var n=0;n<this.lines.length;++n){var a=G(this.lines[n]),f=pi(a);if(f>e.display.maxLineLength){e.display.maxLine=a;e.display.maxLineLength=f;e.display.maxLineChanged=!0}}};if(r!=null&&e&&this.collapsed){k(e,r,l+1)};this.lines.length=0;this.explicitlyCleared=!0;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=!1;if(e){Cn(e.doc)}};if(e){b(e,"markerCleared",e,this,r,l)};if(c){be(e)};if(this.parent){this.parent.clear()}};fe.prototype.find=function(t,i){if(t==null&&this.type=="bookmark"){t=1};var o,s;for(var l=0;l<this.lines.length;++l){var r=this.lines[l],n=Tt(r.markedSpans,this);if(n.from!=null){o=e(i?r:u(r),n.from);if(t==-1){return o}};if(n.to!=null){s=e(i?r:u(r),n.to);if(t==1){return s}}};return o&&{from:o,to:s}};fe.prototype.changed=function(){var r=this,i=this.find(-1,!0),t=this,e=this.doc.cm;if(!i||!e){return};N(e,function(){var n=i.line,a=u(i.line),l=Ii(e,a);if(l){Eo(l);e.curOp.selectionChanged=e.curOp.forceUpdate=!0};e.curOp.updateMaxLine=!0;if(!ae(t.doc,n)&&t.height!=null){var s=t.height;t.height=null;var o=ot(t)-s;if(o){K(n,n.height+o)}};b(e,"markerChanged",e,r)})};fe.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;if(!t.maybeHiddenMarkers||x(t.maybeHiddenMarkers,this)==-1){(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}};this.lines.push(e)};fe.prototype.detachLine=function(e){this.lines.splice(x(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}};Oe(fe);function Ee(e,t,i,n,s){if(n&&n.shared){return sl(e,t,i,n,s)};if(e.cm&&!e.cm.curOp){return v(e.cm,Ee)(e,t,i,n,s)};var l=new fe(e,s),h=o(t,i);if(n){Le(n,l,!1)};if(h>0||h==0&&l.clearWhenEmpty!==!1){return l};if(l.replacedWith){l.collapsed=!0;l.widgetNode=We("span",[l.replacedWith],"CodeMirror-widget");if(!n.handleMouseEvents){l.widgetNode.setAttribute("cm-ignore-events","true")};if(n.insertLeft){l.widgetNode.insertLeft=!0}};if(l.collapsed){if(jo(e,t.line,t,i,l)||t.line!=i.line&&jo(e,i.line,t,i,l)){throw new Error("Inserting collapsed marker partially overlapping an existing one")};Fs()};if(l.addToHistory){Kn(e,{from:t,to:i,origin:"markText"},e.sel,NaN)};var u=t.line,a=e.cm,c;e.iter(u,i.line+1,function(e){if(a&&l.collapsed&&!a.options.lineWrapping&&G(e)==a.display.maxLine){c=!0};if(l.collapsed&&u!=t.line){K(e,0)};Ws(e,new Rt(l,u==t.line?t.ch:null,u==i.line?i.ch:null));++u});if(l.collapsed){e.iter(t.line,i.line+1,function(t){if(ae(e,t)){K(t,0)}})};if(l.clearOnEnter){r(l,"beforeCursorEnter",function(){return l.clear()})};if(l.readOnly){Ps();if(e.history.done.length||e.history.undone.length){e.clearHistory()}};if(l.collapsed){l.id=++dn;l.atomic=!0};if(a){if(c){a.curOp.updateMaxLine=!0};if(l.collapsed){k(a,t.line,i.line+1)}
else if(l.className||l.startStyle||l.endStyle||l.css||l.attributes||l.title){for(var f=t.line;f<=i.line;f++){te(a,f,"text")}};if(l.atomic){Cn(a.doc)};b(a,"markerAdded",a,l)};return l};var Ze=function(e,t){this.markers=e;this.primary=t;for(var i=0;i<e.length;++i){e[i].parent=this}};Ze.prototype.clear=function(){if(this.explicitlyCleared){return};this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e){this.markers[e].clear()};b(this,"clear")};Ze.prototype.find=function(e,t){return this.primary.find(e,t)};Oe(Ze);function sl(e,t,i,r,o){r=Le(r);r.shared=!1;var l=[Ee(e,t,i,r,o)],s=l[0],u=r.widgetNode;le(e,function(e){if(u){r.widgetNode=u.cloneNode(!0)};l.push(Ee(e,n(e,t),n(e,i),r,o));for(var f=0;f<e.linked.length;++f){if(e.linked[f].isParent){return}};s=a(l)});return new Ze(l,s)};function wn(t){return t.findMarks(e(t.first,0),t.clipPos(e(t.lastLine())),function(e){return e.parent})};function ll(e,t){for(var r=0;r<t.length;r++){var i=t[r],l=i.find(),s=e.clipPos(l.from),a=e.clipPos(l.to);if(o(s,a)){var n=Ee(e,s,a,i.primary,i.primary.type);i.markers.push(n);n.parent=i}}};function al(e){var i=function(t){var i=e[t],o=[i.primary.doc];le(i.primary.doc,function(e){return o.push(e)});for(var r=0;r<i.markers.length;r++){var n=i.markers[r];if(x(o,n.doc)==-1){n.parent=null;i.markers.splice(r--,1)}}};for(var t=0;t<e.length;t++)i(t)};var Vl=0,T=function(t,i,r,n,o){if(!(this instanceof T)){return new T(t,i,r,n,o)};if(r==null){r=0};Ft.call(this,[new At([new Fe("",null)])]);this.first=r;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=r;var l=e(r,0);this.sel=oe(l);this.history=new oi(null);this.id=++Vl;this.modeOption=i;this.lineSep=n;this.direction=(o=="rtl")?"rtl":"ltr";this.extend=!1;if(typeof t=="string"){t=this.splitLines(t)};Pi(this,{from:l,to:l,text:t});w(this,oe(l),j)};T.prototype=Er(Ft.prototype,{constructor:T,iter:function(e,t,i){if(i){this.iterN(e-this.first,t-e,i)}
else{this.iterN(this.first,this.first+this.size,e)}},insert:function(e,t){var r=0;for(var i=0;i<t.length;++i){r+=t[i].height};this.insertInner(e-this.first,t,r)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=cr(this,this.first,this.first+this.size);if(e===!1){return t};return t.join(e||this.lineSeparator())},setValue:m(function(i){var r=e(this.first,0),n=this.first+this.size-1;Ge(this,{from:r,to:e(n,t(this,n).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0);if(this.cm){pt(this.cm,0,0)};w(this,oe(r),j)}),replaceRange:function(e,t,i,r){t=n(this,t);i=i?n(this,i):t;Be(this,e,t,i,r)},getRange:function(e,t,i){var r=de(this,n(this,e),n(this,t));if(i===!1){return r};return r.join(i||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Nt(this,e)){return t(this,e)}},getLineNumber:function(e){return u(e)},getLineHandleVisualStart:function(e){if(typeof e=="number"){e=t(this,e)};return G(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return n(this,e)},getCursor:function(e){var i=this.sel.primary(),t;if(e==null||e=="head"){t=i.head}
else if(e=="anchor"){t=i.anchor}
else if(e=="end"||e=="to"||e===!1){t=i.to()}
else{t=i.from()};return t},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:m(function(t,i,r){Mn(this,n(this,typeof t=="number"?e(t,i||0):t),null,r)}),setSelection:m(function(e,t,i){Mn(this,n(this,e),n(this,t||e),i)}),extendSelection:m(function(e,t,i){Jt(this,n(this,e),t&&n(this,t),i)}),extendSelections:m(function(e,t){Pn(this,rl(this,e),t)}),extendSelectionsBy:m(function(e,t){var i=mi(this.sel.ranges,e);Pn(this,rl(this,i),t)}),setSelections:m(function(e,t,i){if(!e.length){return};var o=[];for(var r=0;r<e.length;r++){o[r]=new s(n(this,e[r].anchor),n(this,e[r].head))};if(t==null){t=Math.min(e.length-1,this.sel.primIndex)};w(this,R(this.cm,o,t),i)}),addSelection:m(function(e,t,i){var r=this.sel.ranges.slice(0);r.push(new s(n(this,e),n(this,t||e)));w(this,R(this.cm,r,r.length-1),i)}),getSelection:function(e){var r=this.sel.ranges,t;for(var i=0;i<r.length;i++){var n=de(this,r[i].from(),r[i].to());t=t?t.concat(n):n};if(e===!1){return t}
else{return t.join(e||this.lineSeparator())}},getSelections:function(e){var n=[],r=this.sel.ranges;for(var t=0;t<r.length;t++){var i=de(this,r[t].from(),r[t].to());if(e!==!1){i=i.join(e||this.lineSeparator())};n[t]=i};return n},replaceSelection:function(e,t,i){var n=[];for(var r=0;r<this.sel.ranges.length;r++){n[r]=e};this.replaceSelections(n,t,i||"+input")},replaceSelections:m(function(e,t,i){var n=[],a=this.sel;for(var r=0;r<a.ranges.length;r++){var s=a.ranges[r];n[r]={from:s.from(),to:s.to(),text:this.splitLines(e[r]),origin:i}};var l=t&&t!="end"&&Qs(this,n,t);for(var o=n.length-1;o>=0;o--){Ge(this,n[o])};if(l){Fn(this,l)}
else if(this.cm){De(this.cm)}}),undo:m(function(){ri(this,"undo")}),redo:m(function(){ri(this,"redo")}),undoSelection:m(function(){ri(this,"undo",!0)}),redoSelection:m(function(){ri(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){var e=this.history,r=0,n=0;for(var i=0;i<e.done.length;i++){if(!e.done[i].ranges){++r}};for(var t=0;t<e.undone.length;t++){if(!e.undone[t].ranges){++n}};return{undo:r,redo:n}},clearHistory:function(){var e=this;this.history=new oi(this.history.maxGeneration);le(this,function(t){return t.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){if(e){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null};return this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ye(this.history.done),undone:Ye(this.history.undone)}},setHistory:function(e){var t=this.history=new oi(this.history.maxGeneration);t.done=Ye(e.done.slice(0),null,!0);t.undone=Ye(e.undone.slice(0),null,!0)},setGutterMarker:m(function(e,t,i){return bt(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});r[t]=i;if(!i&&un(r)){e.gutterMarkers=null};return!0})}),clearGutter:m(function(e){var t=this;this.iter(function(i){if(i.gutterMarkers&&i.gutterMarkers[e]){bt(t,i,"gutter",function(){i.gutterMarkers[e]=null;if(un(i.gutterMarkers)){i.gutterMarkers=null};return!0})}})}),lineInfo:function(e){var i;if(typeof e=="number"){if(!Nt(this,e)){return null};i=e;e=t(this,e);if(!e){return null}}
else{i=u(e);if(i==null){return null}};return{line:i,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:m(function(e,t,i){return bt(this,e,t=="gutter"?"gutter":"class",function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass";if(!e[r]){e[r]=i}
else if(Ne(i).test(e[r])){return!1}
else{e[r]+=" "+i};return!0})}),removeLineClass:m(function(e,t,i){return bt(this,e,t=="gutter"?"gutter":"class",function(e){var o=t=="text"?"textClass":t=="background"?"bgClass":t=="gutter"?"gutterClass":"wrapClass",n=e[o];if(!n){return!1}
else if(i==null){e[o]=null}
else{var r=n.match(Ne(i));if(!r){return!1};var l=r.index+r[0].length;e[o]=n.slice(0,r.index)+(!r.index||l==n.length?"":" ")+n.slice(l)||null};return!0})}),addLineWidget:m(function(e,t,i){return pl(this,e,t,i)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,i){return Ee(this,n(this,e),n(this,t),i,i&&i.type||"range")},setBookmark:function(e,t){var i={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};e=n(this,e);return Ee(this,e,e,i,"bookmark")},findMarksAt:function(e){e=n(this,e);var l=[],o=t(this,e.line).markedSpans;if(o){for(var r=0;r<o.length;++r){var i=o[r];if((i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)){l.push(i.marker.parent||i.marker)}}};return l},findMarks:function(e,t,i){e=n(this,e);t=n(this,t);var o=[],r=e.line;this.iter(e.line,t.line+1,function(n){var a=n.markedSpans;if(a){for(var s=0;s<a.length;s++){var l=a[s];if(!(l.to!=null&&r==e.line&&e.ch>=l.to||l.from==null&&r!=e.line||l.from!=null&&r==t.line&&l.from>=t.ch)&&(!i||i(l.marker))){o.push(l.marker.parent||l.marker)}}};++r});return o},getAllMarks:function(){var e=[];this.iter(function(t){var r=t.markedSpans;if(r){for(var i=0;i<r.length;++i){if(r[i].from!=null){e.push(r[i].marker)}}}});return e},posFromIndex:function(t){var i,r=this.first,o=this.lineSeparator().length;this.iter(function(e){var n=e.text.length+o;if(n>t){i=t;return!0};t-=n;++r});return n(this,e(r,i))},indexFromPos:function(e){e=n(this,e);var t=e.ch;if(e.line<this.first||e.ch<0){return 0};var i=this.lineSeparator().length;this.iter(this.first,e.line,function(e){t+=e.text.length+i});return t},copy:function(e){var t=new T(cr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);t.scrollTop=this.scrollTop;t.scrollLeft=this.scrollLeft;t.sel=this.sel;t.extend=!1;if(e){t.history.undoDepth=this.history.undoDepth;t.setHistory(this.getHistory())};return t},linkedDoc:function(e){if(!e){e={}};var i=this.first,r=this.first+this.size;if(e.from!=null&&e.from>i){i=e.from};if(e.to!=null&&e.to<r){r=e.to};var t=new T(cr(this,i,r),e.mode||this.modeOption,i,this.lineSep,this.direction);if(e.sharedHist){t.history=this.history}(this.linked||(this.linked=[])).push({doc:t,sharedHist:e.sharedHist});t.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}];ll(t,wn(this));return t},unlinkDoc:function(e){if(e instanceof h){e=e.doc};if(this.linked){for(var t=0;t<this.linked.length;++t){var r=this.linked[t];if(r.doc!=e){continue};this.linked.splice(t,1);e.unlinkDoc(this);al(wn(this));break}};if(e.history==this.history){var i=[e.id];le(e,function(e){return i.push(e.id)},!0);e.history=new oi(null);e.history.done=Ye(this.history.done,i);e.history.undone=Ye(this.history.undone,i)}},iterLinkedDocs:function(e){le(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){if(this.lineSep){return e.split(this.lineSep)};return Tr(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:m(function(e){if(e!="rtl"){e="ltr"};if(e==this.direction){return};this.direction=e;this.iter(function(e){return e.order=null});if(this.cm){Vs(this.cm)}})});T.prototype.eachLine=T.prototype.iter;var Yo=0;function Yl(e){var t=this;Yn(t);if(y(t,e)||X(t.display,e)){return};M(e);if(l){Yo=+new Date};var r=he(t,e,!0),s=e.dataTransfer.files;if(!r||t.isReadOnly()){return};if(s&&s.length&&window.FileReader&&window.File){var h=s.length,d=Array(h),p=0,f=function(){if(++p==h){v(t,function(){r=n(t.doc,r);var e={from:r,to:r,text:t.doc.splitLines(d.filter(function(e){return e!=null}).join(t.doc.lineSeparator())),origin:"paste"};Ge(t.doc,e);Fn(t.doc,oe(n(t.doc,r),n(t.doc,re(e))))})()}},g=function(e,i){if(t.options.allowDropFileTypes&&x(t.options.allowDropFileTypes,e.type)==-1){f();return};var r=new FileReader;r.onerror=function(){return f()};r.onload=function(){var e=r.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)){f();return};d[i]=e;f()};r.readAsText(e)};for(var u=0;u<s.length;u++){g(s[u],u)}}
else{if(t.state.draggingText&&t.doc.sel.contains(r)>-1){t.state.draggingText(e);setTimeout(function(){return t.display.input.focus()},20);return};try{var c=e.dataTransfer.getData("Text");if(c){var o;if(t.state.draggingText&&!t.state.draggingText.copy){o=t.listSelections()};ti(t.doc,oe(r,r));if(o){for(var a=0;a<o.length;++a){Be(t.doc,"",o[a].anchor,o[a].head,"drag")}};t.replaceSelection(c,"around","paste");t.display.input.focus()}}catch(i){}}};function Xl(e,t){if(l&&(!e.state.draggingText||+new Date-Yo<100)){ut(t);return};if(y(e,t)||X(e.display,t)){return};t.dataTransfer.setData("Text",e.getSelection());t.dataTransfer.effectAllowed="copyMove";if(t.dataTransfer.setDragImage&&!En){var r=i("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(E){r.width=r.height=1;e.display.wrapper.appendChild(r);r._top=r.offsetTop};t.dataTransfer.setDragImage(r,0,0);if(E){r.parentNode.removeChild(r)}}};function Kl(e,t){var n=he(e,t);if(!n){return};var r=document.createDocumentFragment();nl(e,n,r);if(!e.display.dragCursor){e.display.dragCursor=i("div",null,"CodeMirror-cursors CodeMirror-dragcursors");e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)};D(e.display.dragCursor,r)};function Yn(e){if(e.display.dragCursor){e.display.lineSpace.removeChild(e.display.dragCursor);e.display.dragCursor=null}};function Xn(e){if(!document.getElementsByClassName){return};var n=document.getElementsByClassName("CodeMirror"),t=[];for(var i=0;i<n.length;i++){var r=n[i].CodeMirror;if(r){t.push(r)}};if(t.length){t[0].operation(function(){for(var i=0;i<t.length;i++){e(t[i])}})}};var ho=!1;function Ul(){if(ho){return};zl();ho=!0};function zl(){var e;r(window,"resize",function(){if(e==null){e=setTimeout(function(){e=null;Xn(Il)},100)}});r(window,"blur",function(){return Xn(gt)})};function Il(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null;t.scrollbarsClipped=!1;e.setSize()};var ce={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var nt=0;nt<10;nt++){ce[nt+48]=ce[nt+96]=String(nt)};for(var ui=65;ui<=90;ui++){ce[ui]=String.fromCharCode(ui)};for(var lt=1;lt<=12;lt++){ce[lt+111]=ce[lt+63235]="F"+lt};var Z={};Z.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Shift-Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite","Esc":"singleSelection"};Z.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection","fallthrough":"basic"};Z.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};Z.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd","fallthrough":["basic","emacsy"]};Z["default"]=F?Z.macDefault:Z.pcDefault;function Ll(e){var i=e.split(/-(?!$)/);e=i[i.length-1];var n,o,l,s;for(var r=0;r<i.length-1;r++){var t=i[r];if(/^(cmd|meta|m)$/i.test(t)){s=!0}
else if(/^a(lt)?$/i.test(t)){n=!0}
else if(/^(c|ctrl|control)$/i.test(t)){o=!0}
else if(/^s(hift)?$/i.test(t)){l=!0}
else{throw new Error("Unrecognized modifier name: "+t)}};if(n){e="Alt-"+e};if(o){e="Ctrl-"+e};if(s){e="Cmd-"+e};if(l){e="Shift-"+e};return e};function Fl(e){var l={};for(var t in e){if(e.hasOwnProperty(t)){var u=e[t];if(/^(name|fallthrough|(de|at)tach)$/.test(t)){continue};if(u=="..."){delete e[t];continue};var o=mi(t.split(" "),Ll);for(var n=0;n<o.length;n++){var r=(void 0),i=(void 0);if(n==o.length-1){i=o.join(" ");r=u}
else{i=o.slice(0,n+1).join(" ");r="..."};var a=l[i];if(!a){l[i]=r}
else if(a!=r){throw new Error("Inconsistent bindings for "+i)}};delete e[t]}};for(var s in l){e[s]=l[s]};return e};function Ie(e,t,i,r){t=ni(t);var n=t.call?t.call(e,r):t[e];if(n===!1){return"nothing"};if(n==="..."){return"multi"};if(n!=null&&i(n)){return"handled"};if(t.fallthrough){if(Object.prototype.toString.call(t.fallthrough)!="[object Array]"){return Ie(e,t.fallthrough,i,r)};for(var o=0;o<t.fallthrough.length;o++){var l=Ie(e,t.fallthrough[o],i,r);if(l){return l}}}};function qr(e){var t=typeof e=="string"?e:ce[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"};function Yr(e,t,i){var r=e;if(t.altKey&&r!="Alt"){e="Alt-"+e};if((Qn?t.metaKey:t.ctrlKey)&&r!="Ctrl"){e="Ctrl-"+e};if((Qn?t.ctrlKey:t.metaKey)&&r!="Cmd"){e="Cmd-"+e};if(!i&&t.shiftKey&&r!="Shift"){e="Shift-"+e};return e};function Kr(e,t){if(E&&e.keyCode==34&&e["char"]){return!1};var i=ce[e.keyCode];if(i==null||e.altGraphKey){return!1};if(e.keyCode==3&&e.code){i=e.code};return Yr(i,e,t)};function ni(e){return typeof e=="string"?Z[e]:e};function Xe(e,t){var s=e.doc.sel.ranges,i=[];for(var n=0;n<s.length;n++){var r=t(s[n]);while(i.length&&o(r.from,a(i).to)<=0){var l=i.pop();if(o(l.from,r.from)<0){r.from=l.from;break}};i.push(r)};N(e,function(){for(var t=i.length-1;t>=0;t--){Be(e.doc,"",i[t].from,i[t].to,"+delete")};De(e)})};function Fi(e,t,i){var r=pn(e.text,t+i,i);return r<0||r>e.text.length?null:r};function Hi(t,i,r){var n=Fi(t,i.ch,r);return n==null?null:new e(i.line,n,r<0?"after":"before")};function Wi(t,i,r,n,o){if(t){if(i.doc.direction=="rtl"){o=-o};var u=Y(r,i.doc.direction);if(u){var s=o<0?a(u):u[0],d=(o<0)==(s.level==1),c=d?"after":"before",l;if(s.level>0||i.doc.direction=="rtl"){var f=He(i,r);l=o<0?r.text.length-1:0;var h=B(i,f,l).top;l=et(function(e){return B(i,f,e).top==h},(o<0)==(s.level==1)?s.from:s.to-1,l);if(c=="before"){l=Fi(r,l,1)}}
else{l=o<0?s.to:s.from};return new e(n,l,c)}};return new e(n,o<0?r.text.length:0,o<0?"before":"after")};function Wl(t,i,r,n){var a=Y(i,t.doc.direction);if(!a){return Hi(i,r,n)};if(r.ch>=i.text.length){r.ch=i.text.length;r.sticky="before"}
else if(r.ch<=0){r.ch=0;r.sticky="after"};var v=Qe(a,r.ch,r.sticky),o=a[v];if(t.doc.direction=="ltr"&&o.level%2==0&&(n>0?o.to>r.ch:o.from<r.ch)){return Hi(i,r,n)};var l=function(t,r){return Fi(i,t instanceof e?t.ch:t,r)},c,g=function(e){if(!t.options.lineWrapping){return{begin:0,end:i.text.length}};c=c||He(t,i);return Ro(t,i,c,e)},f=g(r.sticky=="before"?l(r,-1):r.ch);if(t.doc.direction=="rtl"||o.level==1){var d=(o.level==1)==(n<0),s=l(r,d?1:-1);if(s!=null&&(!d?s>=o.from&&s>=f.begin:s<=o.to&&s<=f.end)){var m=d?"before":"after";return new e(r.line,s,m)}};var p=function(t,i,n){var f=function(t,i){return i?new e(r.line,l(t,1),"before"):new e(r.line,t,"after")};for(;t>=0&&t<a.length;t+=i){var s=a[t],u=(i>0)==(s.level!=1),o=u?n.begin:l(n.end,-1);if(s.from<=o&&o<s.to){return f(o,u)};o=u?s.from:l(s.to,-1);if(n.begin<=o&&o<n.end){return f(o,u)}}},u=p(v+n,n,f);if(u){return u};var h=n>0?f.end:l(f.begin,-1);if(h!=null&&!(n>0&&h==i.text.length)){u=p(n>0?0:a.length-1,n,g(h));if(u){return u}};return null};var rt={selectAll:Tn,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),j)},killLine:function(i){return Xe(i,function(r){if(r.empty()){var n=t(i.doc,r.head.line).text.length;if(r.head.ch==n&&r.head.line<i.lastLine()){return{from:r.head,to:e(r.head.line+1,0)}}
else{return{from:r.head,to:e(r.head.line,n)}}}
else{return{from:r.from(),to:r.to()}}})},deleteLine:function(t){return Xe(t,function(i){return({from:e(i.from().line,0),to:n(t.doc,e(i.to().line+1,0))})})},delLineLeft:function(t){return Xe(t,function(t){return({from:e(t.from().line,0),to:t.from()})})},delWrappedLineLeft:function(e){return Xe(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:i},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return Xe(e,function(t){var i=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(t){return t.extendSelection(e(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(e(t.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Qr(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return gn(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return Rl(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:i},"div")},xt)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var i=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:i},"div")},xt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var r=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");if(i.ch<e.getLine(i.line).search(/\S/)){return gn(e,t.head)};return i},xt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){var n=[],o=e.listSelections(),i=e.options.tabSize;for(var t=0;t<o.length;t++){var r=o[t].from(),l=H(e.getLine(r.line),r.ch,i);n.push(br(i-l%i))};e.replaceSelections(n)},defaultTab:function(e){if(e.somethingSelected()){e.indentSelection("add")}
else{e.execCommand("insertTab")}},transposeChars:function(i){return N(i,function(){var a=i.listSelections(),u=[];for(var l=0;l<a.length;l++){if(!a[l].empty()){continue};var r=a[l].head,n=t(i.doc,r.line).text;if(n){if(r.ch==n.length){r=new e(r.line,r.ch-1)};if(r.ch>0){r=new e(r.line,r.ch+1);i.replaceRange(n.charAt(r.ch-1)+n.charAt(r.ch-2),e(r.line,r.ch-2),r,"+transpose")}
else if(r.line>i.doc.first){var o=t(i.doc,r.line-1).text;if(o){r=new e(r.line,1);i.replaceRange(n.charAt(0)+i.doc.lineSeparator()+o.charAt(o.length-1),e(r.line-1,o.length-1),r,"+transpose")}}};u.push(new s(r,r))};i.setSelections(u)})},newlineAndIndent:function(e){return N(e,function(){var t=e.listSelections();for(var i=t.length-1;i>=0;i--){e.replaceRange(e.doc.lineSeparator(),t[i].anchor,t[i].head,"+input")};t=e.listSelections();for(var r=0;r<t.length;r++){e.indentLine(t[r].from().line,null,!0)};De(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qr(e,i){var n=t(e.doc,i),r=G(n);if(r!=n){i=u(r)};return Wi(!0,e,r,i,1)};function Rl(e,i){var r=t(e.doc,i),n=os(r);if(n!=r){i=u(n)};return Wi(!0,e,r,i,-1)};function gn(i,r){var n=Qr(i,r.line),l=t(i.doc,n.line),s=Y(l,i.doc.direction);if(!s||s[0].level==0){var o=Math.max(n.ch,l.text.search(/\S/)),a=r.line==n.line&&r.ch<=o&&r.ch;return e(n.line,a?0:o,n.sticky)};return n};function ai(e,t,i){if(typeof t=="string"){t=rt[t];if(!t){return!1}};e.display.input.ensurePolled();var n=e.display.shift,r=!1;try{if(e.isReadOnly()){e.state.suppressEdits=!0};if(i){e.display.shift=!1};r=t(e)!=Qt}finally{e.display.shift=n;e.state.suppressEdits=!1};return r};function Gl(e,t,i){for(var r=0;r<e.state.keyMaps.length;r++){var n=Ie(t,e.state.keyMaps[r],i,e);if(n){return n}};return(e.options.extraKeys&&Ie(t,e.options.extraKeys,i,e))||Ie(t,e.options.keyMap,i,e)};var Dl=new ie;function it(e,t,i,r){var n=e.state.keySeq;if(n){if(qr(t)){return"handled"};if(/'$/.test(t)){e.state.keySeq=null}
else{Dl.set(50,function(){if(e.state.keySeq==n){e.state.keySeq=null;e.display.input.reset()}})};if(hn(e,n+" "+t,i,r)){return!0}};return hn(e,t,i,r)};function hn(e,t,i,r){var n=Gl(e,t,r);if(n=="multi"){e.state.keySeq=t};if(n=="handled"){b(e,"keyHandled",e,t,i)};if(n=="handled"||n=="multi"){M(i);Xi(e)};return!!n};function cn(e,t){var i=Kr(t,!0);if(!i){return!1};if(t.shiftKey&&!e.state.keySeq){return it(e,"Shift-"+i,t,function(t){return ai(e,t,!0)})||it(e,i,t,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion){return ai(e,t)}})}
else{return it(e,i,t,function(t){return ai(e,t)})}};function El(e,t,i){return it(e,"'"+i+"'",t,function(t){return ai(e,t,!0)})};var Nr=null;function fn(e){var t=this;t.curOp.focus=Q();if(y(t,e)){return};if(l&&c<11&&e.keyCode==27){e.returnValue=!1};var i=e.keyCode;t.display.shift=i==16||e.shiftKey;var r=cn(t,e);if(E){Nr=r?i:null;if(!r&&i==88&&!Ql&&(F?e.metaKey:e.ctrlKey)){t.replaceSelection("",null,"cut")}};if(q&&!F&&!r&&i==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand){document.execCommand("cut")};if(i==18&&!/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)){xl(t)}};function xl(e){var i=e.display.lineDiv;ke(i,"CodeMirror-crosshair");function t(e){if(e.keyCode==18||!e.altKey){ve(i,"CodeMirror-crosshair");A(document,"keyup",t);A(document,"mouseover",t)}};r(document,"keyup",t);r(document,"mouseover",t)};function on(e){if(e.keyCode==16){this.doc.sel.shift=!1};y(this,e)};function nn(e){var t=this;if(X(t.display,e)||y(t,e)||e.ctrlKey&&!e.altKey||F&&e.metaKey){return};var r=e.keyCode,n=e.charCode;if(E&&r==Nr){Nr=null;M(e);return};if((E&&(!e.which||e.which<10))&&cn(t,e)){return};var i=String.fromCharCode(n==null?r:n);if(i=="\x08"){return};if(El(t,e,i)){return};t.display.input.onKeyPress(e)};var Sl=400,Or=function(e,t,i){this.time=e;this.pos=t;this.button=i};Or.prototype.compare=function(e,t,i){return this.time+Sl>e&&o(t,this.pos)==0&&i==this.button};var dt,ct;function dl(e,t){var i=+new Date;if(ct&&ct.compare(i,e,t)){dt=ct=null;return"triple"}
else if(dt&&dt.compare(i,e,t)){ct=new Or(i,e,t);dt=null;return"double"}
else{dt=new Or(i,e,t);ct=null;return"single"}};function yn(e){var t=this,i=t.display;if(y(t,e)||i.activeTouch&&i.input.supportsTouch()){return};i.input.ensurePolled();i.shift=e.shiftKey;if(X(i,e)){if(!C){i.scroller.draggable=!1;setTimeout(function(){return i.scroller.draggable=!0},100)};return};if(Mi(t,e)){return};var r=he(t,e),n=rn(e),o=r?dl(r,n):"single";window.focus();if(n==1&&t.state.selectingText){t.state.selectingText(e)};if(r&&ml(t,n,r,o,e)){return};if(n==1){if(r){ql(t,r,o,e)}
else if(pr(e)==i.scroller){M(e)}}
else if(n==2){if(r){Jt(t.doc,r)};setTimeout(function(){return i.input.focus()},20)}
else if(n==3){if(xr){t.display.input.onContextMenu(e)}
else{Ko(t)}}};function ml(e,t,i,r,n){var o="Click";if(r=="double"){o="Double"+o}
else if(r=="triple"){o="Triple"+o};o=(t==1?"Left":t==2?"Middle":"Right")+o;return it(e,Yr(o,n),n,function(t){if(typeof t=="string"){t=rt[t]};if(!t){return!1};var r=!1;try{if(e.isReadOnly()){e.state.suppressEdits=!0};r=t(e,i)!=Qt}finally{e.state.suppressEdits=!1};return r})};function Hl(e,t,i){var n=e.getOption("configureMouse"),r=n?n(e,t,i):{};if(r.unit==null){var o=ya?i.shiftKey&&i.metaKey:i.altKey;r.unit=o?"rectangle":t=="single"?"char":t=="double"?"word":"line"};if(r.extend==null||e.doc.extend){r.extend=e.doc.extend||i.shiftKey};if(r.addNew==null){r.addNew=F?i.metaKey:i.ctrlKey};if(r.moveOnDrag==null){r.moveOnDrag=!(F?i.altKey:i.ctrlKey)};return r};function ql(e,t,i,r){if(l){setTimeout(yi(Qo,e),0)}
else{e.curOp.focus=Q()};var s=Hl(e,i,r),a=e.doc.sel,n;if(e.options.dragDrop&&ra&&!e.isReadOnly()&&i=="single"&&(n=a.contains(t))>-1&&(o((n=a.ranges[n]).from(),t)<0||t.xRel>0)&&(o(n.to(),t)>0||t.xRel<0)){vl(e,r,t,s)}
else{hl(e,r,t,s)}};function vl(e,t,i,n){var o=e.display,a=!1,s=v(e,function(t){if(C){o.scroller.draggable=!1};e.state.draggingText=!1;A(o.wrapper.ownerDocument,"mouseup",s);A(o.wrapper.ownerDocument,"mousemove",u);A(o.scroller,"dragstart",f);A(o.scroller,"drop",s);if(!a){M(t);if(!n.addNew){Jt(e.doc,i,null,null,n.extend)};if(C||l&&c==9){setTimeout(function(){o.wrapper.ownerDocument.body.focus();o.input.focus()},20)}
else{o.input.focus()}}}),u=function(e){a=a||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},f=function(){return a=!0};if(C){o.scroller.draggable=!0};e.state.draggingText=s;s.copy=!n.moveOnDrag;if(o.scroller.dragDrop){o.scroller.dragDrop()};r(o.wrapper.ownerDocument,"mouseup",s);r(o.wrapper.ownerDocument,"mousemove",u);r(o.scroller,"dragstart",f);r(o.scroller,"drop",s);Ko(e);setTimeout(function(){return o.input.focus()},20)};function Xo(t,i,r){if(r=="char"){return new s(i,i)};if(r=="word"){return t.findWordAt(i)};if(r=="line"){return new s(e(i.line,0),n(t.doc,e(i.line+1,0)))};var o=r(t,i);return new s(o.from,o.to)};function hl(i,l,a,u){var d=i.display,f=i.doc;M(l);var h,c,g=f.sel,p=g.ranges;if(u.addNew&&!u.extend){c=f.sel.contains(a);if(c>-1){h=p[c]}
else{h=new s(a,a)}}
else{h=f.sel.primary();c=f.sel.primIndex};if(u.unit=="rectangle"){if(!u.addNew){h=new s(a,a)};a=he(i,l,!0,!0);c=-1}
else{var b=Xo(i,a,u.unit);if(u.extend){h=Ri(h,b.anchor,b.head,u.extend)}
else{h=b}};if(!u.addNew){c=0;w(f,new O([h],0),Cr);g=f.sel}
else if(c==-1){c=p.length;w(f,R(i,p.concat([h]),c),{scroll:!1,origin:"*mouse"})}
else if(p.length>1&&p[c].empty()&&u.unit=="char"&&!u.extend){w(f,R(i,p.slice(0,c).concat(p.slice(c+1)),0),{scroll:!1,origin:"*mouse"});g=f.sel}
else{Zi(f,c,h,Cr)};var x=a;function T(r){if(o(x,r)==0){return};x=r;if(u.unit=="rectangle"){var p=[],y=i.options.tabSize,k=H(t(f,a.line).text,a.ch,y),T=H(t(f,r.line).text,r.ch,y),M=Math.min(k,T),N=Math.max(k,T);for(var l=Math.min(a.line,r.line),O=Math.min(i.lastLine(),Math.max(a.line,r.line));l<=O;l++){var S=t(f,l).text,m=Wr(S,M,y);if(M==N){p.push(new s(e(l,m),e(l,m)))}
else if(S.length>m){p.push(new s(e(l,m),e(l,Wr(S,N,y))))}};if(!p.length){p.push(new s(a,a))};w(f,R(i,g.ranges.slice(0,c).concat(p),c),{origin:"*mouse",scroll:!1});i.scrollIntoView(r)}
else{var b=h,d=Xo(i,r,u.unit),v=b.anchor,C;if(o(d.anchor,v)>0){C=d.head;v=Bt(b.from(),d.anchor)}
else{C=d.anchor;v=Et(b.to(),d.head)};var L=g.ranges.slice(0);L[c]=cl(i,new s(n(f,v),C));w(f,R(i,L,c),Cr)}};var S=d.wrapper.getBoundingClientRect(),m=0;function y(e){var l=++m,t=he(i,e,!0,u.unit=="rectangle");if(!t){return};if(o(t,x)!=0){i.curOp.focus=Q();T(t);var n=qt(d,f);if(t.line>=n.to||t.line<n.from){setTimeout(v(i,function(){if(m==l){y(e)}}),150)}}
else{var r=e.clientY<S.top?-20:e.clientY>S.bottom?20:0;if(r){setTimeout(v(i,function(){if(m!=l){return};d.scroller.scrollTop+=r;y(e)}),50)}}};function k(e){i.state.selectingText=!1;m=Infinity;if(e){M(e);d.input.focus()};A(d.wrapper.ownerDocument,"mousemove",L);A(d.wrapper.ownerDocument,"mouseup",C);f.history.lastSelOrigin=null};var L=v(i,function(e){if(e.buttons===0||!rn(e)){k(e)}
else{y(e)}}),C=v(i,k);i.state.selectingText=C;r(d.wrapper.ownerDocument,"mousemove",L);r(d.wrapper.ownerDocument,"mouseup",C)};function cl(i,r){var n=r.anchor,l=r.head,b=t(i.doc,n.line);if(o(n,l)==0&&n.sticky==l.sticky){return r};var a=Y(b);if(!a){return r};var p=Qe(a,n.ch,n.sticky),c=a[p];if(c.from!=n.ch&&c.to!=n.ch){return r};var f=p+((c.from==n.ch)==(c.level!=1)?0:1);if(f==0||f==a.length){return r};var u;if(l.line!=n.line){u=(l.line-n.line)*(i.doc.direction=="ltr"?1:-1)>0}
else{var d=Qe(a,l.ch,l.sticky),y=d-p||(l.ch-n.ch)*(c.level==1?-1:1);if(d==f-1||d==f){u=y<0}
else{u=y>0}};var h=a[f+(u?-1:0)],g=u==(h.level==1),v=g?h.from:h.to,m=g?"after":"before";return n.ch==v&&n.sticky==m?r:new s(new e(n.line,v,m),l)};function Bo(e,t,i,r){var s,o;if(t.touches){s=t.touches[0].clientX;o=t.touches[0].clientY}
else{try{s=t.clientX;o=t.clientY}catch(n){return!1}};if(s>=Math.floor(e.display.gutters.getBoundingClientRect().right)){return!1};if(r){M(t)};var a=e.display,f=a.lineDiv.getBoundingClientRect();if(o>f.bottom||!P(e,i)){return gr(t)};o-=f.top-a.viewOffset;for(var l=0;l<e.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=s){var c=Se(e.doc,o),h=e.display.gutterSpecs[l];g(e,i,e,c,h.className,t);return gr(t)}}};function Mi(e,t){return Bo(e,t,"gutterClick",!0)};function il(e,t){if(X(e.display,t)||Bl(e,t)){return};if(y(e,t,"contextmenu")){return};if(!xr){e.display.input.onContextMenu(t)}};function Bl(e,t){if(!P(e,"gutterContextMenu")){return!1};return Bo(e,t,"gutterContextMenu",!1)};function Uo(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-");Mt(e)};var Ve={toString:function(){return"CodeMirror.Init"}};var Do={};var ci={};function Nl(t){var r=t.optionHandlers;function i(e,i,n,o){t.defaults[e]=i;if(n){r[e]=o?function(e,t,i){if(i!=Ve){n(e,t,i)}}:n}};t.defineOption=i;t.Init=Ve;i("value","",function(e,t){return e.setValue(t)},!0);i("mode",null,function(e,t){e.doc.modeOption=t;Bi(e)},!0);i("indentUnit",2,Bi,!0);i("indentWithTabs",!1);i("smartIndent",!0);i("tabSize",4,function(e){Ct(e);Mt(e);k(e)},!0);i("lineSeparator",null,function(t,i){t.doc.lineSep=i;if(!i){return};var n=[],o=t.doc.first;t.doc.iter(function(t){for(var l=0;;){var r=t.text.indexOf(i,l);if(r==-1){break};l=r+i.length;n.push(e(o,r))};o++});for(var r=n.length-1;r>=0;r--){Be(t.doc,i,n[r],e(n[r].line,n[r].ch+i.length))}});i("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,i){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g");if(i!=Ve){e.refresh()}});i("specialCharPlaceholder",yl,function(e){return e.refresh()},!0);i("electricChars",!0);i("inputStyle",Lt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0);i("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0);i("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0);i("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0);i("rtlMoveVisually",!Ta);i("wholeLineUpdateBefore",!0);i("theme","default",function(e){Uo(e);Dt(e)},!0);i("keyMap","default",function(e,t,i){var n=ni(t),r=i!=Ve&&ni(i);if(r&&r.detach){r.detach(e,n)};if(n.attach){n.attach(e,r||null)}});i("extraKeys",null);i("configureMouse",null);i("lineWrapping",!1,Ml,!0);i("gutters",[],function(e,t){e.display.gutterSpecs=Qi(t,e.options.lineNumbers);Dt(e)},!0);i("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?Vi(e.display)+"px":"0";e.refresh()},!0);i("coverGutterNextToScrollbar",!1,function(e){return Ae(e)},!0);i("scrollbarStyle","native",function(e){sn(e);Ae(e);e.display.scrollbars.setScrollTop(e.doc.scrollTop);e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0);i("lineNumbers",!1,function(e,t){e.display.gutterSpecs=Qi(e.options.gutters,t);Dt(e)},!0);i("firstLineNumber",1,Dt,!0);i("lineNumberFormatter",function(e){return e},Dt,!0);i("showCursorWhenSelecting",!1,Ht,!0);i("resetSelectionOnContextMenu",!0);i("lineWiseCopyCut",!0);i("pasteLinesPerSelection",!0);i("selectionsMayTouch",!1);i("readOnly",!1,function(e,t){if(t=="nocursor"){gt(e);e.display.input.blur()};e.display.input.readOnlyChanged(t)});i("screenReaderLabel",null,function(e,t){t=(t==="")?null:t;e.display.input.screenReaderLabelChanged(t)});i("disableInput",!1,function(e,t){if(!t){e.display.input.reset()}},!0);i("dragDrop",!0,kl);i("allowDropFileTypes",null);i("cursorBlinkRate",530);i("cursorScrollMargin",0);i("cursorHeight",1,Ht,!0);i("singleCursorHeightPerLine",!0,Ht,!0);i("workTime",100);i("workDelay",100);i("flattenSpans",!0,Ct,!0);i("addModeClass",!1,Ct,!0);i("pollInterval",100);i("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t});i("historyEventDelay",1250);i("viewportMargin",10,function(e){return e.refresh()},!0);i("maxHighlightLength",10000,Ct,!0);i("moveInputWithCursor",!0,function(e,t){if(!t){e.display.input.resetPosition()}});i("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""});i("autofocus",null);i("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0);i("phrases",null)};function kl(e,t,i){var l=i&&i!=Ve;if(!t!=!l){var n=e.display.dragFunctions,o=t?r:A;o(e.display.scroller,"dragstart",n.start);o(e.display.scroller,"dragenter",n.enter);o(e.display.scroller,"dragover",n.over);o(e.display.scroller,"dragleave",n.leave);o(e.display.scroller,"drop",n.drop)}};function Ml(e){if(e.options.lineWrapping){ke(e.display.wrapper,"CodeMirror-wrap");e.display.sizer.style.minWidth="";e.display.sizerWidth=null}
else{ve(e.display.wrapper,"CodeMirror-wrap");Oi(e)};Ui(e);k(e);Mt(e);setTimeout(function(){return Ae(e)},100)};function h(e,t){var a=this;if(!(this instanceof h)){return new h(e,t)};this.options=t=t?Le(t):{};Le(Do,t,!1);var i=t.value;if(typeof i=="string"){i=new T(i,t.mode,null,t.lineSeparator,t.direction)}
else if(t.mode){i.modeOption=t.mode};this.doc=i;var s=new h.inputStyles[t.inputStyle](this),r=this.display=new La(e,i,s,t);r.wrapper.CodeMirror=this;Uo(this);if(t.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"};sn(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ie(),keySeq:null,specialChars:null};if(t.autofocus&&!Lt){r.input.focus()};if(l&&c<11){setTimeout(function(){return a.display.input.reset(!0)},20)};Al(this);Ul();ye(this);this.curOp.forceUpdate=!0;Bn(this,i);if((t.autofocus&&!Lt)||this.hasFocus()){setTimeout(yi(Si,this),20)}
else{gt(this)};for(var o in ci){if(ci.hasOwnProperty(o)){ci[o](this,t[o],Ve)}};Br(this);if(t.finishInit){t.finishInit(this)};for(var n=0;n<Ar.length;++n){Ar[n](this)};be(this);if(C&&t.lineWrapping&&getComputedStyle(r.lineDiv).textRendering=="optimizelegibility"){r.lineDiv.style.textRendering="auto"}};h.defaults=Do;h.optionHandlers=ci;function Al(t){var i=t.display;r(i.scroller,"mousedown",v(t,yn));if(l&&c<11){r(i.scroller,"dblclick",v(t,function(e){if(y(t,e)){return};var r=he(t,e);if(!r||Mi(t,e)||X(t.display,e)){return};M(e);var i=t.findWordAt(r);Jt(t.doc,i.anchor,i.head)}))}
else{r(i.scroller,"dblclick",function(e){return y(t,e)||M(e)})};r(i.scroller,"contextmenu",function(e){return il(t,e)});r(i.input.getField(),"contextmenu",function(e){if(!i.scroller.contains(e.target)){il(t,e)}});var u,a={end:0};function f(){if(i.activeTouch){u=setTimeout(function(){return i.activeTouch=null},1000);a=i.activeTouch;a.end=+new Date}};function d(e){if(e.touches.length!=1){return!1};var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1};function h(e,t){if(t.left==null){return!0};var i=t.left-e.left,r=t.top-e.top;return i*i+r*r>20*20};r(i.scroller,"touchstart",function(e){if(!y(t,e)&&!d(e)&&!Mi(t,e)){i.input.ensurePolled();clearTimeout(u);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null};if(e.touches.length==1){i.activeTouch.left=e.touches[0].pageX;i.activeTouch.top=e.touches[0].pageY}}});r(i.scroller,"touchmove",function(){if(i.activeTouch){i.activeTouch.moved=!0}});r(i.scroller,"touchend",function(r){var o=i.activeTouch;if(o&&!X(i,r)&&o.left!=null&&!o.moved&&new Date-o.start<300){var l=t.coordsChar(i.activeTouch,"page"),a;if(!o.prev||h(o,o.prev)){a=new s(l,l)}
else if(!o.prev.prev||h(o,o.prev.prev)){a=t.findWordAt(l)}
else{a=new s(e(l.line,0),n(t.doc,e(l.line+1,0)))};t.setSelection(a.anchor,a.head);t.focus();M(r)};f()});r(i.scroller,"touchcancel",f);r(i.scroller,"scroll",function(){if(i.scroller.clientHeight){ht(t,i.scroller.scrollTop);ge(t,i.scroller.scrollLeft,!0);g(t,"scroll",t)}});r(i.scroller,"mousewheel",function(e){return jr(t,e)});r(i.scroller,"DOMMouseScroll",function(e){return jr(t,e)});r(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0});i.dragFunctions={enter:function(e){if(!y(t,e)){ut(e)}},over:function(e){if(!y(t,e)){Kl(t,e);ut(e)}},start:function(e){return Xl(t,e)},drop:v(t,Yl),leave:function(e){if(!y(t,e)){Yn(t)}}};var o=i.input.getField();r(o,"keyup",function(e){return on.call(t,e)});r(o,"keydown",v(t,fn));r(o,"keypress",v(t,nn));r(o,"focus",function(e){return Si(t,e)});r(o,"blur",function(e){return gt(t,e)})};var Ar=[];h.defineInitHook=function(e){return Ar.push(e)};function st(i,r,n,o){var a=i.doc,b;if(n==null){n="add"};if(n=="smart"){if(!a.mode.indent){n="prev"}
else{b=Wt(i,r).state}};var c=i.options.tabSize,u=t(a,r),g=H(u.text,null,c);if(u.stateAfter){u.stateAfter=null};var f=u.text.match(/^\s*/)[0],l;if(!o&&!/\S/.test(u.text)){l=0;n="not"}
else if(n=="smart"){l=a.mode.indent(b,u.text.slice(f.length),u.text);if(l==Qt||l>150){if(!o){return};n="prev"}};if(n=="prev"){if(r>a.first){l=H(t(a,r-1).text,null,c)}
else{l=0}}
else if(n=="add"){l=g+i.options.indentUnit}
else if(n=="subtract"){l=g-i.options.indentUnit}
else if(typeof n=="number"){l=g+n};l=Math.max(0,l);var h="",p=0;if(i.options.indentWithTabs){for(var v=Math.floor(l/c);v;--v){p+=c;h+="\t"}};if(p<l){h+=br(l-p)};if(h!=f){Be(a,h,e(r,0),e(r,f.length),"+input");u.stateAfter=null;return!0}
else{for(var d=0;d<a.sel.ranges.length;d++){var m=a.sel.ranges[d];if(m.head.line==r&&m.head.ch<f.length){var y=e(r,f.length);Zi(a,d,new s(y,y));break}}}};var z=null;function fi(e){z=e};function Ci(i,r,n,o,l){var v=i.doc;i.display.shift=!1;if(!o){o=v.sel};var m=+new Date-200,c=l=="paste"||i.state.pasteIncoming>m,d=Tr(r),s=null;if(c&&o.ranges.length>1){if(z&&z.text.join("\n")==r){if(o.ranges.length%z.text.length==0){s=[];for(var g=0;g<z.text.length;g++){s.push(v.splitLines(z.text[g]))}}}
else if(d.length==o.ranges.length&&i.options.pasteLinesPerSelection){s=mi(d,function(e){return[e]})}};var w=i.curOp.updateInput;for(var h=o.ranges.length-1;h>=0;h--){var p=o.ranges[h],f=p.from(),u=p.to();if(p.empty()){if(n&&n>0){f=e(f.line,f.ch-n)}
else if(i.state.overwrite&&!c){u=e(u.line,Math.min(t(v,u.line).text.length,u.ch+a(d).length))}
else if(c&&z&&z.lineWise&&z.text.join("\n")==r){f=u=e(f.line,0)}};var y={from:f,to:u,text:s?s[h%s.length]:d,origin:l||(c?"paste":i.state.cutIncoming>m?"cut":"+input")};Ge(i.doc,y);b(i,"inputRead",i,y)};if(r&&!c){so(i,r)};De(i);if(i.curOp.updateInput<2){i.curOp.updateInput=w};i.curOp.typing=!0;i.state.pasteIncoming=i.state.cutIncoming=-1};function uo(e,t){var i=e.clipboardData&&e.clipboardData.getData("Text");if(i){e.preventDefault();if(!t.isReadOnly()&&!t.options.disableInput){N(t,function(){return Ci(t,i,0,null,"paste")})};return!0}};function so(e,i){if(!e.options.electricChars||!e.options.smartIndent){return};var a=e.doc.sel;for(var o=a.ranges.length-1;o>=0;o--){var r=a.ranges[o];if(r.head.ch>100||(o&&a.ranges[o-1].head.line==r.head.line)){continue};var n=e.getModeAt(r.head),s=!1;if(n.electricChars){for(var l=0;l<n.electricChars.length;l++){if(i.indexOf(n.electricChars.charAt(l))>-1){s=st(e,r.head.line,"smart");break}}}
else if(n.electricInput){if(n.electricInput.test(t(e.doc,r.head.line).text.slice(0,r.head.ch))){s=st(e,r.head.line,"smart")}};if(s){b(e,"electricInput",e,r.head.line)}}};function lo(t){var o=[],l=[];for(var r=0;r<t.doc.sel.ranges.length;r++){var n=t.doc.sel.ranges[r].head.line,i={anchor:e(n,0),head:e(n+1,0)};l.push(i);o.push(t.getRange(i.anchor,i.head))};return{text:o,ranges:l}};function no(e,t,i,r){e.setAttribute("autocorrect",i?"":"off");e.setAttribute("autocapitalize",r?"":"off");e.setAttribute("spellcheck",!!t)};function bo(){var e=i("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=i("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(C){e.style.width="1000px"}
else{e.setAttribute("wrap","off")};if(St){e.style.border="1px solid black"};no(e);return t};function Cl(i){var o=i.optionHandlers,r=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(e,t){var i=this.options,r=i[e];if(i[e]==t&&e!="mode"){return};i[e]=t;if(o.hasOwnProperty(e)){v(this,o[e])(this,t,r)};g(this,"optionChange",this,e)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](ni(e))},removeKeyMap:function(e){var i=this.state.keyMaps;for(var t=0;t<i.length;++t){if(i[t]==e||i[t].name==e){i.splice(t,1);return!0}}},addOverlay:L(function(e,t){var r=e.token?e:i.getMode(this.options,e);if(r.startState){throw new Error("Overlays may not be stateful.")};Sa(this.state.overlays,{mode:r,modeSpec:e,opaque:t&&t.opaque,priority:(t&&t.priority)||0},function(e){return e.priority});this.state.modeGen++;k(this)}),removeOverlay:L(function(e){var i=this.state.overlays;for(var t=0;t<i.length;++t){var r=i[t].modeSpec;if(r==e||typeof e=="string"&&r.name==e){i.splice(t,1);this.state.modeGen++;k(this);return}}}),indentLine:L(function(e,t,i){if(typeof t!="string"&&typeof t!="number"){if(t==null){t=this.options.smartIndent?"smart":"prev"}
else{t=t?"add":"subtract"}};if(Nt(this.doc,e)){st(this,e,t,i)}}),indentSelection:L(function(e){var a=this.doc.sel.ranges,r=-1;for(var t=0;t<a.length;t++){var i=a[t];if(!i.empty()){var l=i.from(),u=i.to(),f=Math.max(r,l.line);r=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var o=f;o<r;++o){st(this,o,e)};var n=this.doc.sel.ranges;if(l.ch==0&&a.length==n.length&&n[t].from().ch>0){Zi(this.doc,t,new s(l,n[t].to()),j)}}
else if(i.head.line>r){st(this,i.head.line,e,!0);r=i.head.line;if(t==this.doc.sel.primIndex){De(this)}}}}),getTokenAt:function(e,t){return vo(this,e,t)},getLineTokens:function(t,i){return vo(this,e(t),i,!0)},getTokenTypeAt:function(e){e=n(this.doc,e);var o=xo(this,t(this.doc,e.line)),a=0,u=(o.length-1)/2,s=e.ch,r;if(s==0){r=o[2]}
else{for(;;){var i=(a+u)>>1;if((i?o[i*2-1]:0)>=s){u=i}
else if(o[i*2+1]<s){a=i+1}
else{r=o[i*2+2];break}}};var l=r?r.indexOf("overlay "):-1;return l<0?r:l==0?null:r.slice(0,l-1)},getModeAt:function(e){var t=this.doc.mode;if(!t.innerMode){return t};return i.innerMode(t,this.getTokenAt(e).state).mode},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var o=[];if(!r.hasOwnProperty(t)){return o};var n=r[t],i=this.getModeAt(e);if(typeof i[t]=="string"){if(n[i[t]]){o.push(n[i[t]])}}
else if(i[t]){for(var a=0;a<i[t].length;a++){var u=n[i[t][a]];if(u){o.push(u)}}}
else if(i.helperType&&n[i.helperType]){o.push(n[i.helperType])}
else if(n[i.name]){o.push(n[i.name])};for(var s=0;s<n._global.length;s++){var l=n._global[s];if(l.pred(i,this)&&x(o,l.val)==-1){o.push(l.val)}};return o},getStateAfter:function(e,t){var i=this.doc;e=el(i,e==null?i.first+i.size-1:e);return Wt(this,e+1,t).state},cursorCoords:function(e,t){var i,r=this.doc.sel.primary();if(e==null){i=r.head}
else if(typeof e=="object"){i=n(this.doc,e)}
else{i=e?r.from():r.to()};return I(this,i,t||"page")},charCoords:function(e,t){return Ji(this,n(this.doc,e),t||"page")},coordsChar:function(e,t){e=oo(this,e,t||"page");return Yi(this,e.left,e.top)},lineAtHeight:function(e,t){e=oo(this,{top:e,left:0},t||"page").top;return Se(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,i,r){var o=!1,n;if(typeof e=="number"){var l=this.doc.first+this.doc.size-1;if(e<this.doc.first){e=this.doc.first}
else if(e>l){e=l;o=!0};n=t(this.doc,e)}
else{n=e};return Pt(this,n,{top:0,left:0},i||"page",r||o).top+(o?this.doc.height-J(n):0)},defaultTextHeight:function(){return Ue(this.display)},defaultCharWidth:function(){return je(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,i,r,o){var a=this.display;e=I(this,n(this.doc,e));var s=e.bottom,l=e.left;t.style.position="absolute";t.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(t);a.sizer.appendChild(t);if(r=="over"){s=e.top}
else if(r=="above"||r=="near"){var u=Math.max(a.wrapper.clientHeight,this.doc.height),f=Math.max(a.sizer.clientWidth,a.lineSpace.clientWidth);if((r=="above"||e.bottom+t.offsetHeight>u)&&e.top>t.offsetHeight){s=e.top-t.offsetHeight}
else if(e.bottom+t.offsetHeight<=u){s=e.bottom};if(l+t.offsetWidth>f){l=f-t.offsetWidth}};t.style.top=s+"px";t.style.left=t.style.right="";if(o=="right"){l=a.sizer.clientWidth-t.offsetWidth;t.style.right="0px"}
else{if(o=="left"){l=0}
else if(o=="middle"){l=(a.sizer.clientWidth-t.offsetWidth)/2};t.style.left=l+"px"};if(i){fs(this,{left:l,top:s,right:l+t.offsetWidth,bottom:s+t.offsetHeight})}},triggerOnKeyDown:L(fn),triggerOnKeyPress:L(nn),triggerOnKeyUp:on,triggerOnMouseDown:L(yn),execCommand:function(e){if(rt.hasOwnProperty(e)){return rt[e].call(null,this)}},triggerElectric:L(function(e){so(this,e)}),findPosH:function(e,t,i,r){var s=1;if(t<0){s=-1;t=-t};var o=n(this.doc,e);for(var l=0;l<t;++l){o=ki(this.doc,o,s,i,r);if(o.hitSide){break}};return o},moveH:L(function(e,t){var i=this;this.extendSelectionsBy(function(r){if(i.display.shift||i.doc.extend||r.empty()){return ki(i.doc,r.head,e,t,i.options.rtlMoveVisually)}
else{return e<0?r.from():r.to()}},xt)}),deleteH:L(function(e,t){var r=this.doc.sel,i=this.doc;if(r.somethingSelected()){i.replaceSelection("",null,"+delete")}
else{Xe(this,function(r){var n=ki(i,r.head,e,t,!1);return e<0?{from:n,to:r.head}:{from:r.head,to:n}})}}),findPosV:function(e,t,i,r){var u=1,s=r;if(t<0){u=-1;t=-t};var o=n(this.doc,e);for(var a=0;a<t;++a){var l=I(this,o,"div");if(s==null){s=l.left}
else{l.left=s};o=Po(this,l,u,i);if(o.hitSide){break}};return o},moveV:L(function(e,t){var n=this,i=this.doc,o=[],l=!this.display.shift&&!i.extend&&i.sel.somethingSelected();i.extendSelectionsBy(function(r){if(l){return e<0?r.from():r.to()};var s=I(n,r.head,"div");if(r.goalColumn!=null){s.left=r.goalColumn};o.push(s.left);var a=Po(n,s,e,t);if(t=="page"&&r==i.sel.primary()){Ni(n,Ji(n,a,"div").top-s.top)};return a},xt);if(o.length){for(var r=0;r<i.sel.ranges.length;r++){i.sel.ranges[r].goalColumn=o[r]}}}),findWordAt:function(i){var f=this.doc,n=t(f,i.line).text,r=i.ch,o=i.ch;if(n){var u=this.getHelper(i,"wordChars");if((i.sticky=="before"||o==n.length)&&r){--r}
else{++o};var l=n.charAt(r),a=bi(l,u)?function(e){return bi(e,u)}:/\s/.test(l)?function(e){return/\s/.test(e)}:function(e){return(!/\s/.test(e)&&!bi(e))};while(r>0&&a(n.charAt(r-1))){--r}
while(o<n.length&&a(n.charAt(o))){++o}};return new s(e(i.line,r),e(i.line,o))},toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite){return};if(this.state.overwrite=!this.state.overwrite){ke(this.display.cursorDiv,"CodeMirror-overwrite")}
else{ve(this.display.cursorDiv,"CodeMirror-overwrite")};g(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Q()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:L(function(e,t){pt(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-V(this)-this.display.barHeight,width:e.scrollWidth-V(this)-this.display.barWidth,clientHeight:Ti(this),clientWidth:Ce(this)}},scrollIntoView:L(function(t,i){if(t==null){t={from:this.doc.sel.primary().head,to:null};if(i==null){i=this.options.cursorScrollMargin}}
else if(typeof t=="number"){t={from:e(t,0),to:null}}
else if(t.from==null){t={from:t,to:null}};if(!t.to){t.to=t.from};t.margin=i||0;if(t.from.line!=null){ps(this,t)}
else{eo(this,t.from,t.to,t.margin)}}),setSize:L(function(e,t){var n=this,r=function(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e};if(e!=null){this.display.wrapper.style.width=r(e)};if(t!=null){this.display.wrapper.style.height=r(t)};if(this.options.lineWrapping){Ao(this)};var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets){for(var t=0;t<e.widgets.length;t++){if(e.widgets[t].noHScroll){te(n,i,"widget");break}}};++i});this.curOp.forceUpdate=!0;g(this,"refresh",this)}),operation:function(e){return N(this,e)},startOperation:function(){return ye(this)},endOperation:function(){return be(this)},refresh:L(function(){var e=this.display.cachedTextHeight;k(this);this.curOp.forceUpdate=!0;Mt(this);pt(this,this.doc.scrollLeft,this.doc.scrollTop);Ei(this.display);if(e==null||Math.abs(e-Ue(this.display))>.5||this.options.lineWrapping){Ui(this)};g(this,"refresh",this)}),swapDoc:L(function(e){var t=this.doc;t.cm=null;if(this.state.selectingText){this.state.selectingText()};Bn(this,e);Mt(this);this.display.input.reset();pt(this,e.scrollLeft,e.scrollTop);this.curOp.forceScroll=!0;b(this,"swapDoc",this,t);return t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Oe(i);i.registerHelper=function(e,t,n){if(!r.hasOwnProperty(e)){r[e]=i[e]={_global:[]}};r[e][t]=n};i.registerGlobalHelper=function(e,t,n,o){i.registerHelper(e,t,o);r[e]._global.push({pred:n,val:o})}};function ki(i,r,n,o,l){var g=r,y=n,s=t(i,r.line),v=l&&i.direction=="rtl"?-n:n;function b(){var n=r.line+v;if(n<i.first||n>=i.first+i.size){return!1};r=new e(n,r.ch,r.sticky);return s=t(i,n)};function a(e){var t;if(l){t=Wl(i.cm,s,r,n)}
else{t=Hi(s,r,n)};if(t==null){if(!e&&b()){r=Wi(l,i.cm,s,r.line,v)}
else{return!1}}
else{r=t};return!0};if(o=="char"){a()}
else if(o=="column"){a(!0)}
else if(o=="word"||o=="group"){var p=null,h=o=="group",m=i.cm&&i.cm.getHelper(r,"wordChars");for(var f=!0;;f=!1){if(n<0&&!a(!f)){break};var c=s.text.charAt(r.ch)||"\n",u=bi(c,m)?"w":h&&c=="\n"?"n":!h||/\s/.test(c)?null:"p";if(h&&!f&&!u){u="s"};if(p&&p!=u){if(n<0){n=1;a();r.sticky="after"};break};if(u){p=u};if(n>0&&!a(!f)){break}}};var d=ii(i,r,g,y,!0);if(ur(g,d)){d.hitSide=!0};return d};function Po(e,t,i,r){var a=e.doc,u=t.left,n;if(r=="page"){var l=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),s=Math.max(l-.5*Ue(e.display),3);n=(i>0?t.bottom:t.top)+i*s}
else if(r=="line"){n=i>0?t.bottom+3:t.top-3};var o;for(;;){o=Yi(e,u,n);if(!o.outside){break};if(i<0?n<=0:n>=a.height){o.hitSide=!0;break};n+=i*5};return o};var f=function(e){this.cm=e;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new ie();this.composing=null;this.gracePeriod=!1;this.readDOMTimeout=null};f.prototype.init=function(e){var i=this,o=this,t=o.cm,n=o.div=e.lineDiv;no(n,t.options.spellcheck,t.options.autocorrect,t.options.autocapitalize);r(n,"paste",function(e){if(y(t,e)||uo(e,t)){return};if(c<=11){setTimeout(v(t,function(){return i.updateFromDOM()}),20)}});r(n,"compositionstart",function(e){i.composing={data:e.data,done:!1}});r(n,"compositionupdate",function(e){if(!i.composing){i.composing={data:e.data,done:!1}}});r(n,"compositionend",function(e){if(i.composing){if(e.data!=i.composing.data){i.readFromDOMSoon()};i.composing.done=!0}});r(n,"touchstart",function(){return o.forceCompositionEnd()});r(n,"input",function(){if(!i.composing){i.readFromDOMSoon()}});function l(e){if(y(t,e)){return};if(t.somethingSelected()){fi({lineWise:!1,text:t.getSelections()});if(e.type=="cut"){t.replaceSelection("",null,"cut")}}
else if(!t.options.lineWiseCopyCut){return}
else{var a=lo(t);fi({lineWise:!0,text:a.text});if(e.type=="cut"){t.operation(function(){t.setSelections(a.ranges,0,j);t.replaceSelection("",null,"cut")})}};if(e.clipboardData){e.clipboardData.clearData();var s=z.text.join("\n");e.clipboardData.setData("Text",s);if(e.clipboardData.getData("Text")==s){e.preventDefault();return}};var i=bo(),l=i.firstChild;t.display.lineSpace.insertBefore(i,t.display.lineSpace.firstChild);l.value=z.text.join("\n");var r=document.activeElement;wt(l);setTimeout(function(){t.display.lineSpace.removeChild(i);r.focus();if(r==n){o.showPrimarySelection()}},50)};r(n,"copy",l);r(n,"cut",l)};f.prototype.screenReaderLabelChanged=function(e){if(e){this.div.setAttribute("aria-label",e)}
else{this.div.removeAttribute("aria-label")}};f.prototype.prepareSelection=function(){var e=Go(this.cm,!1);e.focus=document.activeElement==this.div;return e};f.prototype.showSelection=function(e,t){if(!e||!this.cm.display.view.length){return};if(e.focus||t){this.showPrimarySelection()};this.showMultipleSelections(e)};f.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()};f.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,g=t.doc.sel.primary(),c=g.from(),h=g.to();if(t.display.viewTo==t.display.viewFrom||c.line>=t.display.viewTo||h.line<t.display.viewFrom){e.removeAllRanges();return};var u=hi(t,e.anchorNode,e.anchorOffset),f=hi(t,e.focusNode,e.focusOffset);if(u&&!u.bad&&f&&!f.bad&&o(Bt(u,f),c)==0&&o(Et(u,f),h)==0){return};var d=t.display.view,s=(c.line>=t.display.viewFrom&&Fo(t,c))||{node:d[0].measure.map[2],offset:0};var l=h.line<t.display.viewTo&&Fo(t,h);if(!l){var a=d[d.length-1].measure,r=a.maps?a.maps[a.maps.length-1]:a.map;l={node:r[r.length-1],offset:r[r.length-2]-r[r.length-3]}};if(!s||!l){e.removeAllRanges();return};var p=e.rangeCount&&e.getRangeAt(0),n;try{n=Me(s.node,s.offset,l.offset,l.node)}catch(i){};if(n){if(!q&&t.state.focused){e.collapse(s.node,s.offset);if(!n.collapsed){e.removeAllRanges();e.addRange(n)}}
else{e.removeAllRanges();e.addRange(n)};if(p&&e.anchorNode==null){e.addRange(p)}
else if(q){this.startGracePeriod()}};this.rememberSelection()};f.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){e.gracePeriod=!1;if(e.selectionChanged()){e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})}},20)};f.prototype.showMultipleSelections=function(e){D(this.cm.display.cursorDiv,e.cursors);D(this.cm.display.selectionDiv,e.selection)};f.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode;this.lastAnchorOffset=e.anchorOffset;this.lastFocusNode=e.focusNode;this.lastFocusOffset=e.focusOffset};f.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount){return!1};var t=e.getRangeAt(0).commonAncestorContainer;return ue(this.div,t)};f.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()||document.activeElement!=this.div){this.showSelection(this.prepareSelection(),!0)};this.div.focus()}};f.prototype.blur=function(){this.div.blur()};f.prototype.getField=function(){return this.div};f.prototype.supportsTouch=function(){return!0};f.prototype.receivedFocus=function(){var e=this;if(this.selectionInEditor()){this.pollSelection()}
else{N(this.cm,function(){return e.cm.curOp.selectionChanged=!0})};function t(){if(e.cm.state.focused){e.pollSelection();e.polling.set(e.cm.options.pollInterval,t)}};this.polling.set(this.cm.options.pollInterval,t)};f.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset};f.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return};var e=this.getSelection(),t=this.cm;if(vi&&gi&&this.cm.display.gutterSpecs.length&&ol(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return};if(this.composing){return};this.rememberSelection();var i=hi(t,e.anchorNode,e.anchorOffset),r=hi(t,e.focusNode,e.focusOffset);if(i&&r){N(t,function(){w(t.doc,oe(i,r),j);if(i.bad||r.bad){t.curOp.selectionChanged=!0}})}};f.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null};var r=this.cm,n=r.display,L=r.doc.sel.primary(),f=L.from(),p=L.to();if(f.ch==0&&f.line>r.firstLine()){f=e(f.line-1,t(r.doc,f.line-1).length)};if(p.ch==t(r.doc,p.line).text.length&&p.line<r.lastLine()){p=e(p.line+1,0)};if(f.line<n.viewFrom||p.line>n.viewTo-1){return!1};var w,h,m;if(f.line==n.viewFrom||(w=pe(r,f.line))==0){h=u(n.view[0].line);m=n.view[0].node}
else{h=u(n.view[w].line);m=n.view[w-1].node.nextSibling};var y=pe(r,p.line),d,b;if(y==n.view.length-1){d=n.viewTo-1;b=n.lineDiv.lastChild}
else{d=u(n.view[y+1].line)-1;b=n.view[y+1].node.previousSibling};if(!m){return!1};var i=r.doc.splitLines(fl(r,m,b,h,d)),l=de(r.doc,e(h,0),e(d,t(r.doc,d).text.length));while(i.length>1&&l.length>1){if(a(i)==a(l)){i.pop();l.pop();d--}
else if(i[0]==l[0]){i.shift();l.shift();h++}
else{break}};var s=0,c=0,S=i[0],C=l[0],T=Math.min(S.length,C.length);while(s<T&&S.charCodeAt(s)==C.charCodeAt(s)){++s};var g=a(i),v=a(l),M=Math.min(g.length-(i.length==1?s:0),v.length-(l.length==1?s:0));while(c<M&&g.charCodeAt(g.length-c-1)==v.charCodeAt(v.length-c-1)){++c};if(i.length==1&&l.length==1&&h==f.line){while(s&&s>f.ch&&g.charCodeAt(g.length-c-1)==v.charCodeAt(v.length-c-1)){s--;c++}};i[i.length-1]=g.slice(0,g.length-c).replace(/^\u200b+/,"");i[0]=i[0].slice(s).replace(/\u200b+$/,"");var k=e(h,s),x=e(d,l.length?a(l).length-c:0);if(i.length>1||i[0]||o(k,x)){Be(r.doc,i,k,x,"+input");return!0}};f.prototype.ensurePolled=function(){this.forceCompositionEnd()};f.prototype.reset=function(){this.forceCompositionEnd()};f.prototype.forceCompositionEnd=function(){if(!this.composing){return};clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};f.prototype.readFromDOMSoon=function(){var e=this;if(this.readDOMTimeout!=null){return};this.readDOMTimeout=setTimeout(function(){e.readDOMTimeout=null;if(e.composing){if(e.composing.done){e.composing=null}
else{return}};e.updateFromDOM()},80)};f.prototype.updateFromDOM=function(){var e=this;if(this.cm.isReadOnly()||!this.pollContent()){N(this.cm,function(){return k(e.cm)})}};f.prototype.setUneditable=function(e){e.contentEditable="false"};f.prototype.onKeyPress=function(e){if(e.charCode==0||this.composing){return};e.preventDefault();if(!this.cm.isReadOnly()){v(this.cm,Ci)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0)}};f.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")};f.prototype.onContextMenu=function(){};f.prototype.resetPosition=function(){};f.prototype.needsContentAttribute=!0;function Fo(e,i){var n=Ii(e,i.line);if(!n||n.hidden){return null};var o=t(e.doc,i.line),u=Co(n,o,i.line),l=Y(o,e.doc.direction),s="left";if(l){var a=Qe(l,i.ch);s=a%2?"right":"left"};var r=Ho(u.map,i.ch,s);r.offset=r.collapse=="right"?r.end:r.start;return r};function ol(e){for(var t=e;t;t=t.parentNode){if(/CodeMirror-gutter-wrapper/.test(t.className)){return!0}};return!1};function Ke(e,t){if(t){e.bad=!0};return e};function fl(t,i,r,n,o){var l="",a=!1,u=t.doc.lineSeparator(),s=!1;function d(e){return function(t){return t.id==e}};function c(){if(a){l+=u;if(s){l+=u};a=s=!1}};function f(e){if(e){c();l+=e}};function h(i){if(i.nodeType==1){var m=i.getAttribute("cm-text");if(m){f(m);return};var v=i.getAttribute("cm-marker"),l;if(v){var g=t.findMarks(e(n,0),e(o+1,0),d(+v));if(g.length&&(l=g[0].find(0))){f(de(t.doc,l.from,l.to).join(u))};return};if(i.getAttribute("contenteditable")=="false"){return};var p=/^(pre|div|p|li|table|br)$/i.test(i.nodeName);if(!/^br$/i.test(i.nodeName)&&i.textContent.length==0){return};if(p){c()};for(var r=0;r<i.childNodes.length;r++){h(i.childNodes[r])};if(/^(pre|p)$/i.test(i.nodeName)){s=!0};if(p){a=!0}}
else if(i.nodeType==3){f(i.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}};for(;;){h(i);if(i==r){break};i=i.nextSibling;s=!1};return l};function hi(t,i,r){var n;if(i==t.display.lineDiv){n=t.display.lineDiv.childNodes[r];if(!n){return Ke(t.clipPos(e(t.display.viewTo-1)),!0)};i=null;r=0}
else{for(n=i;;n=n.parentNode){if(!n||n==t.display.lineDiv){return null};if(n.parentNode&&n.parentNode==t.display.lineDiv){break}}};for(var o=0;o<t.display.view.length;o++){var l=t.display.view[o];if(l.node==n){return gl(l,i,r)}}};function gl(t,i,r){var h=t.text.firstChild,c=!1;if(!i||!ue(h,i)){return Ke(e(u(t.line),0),!0)};if(i==h){c=!0;i=h.childNodes[r];r=0;if(!i){var y=t.rest?a(t.rest):t.line;return Ke(e(u(y),y.text.length),c)}};var s=i.nodeType==3?i:null,f=i;if(!s&&i.childNodes.length==1&&i.firstChild.nodeType==3){s=i.firstChild;if(r){r=s.nodeValue.length}}
while(f.parentNode!=h){f=f.parentNode};var m=t.measure,d=m.maps;function p(i,r,n){for(var o=-1;o<(d?d.length:0);o++){var s=o<0?m.map:d[o];for(var l=0;l<s.length;l+=3){var a=s[l+2];if(a==i||a==r){var c=u(o<0?t.line:t.rest[o]),f=s[l]+n;if(n<0||a!=i){f=s[l+(n?1:0)]};return e(c,f)}}}};var n=p(s,f,r);if(n){return Ke(n,c)};for(var l=f.nextSibling,v=s?s.nodeValue.length-r:0;l;l=l.nextSibling){n=p(l,l.firstChild,0);if(n){return Ke(e(n.line,n.ch-v),c)}
else{v+=l.textContent.length}};for(var o=f.previousSibling,g=r;o;o=o.previousSibling){n=p(o,o.firstChild,-1);if(n){return Ke(e(n.line,n.ch+g),c)}
else{g+=o.textContent.length}}};var d=function(e){this.cm=e;this.prevInput="";this.pollingFast=!1;this.polling=new ie();this.hasSelection=!1;this.composing=null};d.prototype.init=function(e){var o=this,n=this,t=this.cm;this.createField(e);var i=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild);if(St){i.style.width="0px"};r(i,"input",function(){if(l&&c>=9&&o.hasSelection){o.hasSelection=null};n.poll()});r(i,"paste",function(e){if(y(t,e)||uo(e,t)){return};t.state.pasteIncoming=+new Date;n.fastPoll()});function s(e){if(y(t,e)){return};if(t.somethingSelected()){fi({lineWise:!1,text:t.getSelections()})}
else if(!t.options.lineWiseCopyCut){return}
else{var r=lo(t);fi({lineWise:!0,text:r.text});if(e.type=="cut"){t.setSelections(r.ranges,null,j)}
else{n.prevInput="";i.value=r.text.join("\n");wt(i)}};if(e.type=="cut"){t.state.cutIncoming=+new Date}};r(i,"cut",s);r(i,"copy",s);r(e.scroller,"paste",function(r){if(X(e,r)||y(t,r)){return};if(!i.dispatchEvent){t.state.pasteIncoming=+new Date;n.focus();return};var o=new Event("paste");o.clipboardData=r.clipboardData;i.dispatchEvent(o)});r(e.lineSpace,"selectstart",function(t){if(!X(e,t)){M(t)}});r(i,"compositionstart",function(){var e=t.getCursor("from");if(n.composing){n.composing.range.clear()};n.composing={start:e,range:t.markText(e,t.getCursor("to"),{className:"CodeMirror-composing"})}});r(i,"compositionend",function(){if(n.composing){n.poll();n.composing.range.clear();n.composing=null}})};d.prototype.createField=function(e){this.wrapper=bo();this.textarea=this.wrapper.firstChild};d.prototype.screenReaderLabelChanged=function(e){if(e){this.textarea.setAttribute("aria-label",e)}
else{this.textarea.removeAttribute("aria-label")}};d.prototype.prepareSelection=function(){var e=this.cm,t=e.display,l=e.doc,i=Go(e);if(e.options.moveInputWithCursor){var r=I(e,l.sel.primary().head,"div"),n=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+o.top-n.top));i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+o.left-n.left))};return i};d.prototype.showSelection=function(e){var i=this.cm,t=i.display;D(t.cursorDiv,e.cursors);D(t.selectionDiv,e.selection);if(e.teTop!=null){this.wrapper.style.top=e.teTop+"px";this.wrapper.style.left=e.teLeft+"px"}};d.prototype.reset=function(e){if(this.contextMenuPending||this.composing){return};var t=this.cm;if(t.somethingSelected()){this.prevInput="";var i=t.getSelection();this.textarea.value=i;if(t.state.focused){wt(this.textarea)};if(l&&c>=9){this.hasSelection=i}}
else if(!e){this.prevInput=this.textarea.value="";if(l&&c>=9){this.hasSelection=null}}};d.prototype.getField=function(){return this.textarea};d.prototype.supportsTouch=function(){return!1};d.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Lt||Q()!=this.textarea)){try{this.textarea.focus()}catch(e){}}};d.prototype.blur=function(){this.textarea.blur()};d.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};d.prototype.receivedFocus=function(){this.slowPoll()};d.prototype.slowPoll=function(){var e=this;if(this.pollingFast){return};this.polling.set(this.cm.options.pollInterval,function(){e.poll();if(e.cm.state.focused){e.slowPoll()}})};d.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0;function i(){var r=e.poll();if(!r&&!t){t=!0;e.polling.set(60,i)}
else{e.pollingFast=!1;e.slowPoll()}};e.polling.set(20,i)};d.prototype.poll=function(){var i=this,e=this.cm,o=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||(bl(o)&&!r&&!this.composing)||e.isReadOnly()||e.options.disableInput||e.state.keySeq){return!1};var t=o.value;if(t==r&&!e.somethingSelected()){return!1};if(l&&c>=9&&this.hasSelection===t||F&&/[\uf700-\uf7ff]/.test(t)){e.display.input.reset();return!1};if(e.doc.sel==e.display.selForContextMenu){var s=t.charCodeAt(0);if(s==0x200b&&!r){r="\u200b"};if(s==0x21da){this.reset();return this.cm.execCommand("undo")}};var n=0,a=Math.min(r.length,t.length);while(n<a&&r.charCodeAt(n)==t.charCodeAt(n)){++n};N(e,function(){Ci(e,t.slice(n),r.length-n,null,i.composing?"*compose":null);if(t.length>1000||t.indexOf("\n")>-1){o.value=i.prevInput=""}
else{i.prevInput=t};if(i.composing){i.composing.range.clear();i.composing.range=e.markText(i.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"})}});return!0};d.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=!1}};d.prototype.onKeyPress=function(){if(l&&c>=9){this.hasSelection=null};this.fastPoll()};d.prototype.onContextMenu=function(e){var t=this,i=t.cm,n=i.display,o=t.textarea;if(t.contextMenuPending){t.contextMenuPending()};var a=he(i,e),y=n.scroller.scrollTop;if(!a||E){return};var m=i.options.resetSelectionOnContextMenu;if(m&&i.doc.sel.contains(a)==-1){v(i,w)(i.doc,oe(a),j)};var p=o.style.cssText,g=t.wrapper.style.cssText,h=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static";o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(l?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var f;if(C){f=window.scrollY};n.input.focus();if(C){window.scrollTo(null,f)};n.input.reset();if(!i.somethingSelected()){o.value=t.prevInput=" "};t.contextMenuPending=s;n.selForContextMenu=i.doc.sel;clearTimeout(n.detectingSelectAll);function d(){if(o.selectionStart!=null){var e=i.somethingSelected(),r="\u200b"+(e?o.value:"");o.value="\u21da";o.value=r;t.prevInput=e?"":"\u200b";o.selectionStart=1;o.selectionEnd=r.length;n.selForContextMenu=i.doc.sel}};function s(){if(t.contextMenuPending!=s){return};t.contextMenuPending=!1;t.wrapper.style.cssText=g;o.style.cssText=p;if(l&&c<9){n.scrollbars.setScrollTop(n.scroller.scrollTop=y)};if(o.selectionStart!=null){if(!l||(l&&c<9)){d()};var r=0,e=function(){if(n.selForContextMenu==i.doc.sel&&o.selectionStart==0&&o.selectionEnd>0&&t.prevInput=="\u200b"){v(i,Tn)(i)}
else if(r++<10){n.detectingSelectAll=setTimeout(e,500)}
else{n.selForContextMenu=null;n.input.reset()}};n.detectingSelectAll=setTimeout(e,200)}};if(l&&c>=9){d()};if(xr){ut(e);var u=function(){A(window,"mouseup",u);setTimeout(s,20)};r(window,"mouseup",u)}
else{setTimeout(s,50)}};d.prototype.readOnlyChanged=function(e){if(!e){this.reset()};this.textarea.disabled=e=="nocursor"};d.prototype.setUneditable=function(){};d.prototype.needsContentAttribute=!1;function wl(e,t){t=t?Le(t):{};t.value=e.value;if(!t.tabindex&&e.tabIndex){t.tabindex=e.tabIndex};if(!t.placeholder&&e.placeholder){t.placeholder=e.placeholder};if(t.autofocus==null){var a=Q();t.autofocus=a==e||e.getAttribute("autofocus")!=null&&a==document.body};function o(){e.value=s.getValue()};var l;if(e.form){r(e.form,"submit",o);if(!t.leaveSubmitMethodAlone){var n=e.form;l=n.submit;try{var u=n.submit=function(){o();n.submit=l;n.submit();n.submit=u}}catch(i){}}};t.finishInit=function(i){i.save=o;i.getTextArea=function(){return e};i.toTextArea=function(){i.toTextArea=isNaN;o();e.parentNode.removeChild(i.getWrapperElement());e.style.display="";if(e.form){A(e.form,"submit",o);if(!t.leaveSubmitMethodAlone&&typeof e.form.submit=="function"){e.form.submit=l}}}};e.style.display="none";var s=h(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return s};function Ma(t){t.off=A;t.on=r;t.wheelEventPixels=ka;t.Doc=T;t.splitLines=Tr;t.countColumn=H;t.findColumn=Wr;t.isWordChar=mr;t.Pass=Qt;t.signal=g;t.Line=Fe;t.changeEnd=re;t.scrollbarModel=Ur;t.Pos=e;t.cmpPos=o;t.modes=Mr;t.mimeModes=ze;t.resolveMode=xi;t.getMode=dr;t.modeExtensions=qe;t.extendMode=ls;t.copyState=me;t.startState=tl;t.innerMode=hr;t.commands=rt;t.keyMap=Z;t.keyName=Kr;t.isModifierKey=qr;t.lookupKey=Ie;t.normalizeKeyMap=Fl;t.StringStream=p;t.SharedTextMarker=Ze;t.TextMarker=fe;t.LineWidget=Je;t.e_preventDefault=M;t.e_stopPropagation=en;t.e_stop=ut;t.addClass=ke;t.contains=ue;t.rmClass=ve;t.keyNames=ce};Nl(h);Cl(h);var Cs="iter insert remove copy getEditor constructor".split(" ");for(var Yt in T.prototype){if(T.prototype.hasOwnProperty(Yt)&&x(Cs,Yt)<0){h.prototype[Yt]=(function(e){return function(){return e.apply(this.doc,arguments)}})(T.prototype[Yt])}};Oe(T);h.inputStyles={"textarea":d,"contenteditable":f};h.defineMode=function(e){if(!h.defaults.mode&&e!="null"){h.defaults.mode=e};hs.apply(this,arguments)};h.defineMIME=cs;h.defineMode("null",function(){return({token:function(e){return e.skipToEnd()}})});h.defineMIME("text/plain","null");h.defineExtension=function(e,t){h.prototype[e]=t};h.defineDocExtension=function(e,t){T.prototype[e]=t};h.fromTextArea=wl;Ma(h);h.version="5.53.2";return h})));
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/libraries/codemirror/lib/codemirror.js. */