/* Source and licensing information for the line(s) below can be found at https://www.dreamholiday.space/modules/module_filter/js/jquery.winnow.js. */
(function(e){var r=Date.now||function(){return new Date().getTime()};function i(e,t,s){var n,i,o,l,a,u=function(){var p=r()-l;if(p<t&&p>=0){n=setTimeout(u,t-p)}
else{n=null;if(!s){a=e.apply(o,i);if(!n){i=o=null}}}};return function(){o=this;i=arguments;l=r();var p=s&&!n;if(!n){n=setTimeout(u,t)};if(p){a=e.apply(o,i);i=o=null};return a}};function n(e){return e.match(/(\w*\:(\w+|"[^"]+")*)|\w+|"[^"]+"/g)};function o(e){if(e.which===13){e.preventDefault();e.stopPropagation()}};var t=function(r,s,u){var t=this;t.element=r;t.selector=s;t.text='';t.queries=[];t.results=[];t.state={};t.options=e.extend({delay:500,striping:!1,selector:'',textSelector:null,emptyMessage:'',clearLabel:'clear',rules:[],buildIndex:[],additionalOperators:{}},e.fn.winnow.defaults,u);if(t.options.wrapper===undefined){t.options.wrapper=e(t.selector).parent()};t.element.wrap('<div class="winnow-input"></div>');t.clearButton=e('<a href="#" class="winnow-clear">'+t.options.clearLabel+'</a>');t.clearButton.css({'display':'inline-block','margin-left':'0.75em'});if(t.element.val()==''){t.clearButton.hide()};t.clearButton.click(function(e){e.preventDefault();t.clearFilter()});t.element.after(t.clearButton);t.element.on({keyup:i(function(){var e=t.element.val();if(!e||n(e).pop().slice(-1)!==':'){t.filter()}},t.options.delay),keydown:o});t.element.on({keyup:function(){if(t.element.val()!=''){t.clearButton.show()}
else{t.clearButton.hide()}}});if(typeof t.element.autocomplete==='function'){var a=Object.keys(t.getOperators()),p=[];for(var l in a){if(a[l]!='text'){p.push({label:a[l],value:a[l]+':'})}};t.element.autocomplete({'search':function(e){if(n(e.target.value).pop()!=':'){return!1}},'source':function(e,t){return t(p)},'select':function(e,t){var r=n(e.target.value);r.pop();r.push(t.item.value);e.target.value=r.join(' ');return!1},'focus':function(){return!1}})};t.element.data('winnow',t)};t.prototype.setQueries=function(e){var r=this,i=n(e);r.text=e;r.queries=[];for(var a in i){if(i.hasOwnProperty(a)){var t={operator:'text',string:i[a]};var l=r.getOperators();if(t.string.indexOf(':')>0){var o=t.string.split(':',2),s=o.shift();if(l[s]!==undefined){t.operator=s;t.string=o.shift()}};if(t.string.charAt(0)=='"'){t.string=t.string.replace(/^"|"$/g,'')};t.string=t.string.toLowerCase();r.queries.push(t)}}};t.prototype.buildIndex=function(){var t=this;this.index=[];e(t.selector,t.wrapper).each(function(n){var o=(t.options.textSelector)?e(t.options.textSelector,this).text():e(this).text(),r={key:n,element:e(this),text:o.toLowerCase()};for(var i in t.options.buildIndex){r=e.extend(t.options.buildIndex[i].apply(this,[r]),r)};e(this).data('winnowIndex',n);t.index.push(r)});return t.trigger('finishIndexing',[t])};t.prototype.bind=function(){var e=arguments;e[0]='winnow:'+e[0];return this.element.bind.apply(this.element,e)};t.prototype.trigger=function(e){var t=arguments;t[0]='winnow:'+t[0];return this.element.trigger.apply(this.element,t)};t.prototype.filter=function(){var t=this;t.results=[];t.setQueries(t.element.val());if(t.index===undefined){t.buildIndex()};var r=t.trigger('start');e.each(t.index,function(e,n){var i=n.element,o=!0;if(t.text!=''){o=!1;for(var a in t.queries){var r=t.queries[a],s=t.getOperators();if(s[r.operator]!==undefined){result=s[r.operator].apply(i,[r.string,n]);if(!result){continue}};o=!0;break}};if(o&&t.processRules(n)!==!1){i.show();t.results.push(n);return!0};i.hide()});var n=t.trigger('finish',[t.results]);if(t.options.striping){stripe()};if(t.options.emptyMessage){if(t.results.length>0){t.options.wrapper.children('.winnow-no-results').remove()}
else if(!t.options.wrapper.children('.winnow-no-results').length){t.options.wrapper.append(e('<p class="winnow-no-results"></p>').text(t.options.emptyMessage))}}};t.prototype.getOperators=function(){return e.extend({},{text:function(e,t){if(t.text.indexOf(e)>=0){return!0}}},this.options.additionalOperators)};t.prototype.processRules=function(e){var t=this,i=e.element,n=!0;if(t.options.rules.length>0){for(var r in t.options.rules){n=t.options.rules[r].apply(i,[e]);if(n===!1){break}}};return n};t.prototype.stripe=function(){var n={even:'odd',odd:'even'};var t='odd';e.each(this.index,function(e,r){if(!r.element.is(':visible')){r.element.removeClass('odd even').addClass(t);t=n[t]}})};t.prototype.clearFilter=function(){this.element.val('');this.filter();this.clearButton.hide();this.element.focus()};e.fn.winnow=function(e,n){var r=this.not('.winnow-processed').addClass('winnow-processed');r.each(function(){var i=new t(r,e,n)});return this};e.fn.winnow.defaults={}})(jQuery);
/* Source and licensing information for the above line(s) can be found at https://www.dreamholiday.space/modules/module_filter/js/jquery.winnow.js. */